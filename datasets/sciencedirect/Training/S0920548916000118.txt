@&#MAIN-TITLE@&#
Reconfigurable smart controller and interface architecture for Photo-voltaic Energy Storage System

@&#HIGHLIGHTS@&#
This paper presents a novel modular control structure of Transducer Interface Module (TIM) and corresponding Transducer Electronic Data Sheet (TEDS) of a photo-voltaic systemEffectiveness of the proposed smart system is illustrated for battery storage system using solar energyField Programmable Gate Array (FPGA) implementation of the protocol provides a compact Smart Energy Storage System (SESS)Proposed architecture supports Electronic storage and access of transducer characteristicsIt leads to self-configurable and knowledge based systemReconfiguration of controller is supported, for Update/change in system components, on line without affecting existing modules

@&#KEYPHRASES@&#
FPGA,DC–DC converter,Photo-voltaic cell,Transducer Interface Module and transducer,

@&#ABSTRACT@&#
Photo-voltaic Energy Storage Systems (PVESS) are the widely used non-conventional energy sources. System's reliability could be improved by standardizing its transducers and controller components as per IEEE 1451.0 standard protocol. The protocol defines the commands and functions required to interface transducers in digital domain using two functional modules namely “Transducer Interface Module” (TIM) and “Transducer Electronic Data Sheet” (TEDS). This paper presents a novel modular control structure of TIM and corresponding TEDS of a photo-voltaic system. Smart transducer interface module proposed in this paper can be embedded to the PVESS system. Effectiveness of the proposed smart system is illustrated for battery storage system using solar energy. Field Programmable Gate Array (FPGA) implementation of the protocol provides a compact Smart Energy Storage System (SESS). It supports knowledge based reconfigurable control module using TEDS information. Spartan 6 FPGA is chosen to implement the architecture with necessary command execution unit to effectively utilize TEDS information. Proposed architecture is implemented in FPGA and its performance is validated for battery storage system.

@&#INTRODUCTION@&#
Transducers namely photo-voltaic cells, voltage/current sensors and switching devices are the major components of Photo-voltaic Energy Storage System (PVESS). Output of current and voltage sensors play vital role in the execution of Maximum Power Point Tracking (MPPT) algorithm [1]. Switching device of DC–DC converter is activated accordingly. MPPT controller matches the load and source impedance by varying duty cycle of switching frequency applied to DC–DC converter [2]. Functional blocks of existing PVESS Architecture are simple to design, independent and modular in structure. Update/change of system components, needs corresponding change in the design of all modules.Proposed architecture supports electronic storage and access of transducer characteristics. It leads to self-configurable and knowledge based system. Characteristics of transducers, photo-voltaic cells and installation details are used to derive maximum power [3,4]. Representation of these data in standard format facilitates the user with universal representation and better understanding [5]. IEEE 1451 Standard defines a format to store and access the characteristics of transducer electronically with information regarding its locality [6]. Knowledge based architecture, embedded with controller and transducer characteristics, proves to be more efficient [7]. This paper proposes complete data sheet for the system, including transducer and controller in electronic form as Transducer Electronic Data Sheet (TEDS) compatible with IEEE 1451.0 standard and stored in memory.It discusses the design issues of IEEE 1451.0 enabled smart transducer interface module for photo-voltaic system. Block diagram representation of the proposed architecture is given in Fig. 1.This paper is organized with the following sections. Major functional blocks and corresponding TEDS definitions are explained in Section 2. Various functionalities of the architecture are validated by simulation results in Section 3. Section 4 discusses the implementation issues with experimental results. Section 5 concludes with the features and future work in the proposed design.Major functional blocks of system include Sensor Module, Actuator Module, Buck converter and IEEE 1451.0 compatible MPPT controller based TIM. Simple, low cost, commercially available transducers are configured as smart transducers using TEDS.Control architecture is designed to execute IEEE 1451.0 services and MPPT controller algorithm simultaneously. Execution of IEEE 1451.0 service commands are performed at higher frequency and MPPT controller operation at comparatively lower frequency. Command execution and MPPT operation are performed in parallel. System operation is synchronized with 50MHz FPGA clock. IEEE 1451.0 services commands are received serially at every 20nsec through input signal ‘sin’. Ideal command respond time will be 1.12μsec for 56bits valid command. Command execution time varies for different commands and maximum execution period will be 17.28μsec to access Transducer channel TEDS. Output signal ‘sout’ carries TEDS/Register/TIM status or transducer data as per the command execution. Major commands of the standard are Read/Write operation of TEDS, Registers, Transducers and TIM status. Instruction decoder provides proper control signals according to instruction.IEEE 1451.0 service commands are grouped into 8 octets (group of 8bits). Each octet is formed according to the command class, command function, destination transducer, length of the command and check sum. IEEE 141.0 Service Command Structure is proposed as defined by the standard and it is shown in Fig. 2.Functionality of the command is defined by command class and command function. Transducer activated by the command, is indicated in Destination transducer channel number. Bit length of the command in hexa-decimal format is provided in length field. Command dependant octets provide offset into TEDS. Complete functionality of the command is provided in transducer channel, command class, command function and length fields. Assuming the offset as zeros and excluding the offset field, 56bits are proposed to represent the IEEE 1451.0 service command. Proposed command message structure for read transducer channel TEDS of transducer number 0001 is given in Fig. 2.TIM is designed to implement five major standard commands [8,9] with 17 command subclasses. Architecture is implemented with all necessary commands. A brief description of the commands executed by TIM is provided in Appendix A.Frequency of clock signal is down converted to 20kHz to generate PWM signal of MPPT controller block. Every 50μsec MPPT controller generates PWM signal to DC–DC converter. Parameters required for MPPT controller are derived from TEDS as listed in Table 2 according to the algorithm. Thus any change/update in system components lead to automatic configuration of controller using TEDS data and corresponding PWM generation. Online configuration of Controller/TEDS is completed within 20μsec, whereas, PWM signal generation occurs at every 50μsec. Simultaneous execution of both functionalities are made possible with the high speed, parallel architecture of FPGA. Interconnectivity of various functional blocks of Smart Energy Storage System is shown in Fig. 3. Output signals ‘op’ and ‘status’ are used to read sensor data and to indicate its validity. Input signal ‘data’ receives digital input data and necessary control signal of sensor TIM is provided by ‘control’ output.TEDS format and its structure for various sensors are discussed by Kamala and Umamaheswari [10] and its generation is provided by Manda and Gurkan [11]. Important parameters of sensors are stored as TEDS and used in knowledge based distributed measurement system [12]. Proposed control architecture utilizes TEDS information to diagnose transducer signals for its validity. Sensor Module consists of circuits for signal conditioning, current, voltage sensing of solar panel and battery with temperature monitoring. Analog signals from sensors are converted into digital by ADC 0808. Signals of ADC are converted into 3.3V by using 74LVX245 trans-receiver and connected to Spartan FPGA. Necessary control signals of TIM are generated from FPGA. Circuit of Sensor with TEDS defined components are encircled and shown in Fig. 4.Update/change in sensor module can be easily achieved. Current sensor can be easily configured by suitably modifying sense resistor or differential amplifier gain. Similarly resistor of potential divider voltage sensor can be suitably modified for the required value. Corresponding change in TEDS is accomplished in the smart controller. This architecture utilizes low cost sensors with TEDS capability for intelligent control. ADC bit size and voltage levels are stored in Transducer channel TEDS.Actuator module includes isolator and driver circuit of the switching device of Buck converter as shown in Fig. 5. Duty cycle of PWM signal depends on battery voltage and current. PWM signal is applied to switching transistor (actuator) through driver and isolator circuit. Complementary pair with switching transistors 2N2907A and PN2222A are used to improve the drive strength of signal. Opto-isolator TLP250 is used as isolator. Signal ‘pwm-in’ is connected with FPGA and ‘pwm-out’ is connected to gate of switching device (MOSFET). Switching signal frequency and signal levels are the TEDS parameters defined for actuator TIM.TEDS definition for various components of TIM is shown in Table 1and this information is compared with real time sensor signal for its validity. This information is compared with the real time signal received for status check. If received signal exceeds the limits, error status is indicated.Photo-voltaic cell and transducer characteristics are stored in various TEDS. Contents of these TEDS could be used for different types of MPPT operations as shown in Table 2.Buck converter is used to transfer energy from photo-voltaic cells to battery with maximum efficiency. Components are designed for maximum switching frequency of 60kHz with 22% ripple in current, 0.002V voltage ripple and efficiency of 90%. PWM input of MOSFET is derived from FPGA through driver and opto-isolator circuit. Circuit diagram of power circuit with buck converter is shown in Fig. 6.The proposed architecture is simulated for various IEEE 1451.0 service commands such as accessing TEDS, registers, sensors and activation of actuators. Execution of command is performed after receiving 56bits of command (with offset field=0) in the signal ‘sin’ serial input line. Major interface signals of the system are defined in table 3.Command execution of “Read Transducer Channel 1” is shown in Fig. 7. It reads the solar panel voltage and transfers it to output signal ‘op’. At this instant whatever is the value of signal stored in the ‘volt’ register is transferred to signal ‘op’. It is to be noted that ‘volt’ register is getting updated for every 200μs from the ADC as illustrated in Fig. 9. In case of sensor failure and value getting struck at peak (pre-set maximum value) and error signal is generated. It is named as ‘evs’ and its logic is kept at active high.Similarly command execution of “Read Transducer Channel 0” is shown in Fig. 8. It reads the solar panel current from the register ‘curr’. Here the peak current is set at FC16. Hence the error signal also becomes active.Interfacing part of ADC with FPGA is shown in Fig. 9. Clock for ADC is chosen as 500kHz. Voltage and current are sensed alternately for every 100μs from the input signal ‘Data’. Start conversion signal ‘sc’ is applied to ADC and voltage is sensed with proper ‘ale’ and ‘add’ signals. Similarly current is sensed. Registers ‘v0’ and ‘i0’ stores previous values of voltage and current respectively. Expanded view of ADC control signals are shown in separate window.Perturb and observe method of MPPT algorithm is taken to illustrate Pulse Width Modulated (PWM) signal generation. Timing diagram related with execution of each step of the algorithm using real time data is shown in Fig. 10. Algorithm starts with 50% duty cycle and ±10% change is applied for every 200μs. Power calculation is updated for every 200μs and stored in temporary registers namely ‘p0’ and ‘p1’. Register ‘p0’ stores the maximum power for each perturbation of algorithm, ‘p1’ stores the current value of power. Width of the PWM signal is varied comparing previous and present power and voltage of solar panel. Change in the Duty cycle for initial measurements, is shown in the separate window of Fig. 10. Initial value of register ‘p0’ is taken as zero. Register ‘p1’ is updated with present power using the voltage and current values at 212.010μs. In the consecutive two FPGA clock cycles, register ‘p0’ is stored with higher power and duty cycle value is updated according to the algorithm at 212.050μs. This new duty cycle becomes active for next PWM signal. Therefore update of duty cycle is achieved for every 250μs approximately. With the step change kept at 10%, exact MPPT point can't be achieved, resulting in the oscillation of duty cycle. Reducing the step size may require longer settling time with present P&O algorithm. With 20kHz PWM signal, it takes 1.2ms to reach maximum power point. Speed of algorithm can be improved by choosing high speed ADC.Atlys Spartan 6 FPGA [28] is used to implement the architecture. Perturb and observe method of MPPT [29], with 8-bit processing modules is chosen. Hardware utilization of the FPGA i.e. the synthesis report generated by the Xilinx tool [30] is provided in Table 4. Maximum utilization of hardware for this application is 65%, it can further be enhanced with additional features such as implementation of advanced MPPT algorithms [31–35], multi-level converter control [36–38], and simplified external hardware. Analog to digital converter and signal conditioning circuit of TIM, can be eliminated by implementing direct analog to micro-controller interface [39].Output of solar panel is used to charge 12V, 42Ah battery with current limiting at 3Amperes. With experimental set-up, time constant of buck converter delays the convergence of duty cycle further. Power derived from solar panel for different duty cycles is shown in Fig. 11. Duty cycle 90% corresponds to MPPT. Solar panel of 100Wp is chosen for this application. Specifications of solar panel is provided in Table 5. Fig. 12shows the solar panel used for the system and Fig. 13shows the experimental set up.

@&#CONCLUSIONS@&#
