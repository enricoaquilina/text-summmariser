@&#MAIN-TITLE@&#
Hub and Chain: Process Flexibility Design in Non-Identical Systems Using Variance Information

@&#HIGHLIGHTS@&#
We study the process flexibility design problem for non-identical systems.Products with low demand mean create a bottleneck effect.Products with low demand variance result in inefficient use of flexibility links.Long chain efficiency decreases in demand variance of any product.Hub-and-chain method outperforms existing methods in both solution quality and time.

@&#KEYPHRASES@&#
Process flexibility,Chaining strategy,Stochastic maximum flow,Demand variance,

@&#ABSTRACT@&#
In multi-product multi-plant manufacturing systems, process flexibility is the ability to produce different types of products in the same manufacturing plant or production line. While several design methods and flexibility indices have been proposed in the literature on how to design process flexibility, most of the insights generated are focused on identical production systems whereby all plants have the same capacity and all products have identically distributed demands. In this paper, we examine the process flexibility design problem for non-identical systems. We first study the effect of non-identical demand distributions on the performance of the well-known long chain design, and discover three interesting insights: (1) products with low demand mean will create a bottleneck effect, (2) products with low demand variance will result in inefficient utilization of flexibility links, and (3) long chain efficiency decreases in demand variance of any product, hence the need to provide this product with access to more capacity. Using these insights, we develop the variance-based hub-and-chain method (VHC), a simple and graphically intuitive method which decomposes the long chain into smaller chains, one of which will serve as a hub to which the other chains will be connected. Numerical tests show that VHC outperforms the long chain by 15% on average and outperforms the constraint sampling method by 38% on average. Lastly, we implement VHC on a case study in the edible oil industry in China and find substantial benefits. We then summarize with some managerial insights.

@&#INTRODUCTION@&#
“If the last few years have taught us anything, it is that customer wants and needs can change quickly – much more quickly than we have been equipped to respond to efficiently in the past. At Michigan Assembly, we will achieve a level of flexibility we don’t have in any other plant around the world, which will allow us to meet shifting consumer preferences in real time.” - Jim Tetreault, Ford Vice President of North America Manufacturing (Ford Media, August 2010).Ford VP Jim Tetreault declared those statements less than two years removed from the disastrous year of 2008, which saw Ford absorb a $14.68B loss while watching Asian rivals Toyota and Honda rake in billions in profits. By 2010, Ford has started staging its much talked about turnaround on the way to accumulating over $35B in profits in a span of four years. While pundits rave about the new car models (e.g. Fusion, Fiesta) or new car technologies (e.g. Sync) launched during that period, it is no secret that the key reason for this turnaround is Ford becoming a more nimble and flexible automaker (LeBeau, 2010). Indeed, the company’s Michigan Assembly Plant has undergone an industry-first $550M renovation, equipping the plant not only to make a variety of models, but also different powertrains, such as conventional and electric (Woodyard, 2011). Not to mention the earlier $200M investment in 2009 to retool Ford’s Kentucky Truck Plant with a flexible body shop capable of producing a wide range of trucks and SUVs (Ford Media, April 2009). As Dave Cole, chairman emeritus for the Center for Automotive Research, puts it, “Lean isn’t good enough anymore. The new reality requires being both lean and flexible.” (Woodyard, 2011).As flexibility gains importance as a strategic priority, it has also attracted strong attention from the academic community. Because flexibility comes in various forms, the earlier works (e.g. Buzacott, 1982; Gupta & Goyal, 1989; Sethi & Sethi, 1990) were mostly reviews and taxonomies, focused on understanding the nature of flexibility, developing measures and evaluation criteria, as well as categorizing the various types of flexibility. Subsequently, research focus has shifted to the strategic issue of flexibility design (i.e. what kind of flexibility to employ and how much), and has centered on process flexibility, defined as “the ability to produce different types of products in the same manufacturing plant or on the same production line”. Specifically, the process flexibility design problem is as follows: given a set of products with random demands, a set of plants with fixed capacities and a limited number of product-plant links indicating the capability of said plant to produce said product, how should one deploy these links such that system performance (i.e. expected maximum flow) is maximized? Similar to the auto-making industry, such is also the problem facing one of the largest producers of edible oil products in China whose plants have various filling and packaging lines that are used to manufacture products of various shapes and sizes. This is precisely one of the reasons that motivated us to study the process flexibility design problem. We shall report our analysis and findings for this company in Section 5.One of the most important ideas on this topic is the concept of the chaining strategy. Jordan and Graves (1995) were the first to observe that a partially flexible system using only a few flexibility links, if configured the right way, can already achieve most of the benefits of full flexibility. Their proposed chaining strategy is essentially a set of guidelines on how to achieve this high-performing partially flexible configuration. Suppose we have a balanced production system where (1) the number of products equals the number of plants, and (2) the mean demand of each product is equal to the capacity of its primary plant.11Note that our definition for “balanced” system deviates from existing terminology with the addition of condition (2). We do so to better capture what is a truly balanced system and to afford us analytical tractability in examining non-identical systems.Assume further that this system is identical such that (1) all product demands are independent and identically distributed, and (2) all plants have the same capacity. In this setting, the chaining strategy will result in a flexibility design where each product will be connected to two plants and each plant will be linked to two products such that there always exists a path connecting any pair of product and plant. This design is known as the long chain and Fig. 1(b) shows one example.A number of papers in the literature examine the balanced and identical system. Aksin and Karaesmen (2007) use a network model to show that the system performance is concave in the degree of flexibility. Chou, Chua, Teo, and Zheng (2010b) develop a random walk approach to characterize asymptotic performance of the chaining strategy as system size grows very large, while Chou, Chua, Teo, and Zheng (2011) use graph expanders to examine the worst-case maximum flow. Simchi-Levi and Wei (2012) use the supermodularity property to prove the optimality of the long chain among systems that use the same amount of flexibility as well as to characterize the performance of the long chain for arbitrary system sizes. Chou, Chua, and Teo (2010a) examine the effect of response dimension of flexibility, while Chou, Chua, and Zheng (2014) study the effect of production postponement on process flexibility. Wang and Zhang (2015) provide a distribution-free analysis of the long chain, while Chen, Zhang, and Zhou (2015) extend Chou et al.’s (2011) work to probabilistic graph expanders.For the general setting of unbalanced and non-identical systems, there are two categories of results. The first provides guidelines such as the Chaining Guidelines by Jordan and Graves (1995), the constraint sampling method by Chou et al. (2010b), and the expansion heuristic by Chou et al. (2011). The second category proposes the use of indices to rank various flexibility designs, such as the JG-Index by Jordan and Graves (1995), the Structural Flexibility (SF) indices by Iravani, Oyen, and Sims (2005), the WS-APL metric by Iravani, Kolfal, and Oyen (2007), and the Expansion Index by Chou, Teo, and Zheng (2008). However, all these methods are either sampling-based approaches (hence time-consuming and result in highly variable outputs) or heuristics that do not explicitly take into account demand variance information.For unbalanced but identical systems, Deng and Shen (2013) develop the Enhanced Chaining Guideline but this method does not utilize the variance information nor does it work for balanced but non-identical systems. To our best knowledge, our paper is the first attempt to study balanced but non-identical systems in greater detail. This setting allows us to analytically examine the effect of non-identical demand means and variances on the performance of the long chain design. The insights we derive from the analysis will then help us develop a new flexibility design method that explicitly takes advantage of the demand variance information.To illustrate, we consider a few examples in Fig. 1. In all these examples, each system is represented by a bipartite graph with a set of products on the left and a set of plants on the right. Each product has a two-point demand distribution with equal probability. For example, a label of (50, 150) denotes the demand has a 50–50 chance of being 50 units or 150 units. On the other hand, each plant has fixed capacity given by the label to its right. System performance is determined by solving a maximum flow problem for each demand realization and taking expectation over all possible maximum flow values. That said, we first consider the two 3 × 3 systems in Fig. 1(a). The long chain on top generates an expected output of 174.9 units, whereas the second design not only uses one less link but also improves the output to 184.5 units. The reason is because the third product–plant pair becomes a bottleneck when included in the long chain.For our second example, we refer to Fig. 1(b), and define efficiency of a flexibility design as the ratio of its improvement over the dedicated design relative to full flexibility. We find that if demand distribution for any product changes from (5, 15) to (9, 11), then the efficiency of the long chain improves. This suggests that long chain efficiency decreases in demand variance of any product. Our third example compares Figs. 1(c) and (d), where two flexibility designs are employed on the same balanced but non-identical system. The outputs of the two designs are 39.75 and 39.5 units, respectively. This is only a small difference, and yet Fig. 1(d) can save one link. Meanwhile, if demand for product 5 also becomes (0, 20), the difference between the two designs increases, hence less incentive to save that one link.In this paper, we manage to prove the three insights generated by the three above examples. Subsequently, we use these insights to devise a variance-based method for designing process flexibility in non-identical systems. The way our method works is to first isolate products with low demand variances into a group that will only employ a dedicated design. Then, we group the remaining products into subgroups according to proximity of demand means. The subgroup should also not exceed a maximum amount of group demand variability, measured by a group coefficient of variation (GCV) that we introduce in this paper. Each of these subgroups will employ the long chain design. Then, a satellite product–plant pair will be selected from each subgroup. The satellite pair of the subgroup with the largest demand means will serve as the hub to which all satellite pairs of the other subgroups will be connected. As such, we refer to our method as the variance-based hub-and-chain method or VHC. To our best knowledge, VHC is the first method that explicitly incorporates demand variance information for non-identical systems. It is also graphically intuitive and simple to explain to managers, because it is reminiscent of the hub-and-spoke network used in airlines but each node is replaced by a small chain. Moreover, our numerical tests show that it is computationally efficient and produces flexibility designs that outperform the long chain by 15% and the designs from constraint sampling method by 38%.We make the following contributions to the literature. First, we analytically prove the effect of changes in demand means and variances on system performance and long chain efficiency. Second, we discover three interesting insights as follows: (1) products with low demand mean can create a bottleneck effect, (2) products with low demand variance will result in inefficient utilization of flexibility links, and (3) long chain efficiency decreases in demand variance of any product, hence it will be a good idea to provide this product with access to more capacity. Third, we use these insights to develop a simple and graphically intuitive variance-based VHC method for designing simple and flexible non-identical systems. Fourth, we numerically test our method for different demand distributions, and benchmark against existing methods. We do so for both simulated scenarios and a real case study from the edible oil industry.The rest of the paper is organized as follows. In Section 2, we define the basic model and notations. Section 3 presents our main results on the effect of demand mean and variance on system performance and efficiency. We then present our hub-and-chain method in Section 4, including numerical tests to benchmark against existing methods. In Section 5, we report the results of our case study and discuss some managerial implications. Finally, Section 6 concludes.Consider a manufacturing system with n plants, facing random demand for m products. We model this system through a bipartite graph representationG=(A,B,G),where A denotes the set of products, B denotes the set of plants, andGdenotes the set of edges (i, j) signifying the capability of plant j to produce product i. That is,A={1,2,…,m},B={1,2,…,n},andG⊆A×B. Next, we use the vector D to denote the random demand, and the vector d for a particular realization of D. We further let Diand dibe the respective random demand and particular demand realization for product i. On the other hand, we let the capacity at plant j be fixed at cjand let the vectorc=[c1,…,cn]T. Note that for a given system, every flexibility design can be uniquely represented by the edge setG. Furthermore, given a demand realization d, the maximum sales which can be achieved by a flexibility designGis defined asZ(d,G)=max∑i∈A∑j∈Bxij,s.t.∑j∈Bxij≤di∀i∈A∑i∈Axij≤cj∀j∈Bxij≥0∀(i,j)∈Gxij=0∀(i,j)∉Gwhere xijrefers to the amount of product i produced by plant j.Under random demand D, the maximum salesZ(D,G)is itself also a random variable. Hence, we define the performance, also referred to as expected maximum sales, ofGto beE[Z(D,G)]. For ease of exposition and whenever the context is clear, we also use the notation[G]to denote this quantity. In general, the problem is to generate a flexibility designGthat maximizes[G]without exceeding a flexibility budget b. That is, we want to solvemaxG:|G|≤b[G]. However, this problem involves a stochastic program and is notoriously difficult and time consuming to solve. As such, most works in the literature focus on developing heuristics to solve special classes of this problem.To classify process flexibility design problems, we introduce the following definitions. We say that the system is balanced if (1)m=n,and (2) the products and plants can be arranged such thatE[Di]=cifor all i ∈ A. Moreover, we call the system identical if (1) the product demands are IID, i.e.Di=Din distribution for all i ∈ A and (2) the plant capacities are all equal, i.e.cj=cfor all j ∈ B. Because of our interest in problems with heterogeneous product demand variances, we focus our study on balanced but non-identical systems.That said, we let n denote the system size (sincem=n), and letμi=E[Di]=cibe the mean demand andσi2be the demand variance for product i for alli=1,2,…,n. We also define a few classes of flexibility designs for balanced systems of size n ≥ 2. The dedicated design is defined asDn={(i,i)|i=1,2,…,n}; the open chain design is defined asLn=Dn∪{(i,i+1)|i=1,2,…,n−1}; the long chain design is defined asCn=Ln∪{(n,1)}; and the full flexibility design is defined asFn={(i,j)|i,j=1,2,…,n}. Our goal in this paper, as in the literature, is to analyze the performance of these flexibility designs as well as to develop new methods to improve on these designs, particularly for non-identical systems.To this end, we further define two performance measures that will be useful in developing our new flexibility design method. We define system potential as the difference between the performance of full flexibility and that of the dedicated design. That is, we let system potential bep(D)=[Fn]−[Dn]. Next, we define efficiency of a flexibility design as the ratio of the difference between the performance of the given flexibility design and that of the dedicated design over system potential. That is, we let the efficiency ofGbef(D,G)=[G]−[Dn][Fn]−[Dn]. For example,f(D,Cn)is equivalent to the chaining efficiency used in Chou et al. (2010b).In this section, we examine the effect of changes in demand means and variances on system potential and flexibility design efficiency. The results will then be used to obtain insights on how to develop methods that can generate good flexibility designs.For analytical purposes, we consider two types of demand distributions; namely, the normal distribution and the symmetric three-point distribution. For normal distribution, we assume that fori=1,2,…,n,Di∼ N(μi, σi) with 3σ ≤ μ so that negative demand values are negligible. This is a reasonable assumption and is common in the literature. For symmetric three-point distribution, we assume that fori=1,2,…,n,Di={μi−ηi,withprobabilitytiμi,withprobability1−2tiμi+ηi,withprobabilitytiwhere 0 ≤ ηi≤ μiand0≤ti<12. This is likewise a reasonable assumption because it characterizes products that have peak, shoulder, and off-peak demands. Moreover, in their study of distribution-free models, Deng and Shen (2014) show that if only the marginal mean and covariance matrix are known while the marginal distribution is unknown, the worst-case distribution when demands are independent is a three-point distribution for every product demand. That said, higher values of ηior tiimply higher demand variance. For both distribution types, we also assume that the product demands are independent.With a slight abuse of notation, we let system potential p(D) be changed to p(μ, σ) for normal distribution and p(μ, η, t) for symmetric three-point distribution. Similarly, we change flexibility design efficiency tof(μ,σ,G)andf(μ,η,t,G)whenever appropriate. We are now ready to present our results.Theorem 1Consider a balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A. For normal distribution, the system potential p(μ, σ) is increasing and concave in σk, but independent of μk. For symmetric three-point distribution, the system potential p(μ, η, t) is increasing and concave in ηk, increasing linearly in tk, but independent of μk.By definition of system potential, we havep(D)=[Fn]−[Dn]=E[min(∑i=1nDi,∑i=1nμi)]−∑i=1nE[min(Di,μi)]=∑i=1nE[(Di−μi)+]−E[(∑i=1nDi−∑i=1nμi)+]For normal distribution, it is well known that if X ∼ N(0, σ), thenE[X+]=σ2π. Therefore, we can obtainp(μ,σ)=∑i=1nσi2π−∑i=1nσi22π. Hence, it follows that∂p(μ,σ)∂σk=12π(1−σk∑i=1nσi2)≥0,∂2p(μ,σ)∂σk2=−12π·1∑i=1nσi2(1−σk2∑i=1nσi2)<0,and∂p(μ,σ)∂μk=0. For three-point distribution, we takek=nwithout loss of generality. It can be shown that[Fn]−[Dn]=[Fn−1]−[Dn−1]+E[min[(∑i=1n−1Di−∑i=1n−1μi)+,ηn]]·tn+E[min[(∑i=1n−1μi−∑i=1n−1Di)+,ηn]]·tnSince[Fn−1]−[Dn−1]is independent of ηn, tn, and μn, it suffices to examine the last two expectation terms. It is easy to see that these terms are increasing and concave in ηn, increasing linearly in tn, and independent of μn. Hence, the results follows.□Theorem 1 says that the potential or maximum value that can be achieved by investing in flexibility becomes larger whenever the demand variance for any product becomes larger. This makes sense because risk pooling is typically most beneficial for systems with more uncertainty. In addition, the theorem also says that potential is independent of changes in the demand mean of any product if capacity is adjusted to match changes in mean demand.Theorem 2Consider a balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A. For normal distribution, the efficiencyf(μ,σ,Cn)of the long chain design is increasing in μk. For symmetric three-point distribution, the efficiencyf(μ,η,t,Cn)of the long chain design is also increasing in μk.By Theorem 1, it suffices to show that[Cn]−[Dn]is increasing in μkfor both distribution types. Suppose[Cn]′and[Dn]′are the respective performances of the long chain design and the dedicated design when mean demand for product k (and capacity for plant k) increases from μktoμk+δwhere δ > 0. We want to show that[Cn]′−[Dn]′≥[Cn]−[Dn],or equivalently,[Cn]′−[Cn]≥[Dn]′−[Dn].By definition, we know that[Dn]=∑i=1nE[min(Di,μi)],and[Dn]′=∑i=1,i≠knE[min(Di,μi)]+E[min(Dk+δ,μk+δ)]=[Dn]+δHence, it remains to be shown that[Cn]′−[Cn]≥δ. For every realization d, we letd′=[d1,…,dk−1,dk+δ,dk+1,…,dn]T,andxij(d,Cn)andxij*(d,Cn)be a feasible solution and an optimal solution, respectively, forZ(d,Cn). Sincexkk(d′,Cn)=xkk*(d,Cn)+δandxij(d′,Cn)=xij*(d,Cn),for all i, j ≠ k is a feasible solution toZ(d′,Cn),it follows that[Cn]′−[Cn]≥δ.To rule out[Cn]′−[Cn]=δ,it suffices that there exist a product–plant pair k and a demand realization d such thatdk−1>μk−1,dk=μkandμk+1>dk+1,butμk<min(dk−1−μk−1,μk+1−dk+1). In this case, an increase from μktoμk+δwill result in a performance increase for the long chain design that is strictly larger than δ.□Theorem 2 is an important result as it states that long chain efficiency (essentially how well the long chain approximates full flexibility) is increasing in the demand mean of any product. This implies that a product with low demand mean can be detrimental to the performance of the long chain design. The reason is that such product might become a bottleneck in allowing idle capacity in higher-numbered plants to serve extra demand for lower-numbered products.The next result follows easily from Theorem 2, and provides upper and lower bounds on long chain efficiency.Corollary 1Consider a balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A. For normal distribution, the efficiency of the long chain design is bounded as follows:f(miniμi·1,σ,Cn)≤f(μ,σ,Cn)≤f(maxiμi·1,σ,Cn). For symmetric three-point distribution, the efficiency of the long chain design is similarly bounded as follows:f(miniμi·1,η,t,Cn)≤f(μ,η,t,Cn)≤f(maxiμi·1,η,t,Cn).In what follows, we examine the effect of changes in demand variance on long chain efficiency. For balanced but non-identical systems, this analysis proves to be unwieldy, especially for the case of normal distribution. To obtain some insights as well as to isolate the effect of demand variance, we consider the symmetric three-point distribution with homogeneous support but heterogeneous tail probabilities, i.e.μi=μ,ηi=η=μ,for alli=1,2,…,n. Without loss of generality, we can further assumeμ=1. Hence, we haveDi={0,withprobabilityti1,withprobability1−2ti2,withprobabilitytiAs such, we can simplify the notation for long chain efficiency intof(t,Cn). Our interest is to see howf(t,Cn)behaves as tkincreases or decreases. To this end, we must first characterize the performances[Dn],[Cn],and[Fn]of the dedicated, the long chain, and the full flexibility designs, respectively.From here onwards, whenever the integer k appears in a statement, we are actually referring to somei∈{1,2,…,n}congruent to k modulo n. For instance, plantn+1refers to plant 1, while product 0 refers to product n. That said, we first present the following preliminary results that will help prove our subsequent main results.Lemma 1For any balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A, we have[Cn]=∑i=1n([Cn∖{(i,i+1)}]−[Cn∖{(i−1,i),(i,i),(i,i+1)}]).This is straight-forward from Theorem 3 in Simchi-Levi and Wei (2012).□For any balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A, and for anyi=1,2,…,n,we have[Cn∖{(i,i+1)}]−[Cn∖{(i−1,i),(i,i),(i,i+1)}]=q0Ai+1Ai+2⋯Ai−1πiwhereq0=[1,0],Ak=[1−tktktk1−tk],andπi=[1−ti,1]T.The proof is similar to those of Lemma 3 and Theorem 5 in Simchi-Levi and Wei (2012). Note, however, that Simchi-Levi and Wei (2012) consider general discrete demand distributions but identical systems.□For j ≥ i,Πk=ijAk=[1+Πk=ij(1−2tk)21−Πk=ij(1−2tk)21−Πk=ij(1−2tk)21+Πk=ij(1−2tk)2].We prove this result by induction. First, observe that the lemma is true forj=iby definition of Ai. Suppose the lemma is true forj=j0. We want to show that it is also true forj=j0+1.Πk=ij0+1Ak=Πk=ij0Ak·Aj0+1=[1+Πk=ij0(1−2tk)21−Πk=ij0(1−2tk)21−Πk=ij0(1−2tk)21+Πk=ij0(1−2tk)2]·[1−tj0+1tj0+1tj0+11−tj0+1]=[1+Πk=ij0+1(1−2tk)21−Πk=ij0+1(1−2tk)21−Πk=ij0+1(1−2tk)21+Πk=ij0+1(1−2tk)2]□For any balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A, we have[Fn]=[Fn−1]+1−tn·Pn−1(n−1).wherePk(w)=Pr{∑i=1kDi=w}is the probability that the total demand for the first k products is w.By conditioning on Dn, we get[Fn]=[Fn−1]+Pr{Dn=0}·Pr{∑i=1n−1Di>n−1}·1+Pr{Dn=1}·1+Pr{Dn=2}·[Pr{∑i=1n−1Di≥n−1}·1+Pr{∑i=1n−1Di<n−1}·2]=[Fn−1]+tn·1−Pn−1(n−1)2+(1−2tn)+tn·[1+Pn−1(n−1)2+1−Pn−1(n−1)2·2]=[Fn−1]+1−tn·Pn−1(n−1)The second equation is due to the symmetry of the distribution of∑i=1n−1Di.□It is now time to present our next main result, which characterizes the performances of the dedicated, the long chain, and the full flexibility designs.Theorem 3Consider a balanced but non-identical system of size n such thatE[Di]=cifor all i ∈ A. For the symmetric three-point distribution withμi=1,ηi=1,for alli=1,2,…,n,we have(a)[Dn]=n−∑i=1nti[Cn]=n−12∑i=1nti−12K(n)∑i=1nti1−2ti,whereK(n)=Πi=1n(1−2ti)is the probability that all products have demand equal to the mean.[Fn]=n−∑i=1nti·Pi−1(i−1).For (a), the result follows easily from the fact that[Dn]=∑i=1nE[min(Di,1)].For (b), we combine Lemmas 1 and 2 to obtain[Cn]=∑i=1nq0Πk=1,k≠inAkπk. By applying Lemma 3 and performing standard matrix multiplication, we get[Cn]=n−12∑i=1nti−12∑i=1nti·Πk=1,k≠in(1−2tk).By definition of K(n), the result follows.For (c), the result follows by applying Lemma 4 recursively and because[F1]=1.□We have the following partial derivatives and difference equations.(a)∂∂tn[Dn]=−1∂∂tn[Cn]=−12−12K(n−1)+K(n−1)∑i=1n−1ti1−2ti∂∂tn[Fn]=−Pn−1(n−1)[Dn]−[Dn−1]=1+tn·∂∂tn[Dn]=1−tn[Cn]−[Cn−1]=1+tn·∂∂tn[Cn]=1+tn(−12−12K(n−1)+K(n−1)∑i=1n−1ti1−2ti)[Fn]−[Fn−1]=1+tn·∂∂tn[Fn]=1−tn·Pn−1(n−1)Next, we present an interesting connection between the sensitivity of long chain efficiency to demand variance (represented by tail probability) and the sensitivity of long chain efficiency to system size.Theorem 4f(t,Cn)is decreasing in tn if and only iff(t,Cn)is decreasing in n.By definition off(t,Cn)and using Corollary 2 (d)–(f), we have∂∂tnf(t,Cn)≤0⇔∂∂tn[Cn]−[Dn][Fn]−[Dn]≤0⇔([Fn]−[Dn])·∂∂tn([Cn]−[Dn])−([Cn]−[Dn])·∂∂tn([Fn]−[Dn])([Fn]−[Dn])2≤0⇔([Fn]−[Dn])·([Cn]−[Dn])−([Cn−1]−[Dn−1])tn−([Cn]−[Dn])·([Fn]−[Dn])−([Fn−1]−[Dn−1])tn≤0⇔−([Fn]−[Dn])([Cn−1]−[Dn−1])+([Cn]−[Dn])([Fn−1]−[Dn−1])≤0⇔[Cn]−[Dn][Fn]−[Dn]≤[Cn−1]−[Dn−1][Fn−1]−[Dn−1]□The analysis involved to show that long chain efficiency decreases in system size has proven unwieldy. In fact, previous works (Chou et al., 2010b; Simchi-Levi & Wei, 2012) are unable to prove this relationship even for the simplest case of balanced and identical systems. Nonetheless, several numerical studies have supported the belief that this relationship holds. To conduct similar numerical studies for our balanced but non-identical case, we first note the following recursive equations for Pk(w). Fork=1,…,n,Pk(1)=(1−2tk)Pk−1(0)+tkPk−1(1)Pk(w)=(1−2tk)Pk−1(w−1)+tkPk−1(w)+tkPk−1(w−2),∀w=2,…,k−1Pk(k)=(1−2tk)Pk−1(k−1)+2tkPk−1(k−2)with boundary conditionsP0(0)=1,andPk(0)=Πi=1kti. For completeness, we can obtain the rest of the probabilities withPk(w)=Pk(2k−w),∀w=k+1,k+2,…,2k.The above recursive equations allow us to calculate Pk(k) for allk=1,2,…,n,which in turn allows us to calculate[Fn]according to Theorem 3. From the same theorem, the values of[Dn]and[Cn]are more straight-forward to calculate. For different system sizesn=2,3,…,20,we randomly generated 10,000 sets of tail probabilitiesti∈(0,0.5),∀i=1,2,…,nand calculated the long chain efficiencyf(t,Cn). For all instances, we find thatf(t,Cn)is, indeed, decreasing in n. Hence, we also have good reason to believe thatf(t,Cn)is decreasing in tn(equivalently, demand variance).The next result follows easily from Theorem 4, and also provides upper and lower bounds on long chain efficiency.Corollary 3For symmetric three-point distribution withμi=1,ηi=1for alli=1,2,…,n,supposef(t,Cn)is decreasing in n. Then,f(maxiti·1,Cn)≤f(t,Cn)≤f(miniti·1,Cn).For our next result, we refer to the edges inGas flexibility links. We then examine the efficiency of link usage for products with low demand variance. Interestingly, we find that link efficiency decreases and goes to zero as variance decreases and goes to zero. This implies that when a product has very low demand variance, including it in the long chain does not cause any harm to system performance, but the benefit is minimal, resulting in a poorly utilized flexibility link.Theorem 5Consider a balanced system of size n such thatE[Di]=cifor all i ∈ A and two flexibility designs; namely,CnandCn−1∪{(n,n)}. The difference in performance[Cn]−[Cn−1∪{(n,n)}]is increasing in tn and equals 0 whentn=0.It is easy to see that[Cn−1∪{(n,n)}]=[Cn−1]+(1−tn). From Corollary 2(e), we have[Cn]−[Cn−1]−(1−tn)=tn(12−12K(n−1)+K(n−1)∑i=1n−1ti1−2ti).Except in the trivial case whenti=0for alli=1,2,…,n−1,the coefficient of tnabove is strictly positive and independent of tn. Hence, the result follows.□While the above results are interesting and useful in themselves, we further discuss how they can be used to develop a method to create flexibility designs that can outperform the long chain. First, Theorem 2 tells us that a product with low demand mean can create a bottleneck if included in a long chain design. Therefore, we will likely be better off with having a few smaller chains where each chain will have relatively similar demand means. However, what we gain from bottleneck removal, we might lose due to a reduction in risk pooling. In fact, there exists no risk pooling at all between products from different small chains.To address this issue, we turn to Theorems 1 and 5. Theorem 1 says that there is little value in installing flexibility for products with very low demand variance. Similarly, Theorem 5 tells us that the link used to include a product with low demand variance in a chain (either long or short) brings minimal value. This finding suggests us to isolate products with low demand variance in order to free up previously poorly utilized links which can then be used to connect the small chains created by the aforementioned bottleneck removal. By doing so, we can address the problem of reduced risk pooling.That said, the next question becomes how to form the smaller chains. That is, how many small chains should there be and which products should belong to which chain? To answer this, we attempt to combine Corollaries 1 and 3. We do so numerically and find that for both normal distribution and symmetric three-point distribution, our numerical examples consistently show thatf(miniμi·1,maxiσi·1,Cn)≤f(miniμi·1,σ,Cn)≤f(μ,σ,Cn)f(μ,σ,Cn)≤f(maxiμi·1,σ,Cn)≤f(maxiμi·1,miniσi·1,Cn).For normal distribution, we generate 100 random scenarios. For each scenario, we randomly sample μi∈ [50, 100], andσi∈[0,25],∀i=1,…,n. Fig. 2shows that the above bounds persist in this set of numerical tests. For symmetric three-point distribution, we likewise generate 100 random scenarios. For each scenario, we randomly sample μi∈ [50, 100], ηi∈ [0, 50], andti∈(0,0.5),∀i=1,…,n. Fig. 3also confirms the above bounds on long chain efficiency, in this case for the three-point distribution.The first inequality above says that the long chain efficiency of any balanced but non-identical system is bounded below by the long chain efficiency of an associated balanced and identical system. In this system, the products all have demand mean equal to the smallest demand mean miniμiin the non-identical system, and demand variance equal to the largest demand variance maxiσiin the non-identical system. This brings us back to the question of how to form smaller chains. The above seems to suggest a group index for each small chain to indicate the amount of variability within the chain, and hence whether products in that chain form a good grouping. We define this group index as follows.Definition 1For a balanced but non-identical system or subsystem G, we define its group coefficient of variation as follows.GCV(G)=maxi∈Gσimini∈GμiThere are two reasons to useGCV(G)=maxi∈Gσimini∈Gμirather than∑i∈Gσi∑i∈Gμi(or some other index). First, when GCV is small, the balanced and identical system associated with the lowest boundf(miniμi·1,maxiσi·1,Cn)would already have high long chain efficiency. Hence, it would also be good to use the long chain design for the non-identical system G. Secondly, when GCV is high, the index clearly guides us in identifying which product to exclude from the system G. Specifically, the denominator suggests to remove the product with the lowest demand mean in order to reduce the GCV, which is consistent with our intention to remove the bottleneck. On the other hand, the numerator implies concern about the product with the largest demand variance. We shall discuss later how our proposed method will provide access to more capacity for these high-variance products.In summary, the GCV index will become a key component of our proposed method to generate good flexibility designs for balanced but non-identical systems, particularly those with heterogeneous demand variances. In the next section, we provide more details on how this method works.For a balanced but non-identical system, we seek a flexibility designG⊆A×Bthat maximizes[G]such that|G|≤b=2n. As mentioned earlier, this is a difficult stochastic mixed integer linear program, which leads us to focus on heuristic methods to find good enough flexibility designs within reasonable computational time. Clearly, choosingG=Cninvolves negligible computational time and is a feasible design. However, as explained in the previous section, a product with low demand mean might cause a bottleneck and substantially reduce the effectiveness of this long chain design. As such, we might be better served using smaller chains with a provision to link together these small chains. And therein lies the inspiration for our proposed method.In what follows, we present our variance-based hub-and-chain method, or VHC for short. The main idea is to partition the product set A intos+1subsetsG0,G1,…,Gssuch that the subsystem corresponding to G0 will employ a dedicated design, while the subsystems corresponding toG1,…,Gswill each employ a long chain design. Then, we choose a product–plant pair in each subsystemG1,…,Gsand call it the satellite pair for that subsystem. Finally, we use the links freed up by G0 to connect the satellite pair of G1 to those ofG2,…,Gs. We denote the resulting flexibility design asH(G0,G1,…,Gs).Our problem becomes to maximize[H(G0,G1,…,Gs)]such that⋃i=0sGi=AandGi⋂Gj=∅,∀i,j=0,1,…,s,i≠j. This is still a difficult problem to solve for at least two reasons. First, the objective function is the expected optimal value of another optimization problem. As a remedy, we can consider a substitute objective function which is to minimize the maximum of the GCVs of the subsetsG1,…,Gs. That is, we want to partition such that the worst group variability of all the subsystems is minimized.minzs.t.∑j=0syij=1,∀i=1,…,nz≥GCV(Gj)=maxi=1nσiyijmini=1nμiyij,∀j=1,…,sz≥σiμi·yi0∀i=1,…,ns=1+12∑i=1nyi0yij∈{0,1},∀i=1,…,n,∀j=0,1,…,sz≥0;s≥1andisanintegerwhere yijdecides whether product i is included in subset Gjor not. In addition, the third and fourth constraints ensure that we do not include too many products into G0. The third constraint prefers that products with low demand variability be isolated, while the fourth constraint ensures that the total number of flexibility links used stays at 2n.The second reason why our problem is difficult is that the integer s is also a decision variable, which depends on the number of products selected into the set G0. In fact, even if we fix s, we are still left with a difficult binary nonlinear program. To avoid the long computational time associated with the above optimization problem, we propose the VHC method detailed in Algorithm 1. Recall that A is the product set, GCV(Gj) is according to Definition 1, and let G(i) be the ith smallest element in set G.The VHC method involves three main steps. In Step 1, products with very low demand variance will be isolated into the subset G0, in which only a dedicated flexibility design will be employed. The decision on how many such products will be chosen depends on two pre-specified parameters θ1, θ2 ∈ (0, 1). θ1 refers to the maximum standard deviation for a single product relative to total standard deviation for all products in order for that single product to be relegated to G0. On the other hand, θ2 refers to the maximum proportion of total standard deviation to be allowed for a group of products to be relegated to G0. Clearly, higher values of θ1 and θ2 will result in more products being included in subset G0. All the remaining products will be placed in subset G1. In Step 2, the subset G1 will be further divided into more subsetsG1,G2,…,Gssuch that the GCV of each subset does not exceed a pre-specified threshold value θ3 ∈ (0, 1). Our choice of θ3 will obviously influence the number s of subsets as well as the number of elements in each subset. Finally, in Step 3, we form the hub-and-chain design. We first let the subsystem G0 employ a dedicated design and each of the subsystemsG1,…,Gsemploy a long chain design. For each non-dedicated subsystem, we let the product–plant pair with the largest demand variance be the satellite pair for that subsystem. Then, we label the subsystem G1 as the hub whose satellite pair will be connected (via two links) to the satellite pair of every other subsystemG2,…,Gs. Note that the reason for choosing pairs with maximum demand variance as satellite pairs is because they are the most likely sources of excess demand and idle capacity. Furthermore, this is in line with the discussion at the end of Section 3.1 that high-variance products should be provided more access to additional capacity.Having said that, we now demonstrate how to implement the VHC method and benchmark against two existing methods; namely, the long chain design and the constraint sampling method developed in Chou et al. (2010b). Before we proceed, we observe that the number of flexibility links utilized by the hub-and-chain design is not always equal to 2n, but largely depends on our choice of values for the parameters θ1, θ2, and θ3. However, in most instances, the number of links deviates from 2n by only a small number. On one hand, a firm with no hard budget on flexibility links may want to just run the VHC method using some pre-tested parameters values. On the other hand, a firm with a strict budget of 2n links may still use the VHC method as a subroutine in a broader iterative method. We discuss both cases in the next subsections.In this section, we consider a 20 × 20 balanced but non-identical system. We build a simulator that randomly generates a system scenario as follows. A scenario consists of 20 normally distributed product demands withμi∈{100,101,…,500}andσi∈{0,1,2,…,⌊μi2⌋}fori=1,2,…,20. Because the system is balanced, the capacity for plant i isci=μifor alli=1,2,…,20. Table 1 shows an example of a system scenario randomly generated by our simulator. Observe that product 4 and product 18 have low demand standard deviations of 13 and 19, respectively.We now apply the VHC method to the example in Table 1 by setting the parameter values atθ1=0.01,θ2=0.1,andθ3=0.6. These values were selected after a few rounds of calibration. That said, the output of the VHC method is illustrated in Figs. 4and 5. Fig. 4(a) presents the pre-established dedicated design, while Fig. 4(b) shows how the product–plant pairs are partitioned into the dedicated group G0, and the non-dedicated groups G1, G2, and G3. Not surprisingly, the low-variance products, including product 4 and product 18, are isolated into G0, while G1 contains the products with the largest demand means. Finally, Fig. 5 shows how the hub-and-chain design is formed. The satellite pairs for G1, G2, and G3 are product-plant pairs 14, 15, and 6, respectively, which precisely correspond to the products with the largest demand variance in each group. G1 then serves as the hub, to whose satellite pair the satellite pairs of all other small chains G2 and G3 are connected.We use our simulator to randomly generate 30 system scenarios like the example above. For each scenario, we implement the VHC method (again using pre-calibrated parameter valuesθ1=0.01,θ2=0.1,andθ3=0.6) and obtain a hub-and-chain design. For each of the 30 scenarios, we benchmark the hub-and-chain design against two existing methods; namely, the long chain design and the constraint sampling method developed in Chou et al. (2010b). For the long chain, we follow the natural sequence of the products, i.e. product 1 is connected to plant 2, product 2 is connected to plant 3, and so on until product n is connected to plant 1. While the sequence of the long chain certainly impacts its performance, numerical studies have shown the performance does not vary substantially. For the constraint sampling method, Chou et al. (2010b) applied the method to a transshipment problem. To accommodate our problem, we redefine the following components accordingly.E˜(xij*)=∑k=110000[dikcjmax{∑idik,∑jcj}]/10000,p˜ij=E˜(xij*)∑i=120∑j=120E˜(xij*)where the sampling probabilitiesp˜ijare used to generate 100 flexibility designs from which the best design is selected.For benchmarking purpose, we randomly generate 10,000 demand realizations and compute the performance (i.e. expected sales) for each of these three methods. In addition, we also compute the performance of the dedicated as well as the full flexibility designs, using the same 10,000 demand realizations.The results are summarized in Table 2, where columns 2–6 contain the respective performances of the dedicated, the long chain, the full flexibility, the constraint sampling, and the hub-and-chain designs. Columns 7–9 present the number of non-dedicated groups, the number of products in the dedicated group, and the number of flexibility links used in the hub-and-chain design, respectively. Finally, the last three columns show the efficiency of the hub-and-chain design, as well as the improvement of this design over both the long chain and the best design from constraint sampling. Here, we define improvement of the hub-and-chain design over a flexibility designGas[VHC]−[Dn][G]−[Dn]−1=[VHC]−[G][G]−[Dn].In all scenarios, VHC achieves at least 91% of the benefits of full flexibility. Moreover, in all but one scenario, VHC obtains at least 94% of the benefits of full flexibility, and in more than 70% of the scenarios, at least 96%.Furthermore, we see from the last two columns that on average, the hub-and-chain design improves on the long chain by 16%, and improves on the best design from constraint sampling by 38%. These are substantial improvements, which corroborate our earlier result that product demand variance plays a significant role in the performance of flexibility designs. Hence, it is not surprising that a method like the VHC, which takes into account demand variances, outperforms existing methods. In terms of computational time, the VHC method requires only at most 1% of the time required to run and compare 100 designs using constraint sampling.It is important to note the following caveats. First, the long chain requires negligible amount of time to design and was also designed for a balanced and identical system. Hence, it is expected to perform worse than a variance-based method. Second, the constraint sampling was proposed based on some restriction on demand bounds. Therefore, heterogeneous demand variances with large values may adversely affect the performance of this method. However, this method works even for unbalanced and non-identical systems.Another observation is that since we have no flexibility budget, one concern is that the VHC method might use too many flexibility links compared to the 40 links used in the long chain. Fortunately, a quick look at Table 2 reveals that the VHC method only use, on average, about 1.6 more links. In fact, in some instances, the VHC even utilizes less links than the long chain, and still obtains substantial gains.In this section, we consider a hard budget b on the number of flexibility links that can be used. To obtain the optimal hub-and-chain design, we implement the following iterative method which uses Steps 2 and 3 of Algorithm 1 as a subroutine. That is, we no longer need the parameters θ1 and θ2 to determine the number |G0| of dedicated product–plant pairs. Instead, we initialize|G0|=2,and later incrementally add 2 more products to G0, i.e.|G0|←|G0|+2. For each value of |G0|, we iteratively run Steps 2 and 3 of Algorithm 1, starting withθ3=maxi=1nσiμi. If the resulting number of non-dedicated subsets iss>b+|G0|2−n+1,then we increment θ3 by a step size Δθ3 until we satisfys≤b+|G0|2−n+1. While a binary search might be faster, this line search for θ3 does not depend on system size n, hence is already computationally very efficient. Finally, we choose the best among hub-and-chain designs generated by different values of |G0| based on their performance according to 10,000 randomly selected demand realizations.For our numerical implementation, we choosen=20,b=40,Δθ3=0.01and let|G0|=2,4,…,12. As in the no flexibility budget case, we use our simulator to randomly generate 30 system scenarios. For each scenario, we implement the above iterative method. The results are summarized in Table 3, where columns 2–5 contain the performances of the dedicated, the long chain, the full flexibility, and the constraint sampling designs. In columns 6–8, we report the performance of the hub-and-chain designs for|G0|=2,4,and 6, respectively. For each scenario, we use an underline to indicate the performance of the best hub-and-chain design. Finally, the last three columns show the efficiency of the hub-and-chain design, as well as the improvement of this design over both the long chain and the best design from constraint sampling.It is interesting to note that the performance of the hub-and-chain design is unimodal in |G0|. This implies that as more products are isolated into the dedicated group, the loss of flexibility in this group increases to an extent no longer matched by the benefit from linking together a larger number of small chains. Computationally, this means that once [VHC] decreases for some |G0|, we can terminate our iterative method. This is the reason why we only report the performances for|G0|=2,4,6. Moreover, we observe that the best hub-and-chain designs mostly coincide with|G0|=2or|G0|=4. Hence, the computational requirements for our VHC method is reasonably low.In terms of solution quality, we can see from Table 3 that VHC achieves at least 91% of the benefits of full flexibility in all scenarios sampled. VHC also outperforms the long chain by 15% and outperforms constraint sampling by 44%. In fact, Fig. 6clearly shows that the efficiency of the hub-and-chain design is better than those of both constraint sampling and the long chain design. Furthermore, we see that the hub-and-chain design is already almost as good as full flexibility, and leaves little room for further improvement. That is, any additional flexibility link will be of little value and hence, inefficiently utilized. Finally, we also observe that the efficiency of the hub-and-chain design is less variable (more stable) than those of the other two methods.In this section, we discuss the practical relevance of our paper by demonstrating how our VHC method can be used in a case study. Afterwards, we also discuss and summarize some managerial insights that can be gleaned from our work.Company Y is one of the largest producers of consumer-pack edible oil products (e.g. soybean oil, sunflower oil) in China. These bottled oil products are consumed in Chinese households on a daily basis, primarily for cooking. The company’s plants located in Guangzhou and Shenzhen have 16 filling-and-packaging lines which can manufacture various size formats and bottle shapes. These production lines can cope with 1.6-, 1.8-, 2-, 2.5-, and 3-L formats for the round bottle shape, 4-, 4.5-, 5-, and 6-L formats for both round and square bottle shapes, and 5.1999-, 5.258-, 5.435-L promotion formats for the round bottle shape. While each line can technically be re-engineered to produce all formats and bottle shapes, doing so will require the plants to keep many types of machine parts to switch between lines. This is costly and will greatly complicate the scheduling problem. Currently, each line is built and designed for one format and bottle shape. The capacity of the lines (in terms of number of bottles) will not vary significantly even if switched to fill another size format due to the nature of this company’s specific filling and packaging process.Recently, the company’s management started an initiative to integrate the operations of the two plants and to restructure the flexibility of the production lines without overinvesting in capacity flexibility. The main decision lies in determining which secondary product formats and bottle sizes the production lines must be equipped to produce. We obtained historical data on various information about the company’s problem from their Enterprise Resource Planning system (SAP) as summarized in Table 4. This data set includes descriptions of product formats and bottle shapes, average demands for each format and shape as well as their standard errors, and the production line capacities. We observed that as the production lines are partially automated, their capacities are always adjusted to approximately match the average demands of the dedicated products.To help solve Company Y’s problem, we employ our VHC method as follows. We execute our algorithm with a budget of 32 links, which is double the number of production lines as the company wanted. We find that the best flexibility design is to isolate lines 6, 13, 15 and 16, and partition the remaining lines into three groups, as in Fig. 7. The output of this hub-and-chain design is 647,850 bottles per day compared to 587,349 bottles for the dedicated design, 627,620 bottles for the long chain design, 618,192 bottles for constraint sampling, and 652,565 bottles for the fully flexible design. We can see that such production line re-engineering can bring about capacity improvement of about 60,000 bottles per day, equivalent to the capacity of production line 11 and greater than the average capacity of 42,525 bottles per line per day. Deploying a fully flexible design can only add at most another 5000 bottles a day at enormous cost, whereas using the long chain or constraint sampling adds less than the average capacity per line.We are now ready to summarize the managerial implications that one can take away from this paper. First, we confirm that similar to identical systems, a partially flexible design can still perform very well in non-identical systems. This implies that indeed a little flexibility can go a long way in designing flexible manufacturing capacity. Second, demand variances of the various products, together with mean demand values, play a significant role in the performance of these partially flexible designs, particularly the long chain. For the long chain, we find that non-identical systems create the following asymmetries: (1) low demand mean results in a bottleneck effect, (2) low demand variance results in link inefficiency, and (3) high demand variance worsens long chain performance. These findings have important managerial implications such as (1) grouping products and lines into partially flexible sub-chains according to mean demand, (2) freeing up links from low variance products, and (3) using freed up links for high variance products. Third and last, the VHC method is computationally easy and graphically intuitive that managers are likely to deploy such approach and its resulting flexible designs. This implies that companies do not need to resort to sophisticated software to implement stochastic optimization or constraint sampling. With the hub-and-chain design, they can also more easily explain and communicate the rationale behind the new flexible design.

@&#CONCLUSIONS@&#
In this paper, we study the process flexibility design problem for non-identical systems. While the long chain design can be employed in this setting, we find that in many cases, it results in poor performance. To devise a method that can improve on the long chain design, we first analytically examine the effect of non-identical demand distributions on system performance as well as long chain efficiency. We find a number of interesting results. First, long chain efficiency increases as the demand mean of any product increases, suggesting a bottleneck effect caused by low demand means. Second, long chain efficiency decreases with the demand variance of any product, implying the benefit of providing high-variance products with access to more capacity. Third, the efficiency of a flexibility link decreases as demand variance of the product for which the link is used decreases. This suggests that the link can be utilized more profitably elsewhere, such as for products with high demand variance.With these insights, we develop a simple and graphically intuitive VHC method to generate flexible designs for non-identical systems. We consider two cases, with and without a fixed flexibility budget. In both cases, we show numerically that VHC already achieves at least 91% of the benefits of full flexibility. Moreover, VHC is, on average, 15% better than the long chain, and 38% better than constraint sampling. Furthermore, VHC uses only 1% of the computational requirements of the constraint sampling method. Finally, we implement the VHC method on a case study in the edible oil industry in China and find substantial benefits brought about by the hub-and-chain design. We also summarize some managerial insights that can be gleaned from this work.