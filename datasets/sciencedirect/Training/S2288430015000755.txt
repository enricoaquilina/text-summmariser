@&#MAIN-TITLE@&#
Minimum time path planning of robotic manipulator in drilling/spot welding tasks

@&#HIGHLIGHTS@&#
In this paper, an optimization strategy is proposed for solving minimum time manufacturing path planning in multi points manufacturing tasks.According to the start-stop movement in drilling/spot welding task, the path planning problem is converted into a traveling salesman problem (TSP) and a series of point to point minimum time transfer path planning problems.Cubic Hermite interpolation polynomial is used to parameterize the transfer path and then the path parameters are optimized to obtain minimum point to point transfer time.A new TSP with minimum time index is constructed and then solved by using a classical genetic algorithm (GA).Numerical test is executed to demonstrate the effectiveness of the proposed approach.

@&#KEYPHRASES@&#
Minimum time,Mixed integer,Path planning,Point to point motion,Drilling/ spot welding task,

@&#ABSTRACT@&#
In this paper, a minimum time path planning strategy is proposed for multi points manufacturing problems in drilling/spot welding tasks. By optimizing the travelling schedule of the set points and the detailed transfer path between points, the minimum time manufacturing task is realized under fully utilizing the dynamic performance of robotic manipulator. According to the start-stop movement in drilling/spot welding task, the path planning problem can be converted into a traveling salesman problem (TSP) and a series of point to point minimum time transfer path planning problems. Cubic Hermite interpolation polynomial is used to parameterize the transfer path and then the path parameters are optimized to obtain minimum point to point transfer time. A new TSP with minimum time index is constructed by using point-point transfer time as the TSP parameter. The classical genetic algorithm (GA) is applied to obtain the optimal travelling schedule. Several minimum time drilling tasks of a 3-DOF robotic manipulator are used as examples to demonstrate the effectiveness of the proposed approach.

@&#INTRODUCTION@&#
Minimum time motion planning problems for robotic manipulator were widely studied in industrial applications and several efficient solution methods are proposed. Aiming at the minimum time motion planning problem along given path, Bobrow et al. [1] proposed a phase plane analysis approach to obtaining minimum time motion trajectory with confined torque. The similar problems were solved by Zhang et al. [2] with a greedy search algorithm and Zhang et al. [3,4] with convex optimization approaches. For the more general minimum time point-to-point motion planning problem, the solution becomes complex since the path and the motion along the path need to be optimized simultaneously. Bobrow [5] applied the phase plane analysis approach to calculate minimum motion time along given path, then the point-to-point motion planning problem was solved by searching minimum time path in feasible path space.Different from the simplex motion planning problems as mentioned above, in manufacturing industry there exists a class of complex tasks called multi-points manufacturing, such as drilling [6,7], spot welding and assembly [8]. These tasks have many unordered points and hence it is necessary to plan an optimal strategy to traverse all the desired points in an orderly way while satisfying the requirement of minimum distance, minimum time or minimum energy, etc.It is shown that the studied drilling/ spot welding tasks can be described by a performance limited traveling salesman problem (TSP) [9–11]: the manipulator effector acts as the salesman, it starts from one machining point and passes through each point just by once meanwhile it must be full stopped to finish the machining task. Since its high computational complexity, the solution of TSP is always an open problem. Currently, the feasible solutions of TSP can be classified by enumeration method, dynamic programming, branch and bound method, or intelligent optimization method (such as genetic algorithm (GA) [12], simulated annealing (SA), Particle Swarm Optimization (PSO), etc).In order to simplify the problem, the common path planning strategies for multi points manufacturing assume the transfer path between any two points is straight line, and the problem can be described as a TSP with minimum distance index [11]. However according to Bobrow [8] and Dubowsky and Blubaugh [9], it is shown that due to the nonlinear expressions of the manipulator kinodynamics and gravitational torques, it is non-equivalent between the minimum time path and the minimum distance path, even the minimum time path from pointito pointjis also different from the pointjto pointipath. Hence besides the optimization of travelling schedule of the set points, the transfer paths between machining points also need to be optimized to obtain the minimum transfer time.In this paper, the minimum time path planning problem for multi points manufacturing is studied. Since the travel schedule of the set points and the detailed transfer path between points must be optimized simultaneously, a mixed integer optimal control formulation is constructed to describe the problem. Based on the start-stop movement in drilling/spot welding task, the problem can be further converted into a pure integer linear programming problem and a series of point to point minimum time transfer path planning problems. In this paper, a typical genetic algorithm (GA) is applied to solve the generated integer linear programming problem. And cubic Hermite interpolation polynomial is used to parameterize the transfer path and then the path parameters are optimized to obtain minimum point to point transfer time.In practical applications, the 6-DOF robotic manipulator is usually required to obtain the free position and orientation output of the end effector. The common configuration of a 6-DOF manipulator is that the first three joints are used to locate the position of the end effector and the last three joints realize the orientation adjustment through cooperation.In this paper, we focus on the position optimization at each time and the effector orientation can be calculated automatically according to the manufacturing requirement. Hence, only the first three joints of manipulator are discussed here. The dynamics model of robotic manipulator with first three joints can be formulated(1)τ=M(q)q¨+q̇TC(q)q̇+G(q),whereq∈Rndenotes the vector of joint angular position,τ∈Rndenotes the vector of joint toques,M(q)∈Rn×nis the inertia matrix of manipulator which is symmetric in which the diagonal elementsM(j,j)describe the inertia seen by jointjand the off-diagonal elementsM(i,j)represent coupling of acceleration from jointjto the generalized force on jointi,C(q)∈Rn×n×ncontains the information of centrifugal and Coriolis forces in which the centripetal torques are proportional toq̇2(i), while the Coriolis torques are proportional toq̇(i)q̇(j),G(q)∈Rnis the vector of gravity-induced torques which always exists even when the robot is stationary or moving slowly,n=3.The goal of this paper is to plan a reasonable path along which the manipulator drills all the given points only by once while the task time is minimum under the dynamics limits of the manipulator.Letncdenote the number of the task points. Definep1,p2,⋯,pncas the effector positions in task space corresponding to thencdrilling points andpi∈R3. The motion performance of each joint is restricted by the torque constraint,(2)−τB≤τ≤τB.And the joint velocity constraint,(3)−q̇B≤q̇≤q̇B,where the joint velocity satisfiesṗ=J(q)q̇andJ(q)denotes the Jacobian matrix of the forward kinematics map.Since the end effector need keep still during the drilling/ spot welding process, then we haveq̇i=0corresponding to theith point positionpiin task space withi=1,2,⋯,nc. Above all, the desired minimum time path planning problem for drilling/ spot welding tasks has the following formulation.(4)minq(t)Tfs.t.{qi−QWi=0,q̇i=0,i=1,2,⋯,nc,∑i=1ncWi=[1,1,⋯,1]ncT,τ=M(q)q¨+C(q,q̇)q̇+G(q),−τB≤τ≤τB,−q̇B≤q̇≤q̇B,q∈Ωq.where,Q=[q1,q2,⋯,qnc]n×nccontains all the joint positions of task points, andq̇idenotes the joint velocity at theith task position,W∈Znc×ncact as a enable switch to ensure the manipulator pass all the given points only by once,Wi∈{0,1}ncis anc-dimension column vector,Ωqdenotes the geometry constraint of the joint position,0=t1<t2<⋯<tnc=Tf.Problem (4) is a typical mixed integer optimal control problem. Similar to Dubowsky and Blubaugh [9], since the motion velocity of each joint need drop to zero at the task point, Problem (4) can actually be decomposed into a minimum time TSP and a series of point to point minimum time path planning sub problem with only continuous variables.In this paper, each point to point path planning subproblem is solved by a direct parameterization approach to obtain minimum transfer timeTij, then minimum time TSP is constructed and solved by a typical genetic algorithm (GA).The minimum time path planning sub problem from pointqitoqjcan be formulated as(5)minq(t)Tijs.t.{τ=M(q)q¨+C(q,q̇)q̇+G(q),−τB≤τ≤τB,−q̇B≤q̇≤q̇B,q̇(0)=0,q̇(Tij)=0,q(0)=qi,q(Tij)=qj,q∈Ωq.In order to generate smooth transfer path, the cubic Hermite polynomial is applied to approximate the path. Define path parameter ass∈[0,1], the parametric path from pointito pointjcan be described as(6)q(s)=h00(s)qi+h10(s)ri+h01(s)qj+h11(s)rj,s∈[0,1]whereridenotes the initial slope of the path andrjdenotes the final slope. The Hermite bases in (6) are(7)h00=2s3−3s2+1,h01=−2s3+3s2,h10=s3−2s2+s,h11=s3−s2.Then the gradient information of the path w.r.t parametersis(8)q′(s)=dqds=h00′(s)pi+h10′(s)ri+h01′(s)pj+h11′(s)rj,(9)q″(s)=d2qds2=h00″(s)pi+h10″(s)ri+h01″(s)pj+h11″(s)rj.The joint velocity can be equivalent to(10)q̇(t)=q′(s(t))ṡ(t).The joint torque becomes(11)τ=m(s)s¨+c(s)ṡ2+g(s),where,m(s)=M(q(s))q′(s)∈Rn,c(s)=M(q(s))q″(s)+C(q(s),q′(s))q′(s)∈Rn,g(s)=G(q(s))∈Rn.Hence, the variables, which need to be optimized in problem (5), are the path slopesri,rjand the parameter acceleration variables¨(t). Define new variablesa=ṡ2andb=s¨. Define path variableu=[riT,rjT]T, then problem (5) can be rewritten as the following optimal control problem in parameter space.(12)min(u,b)Tij=∫011adss.t.{τ(s)=m(u,s)b+c(u,s)a+g(u,s),−τB≤τ(s)≤τB,−q̇B≤q′(u,s)a≤q̇B,q̇(u,0)=0,q̇(u,1)=0,q(u,0)=pi,q(u,1)=pj,q(u,s)∈Ωq.Usually, problem (12) can be approximated as a NLP problem by the common direct parameterization methods, such as CVP, simultaneous approach, et al, then solved by SQP, BFGS, et al. However, on the one hand, from Equ. (11) we have that the problem (12) is strong nonlinear w.r.t the path variableuand there is no explicit correlation between the optimizing objective and the path variableu. On the other hand, we can see the motion variables(a,b)are linear in constraint functions of problem (12) and convex in the optimizing objective. Based on above, a reasonable nest optimization strategy is proposed in this paper [8,13]. Assume the path variableuis fixed in problem (12), then a convex optimization solution can be realized since problem (12) has a convex optimal problem formula at this time. So for each variableucorresponding to any feasible nonsingular path, there exists a unique optimal variable pair(a*,b*)and unique minimum transfer timeTij*. Then the minimum time point to point path planning problem can be further described as the following optimization problem.(13)minu(Tij*),s.t.q(u,s)∈Ωq.The two levels nest optimization strategy for solving problem (13) is shown inFig. 1, whereλis the searching step in each NLP loop,dis the searching direction which is calculated based on the negative gradient direction. In practice, problem (13) can be solved by using existing NLP solver, such as SQP, BFGS, et al.The optimal path planning problem for multi points manufacturing applications can actually be described as a TSP. Define matrixDas measurement matrix of the TSP. Then for the minimum distance strategy, there existsDij=Djifor anyiandjwhich means the distance from pointitojis equal to that fromjtoi. However, for the minimum time strategy, the element ofDdenotes the transfer time, written asDij=Tij*and according to [8,9] the conditionDij=Djicannot be satisfied in most cases.The minimum time path for multi points manufacturing process can be obtained by solving the following integer linear programming problem.(14)minTf=∑i=1nc∑j=1ncWijDijs.t.{∑i=1ncWij=1,j=1,2,⋯,nc,∑j=1ncWij=1,i=1,2,⋯,nc,Wij∈{0,1},Dii=0.In this paper, a classical genetic algorithm is applied to search the optimal traversal path. Simulated natural selection, heredity and mutation processes are executed in our genetic algorithm. The algorithm procedure is programmed as follows:TableGA based path selection procedure:Input: The number of pointsnc, the calculated measurement matrixD.Output: Optimized traversal path and the minimum time motion trajectory.Procedure:Initialization:Population sizepop_size;i=0;Number of generationmax_gen;Initialize the traversal order populationPa_pop(i)=randperm (pop_size,nc) under the criterion in problem (14);Based on the measurement matrixD, evaluate the corresponding minimum time of each individual of the populationPa_pop(i)and select the best solutionTmin*.Loop:While (i<max_gen)Step 1. Under the criterion in problem (14), regenerate offspring populationCh_pop(i)fromPa_pop(i)by applying the crossover and mutation operations;Step 2. According to matrixD, evaluate the corresponding minimum time of each individual of the populationCh_pop(i)and select the best solutionTmin;Step 3. Update the best solutionTmin*=Tmin, if currentTmin*>Tmin;Step 4. Select new populationPa_pop(i+1)fromPa_pop(i)andCh_pop(i);Step 5.i=i+1.End while.End Procedure.In this section, a drilling task in Y-Z plane is studied to verify the effectiveness of the proposed method. The case study has three parts: one is to verify the effectiveness of the point-point minimum time transfer path planning, the second one is to test the optimization of the minimal operation time schedule compared with the minimal travel distance schedule and the minimal angular travel schedule, the last one is to test the practicability of the proposed algorithm by using a 100 points task. A 3-DOF manipulator (as shown inFig. 2) is applied in this test and the torque bounds of all three joints are set as [140; 140; 50]N.m. The Y-Z work plane is placed at x=1m ahead of the robot base and the path geometry constraint is set as no interference between the work plane and the robot effector. Eight drilling points are placed in Y-Z plane as shown inFig. 3. Based on inverse kinematics calculation, the joint positions of robot corresponding to each drilling points can be also calculated.Taking the transfer path planning from point 3 to point 8 as an example to test the effectiveness. The initial path is a straight line to connect the two points. The length of the initial path is 0.8879m, and the corresponding minimum motion time is 0.4839s. The optimal torques of all three joints are shown inFig. 5. By using the method in Section 3, time optimal transfer path from point 3 to point 8 is calculated and shown inFig. 4. The length of the minimum time path is 1.0346m, and the corresponding minimum motion time is 0.4510s. And the optimal torques of all three joints are shown inFig. 6.According to the bang-bang torque structures as shown in Figs. 5 and 6, it implies that the corresponding velocity trajectories have approached optimum. Fig. 6 presents the optimized feedrate curves of the initial path and the optimal path. In this test, the minimum time path is longer than the straight line path, however the corresponding motion time can be reduced 6.8% compared with that of the initial path. The reason can be explained as the velocity feasible space of the time optimal path is larger than that of the initial path, hence faster motion velocity and smaller transfer time can be allowed. (Fig. 7)Table ITypical Genetic Algorithm Set.Tablepop_size40max_gen100Total mutation rate75%Mutation operationsFlip 25%Swap 25%Slide 25%By applying the results in 5.1, we can obtain the elements of measurement matrixDfor the minimal operation time strategy. Also the measurement matrixes of the minimal travel distance strategy and the minimal angular travel strategy can be calculated conveniently. As shown inFig. 8, the travelling schedules of the three strategies are different. Here we record the test data and list them as follows.(a). The travelling schedule of the minimal travel distance strategy is 7-6-5-3-2-1-4-8-7, and the related path length is 5.456m, total angular travel distance is 11.046rad, total motion time is 3.25s.The length of each transfer path is0.555m−0.555m −0.887m −0.504m −0.8m −0.8m −0.8m −0.555m.And the corresponding minimum transfer time is 0.43s−0.38s−0.48s−0.33s−0.42s−0.41s−0.41s−0.39s.(b). The travelling schedule of the minimal angular travel strategy is 7-6-5-2-1-4-3-8-7, and the related path length is 5.613m, total angular travel distance is 9.386rad, total motion time is 3.344s.The length of each transfer path is 0.564m−0.563m −0.855m −0.827m −0.827m −0.527m −0.888m −0.563m.And the corresponding minimum transfer time is 0.44s−0.40s−0.44s−0.41s−0.42s−0.36s−0.48s−0.39s.(c). The travelling schedule of the minimal operation time strategy is 5-6-3-7-8-4-1-2-5, and the related motion time is 3.04s, path length is 5.858m, total angular travel distance is 11.495rad.The motion time of each transfer path is 0.38s−0.35s−0.35s−0.37s−0.39s−0.41s−0.40s−0.39s.And corresponding length of transfer path is0.571m−0.688m-0.682m−0.565m−0.829m−0.835m−0.836m−0.852m.In this test, the path length of minimum time motion is 7.3% longer than that of the minimum distance motion. And the total angular travel distance of minimum time motion is 22.5% larger than of the minimum angular travel motion. However the related optimal motion time of the proposed strategy reduces 6.5% compared with the minimal travel distance strategy and 9.1% compared with the minimal angular travel strategy.In this section, the practicability of the proposed algorithm is tested by execute a series of drilling tasks with 10, 25, 50 and 100 points, respectively. The task points are shown inFig. 9.The performance comparison between the minimal operation time strategy, minimal travel distance strategy and the minimal angular travel strategy is listed inTable 1. According to Table 1, though the travel distance and angular displacement of the minimal operation time strategy is large than the other two strategies, the operation time is obviously shorter than them.Fig. 10 shows the operation time improvement of our strategy compared with the minimal travel distance strategy and the minimal angular travel strategy. According to the test results of the four examples, the proposed algorithm can improve the productivity about 7%~55% compared with the existing algorithms.Table 2 records the computation time of these three strategies. The theoretical analysis of the algorithm complexity is not concerned in this paper. Yet by using the test results, we can check the algorithm complexity. From the test results, we can see that the presented algorithm is time consuming. This is because a large number of optimization sub processes must be executed to calculate the minimum time transfer paths in the proposed algorithm. However since the algorithm is executed offline, we think the computational cost of the proposed method can be acceptable. Finally, we draw the time optimal travelling path for the 100 points task as shown inFig. 11.

@&#CONCLUSIONS@&#
In this paper, a minimum time path planning method is proposed for multi points manufacturing problem in drilling/spot welding task. Within the limits of manipulator dynamics performance, the minimum time path is obtained by optimizing the travel schedule of the set points and the detailed transfer path between points simultaneously. The solution results of the example test indicate that even the proposed minimum time path is longer than the minimum distance path, the operation time can be reduced effectively by using the proposed method. In consequence, the proposed minimal time strategy for multi points task is feasible.