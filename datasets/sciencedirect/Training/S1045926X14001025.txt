@&#MAIN-TITLE@&#
Maintenance and emergency management with an integrated indoor/outdoor navigation support

@&#HIGHLIGHTS@&#
Indoor/outdoor integrated navigation is enabling a large number of applications.Mobile devices are shortening the intervention time in maintenance and emergency.Collaborative work via smartphone facilitate the emergency management.

@&#KEYPHRASES@&#
Maintenance and emergency management,Mobile emergency,Indoor/outdoor navigation,

@&#ABSTRACT@&#
Large and complex infrastructures as industry plants and hospitals are vulnerable to natural, man-made disasters, and causality events. In this paper, we present a solution addressing the guiding personnel during maintenance and/or emergency conditions. The aim is to reduce the time needed to react and to cope with organization and maintenance support, while facilitating communication, and indoor/outdoor navigation. The solution is based on the formalization of protocol, the modelling of knowledge for navigation, the algorithms and the development of a mobile application and corresponding server device for integrated indoor/outdoor navigation. The navigation algorithms are based on low costs mobile sensors and Adaptive Extended Kalman Filter. The solution has been validated and tried out within a large medical infrastructure, thus demonstrating the validity of the identified modalities and procedures, measuring the advantage from both qualitative and quantitative aspects. The indoor navigation solution has been compared with other former solutions based on classical Kalman and dead reckoning.

@&#INTRODUCTION@&#
Reactions with respect to incidents represent one of the greatest challenges in maintenance and emergency management. In most cases, the accessible information on the nature of the incidents is inaccurate as the needs to solve them; thus the personnel is inefficiently coordinated, informed neither on real conditions, nor on available resources. The logistics aspects related to the intervention and to the movement of personnel and patients are very relevant. Information and communication technologies play a vital role in coordinating crisis response between services and the emergency departments [1]. In [2], the emergency plan has been transformed into a multimedia software environment to combine information coming from different sources. Mobile devices have the potential to improve the response to incident and emergency. In that case, the organization of the central station has been revised in order to reduce the possible bottleneck and facilitating the organization of the information. Involved personnel need to have access at updated information and knowledge in the emergency and maintenance conditions. The knowledge supports personnel in a continuously changing situation, where what is needed is the adoption of local standard intervention protocols, complex dosages, checklists, etc. [3]. Therefore, mobile devices are mandatory tools for information access and to help sometimes in taking decisions. On such grounds, the solution has to guarantee the access to any right and updated information in the needed time [4,5]. In addition, the identification of the positions of critical points, emergency facts, of the personnel involved in the emergency scenarios, are very important aspects to be addressed. In fact, the main purposes of managers are to provide support to (i) rescue/maintenance teams to obtain all the relevant information about an problem state and to know how to reach it, (ii) personnel involved in the critical area in getting the closest updated emergency exits, and (iii) rescue/maintenance teams to reach points of interest, POIs, to solve the critical issues and to collaborate each other. To cope with the above aspects, an integrated indoor/outdoor position and navigation solution is fundamental.Outdoor navigation systems are accessible from almost all smartphones. On the other hand, low cost precise indoor navigation systems are still problematic. And, the integration of indoor-outdoor navigation presents open problems. The simple integration of mapping indoor and outdoor maps is the first step [6]. Moreover, also the precise detection of the indoor/outdoor condition is a complex problem [7]. The condition detection can be based on light intensity, on global positioning system (GPS) accuracy, Wi-Fi power, magnetic field, etc. In/out detectors can be used to switch from different navigation algorithms and to reduce the energy consumption. In the literature, many indoor navigation systems for robotics systems have been proposed using different techniques and solutions based on inertial, sensors, and markers as well as a mixture of them, taken from: dead reckoning, WiFi, augmented reality, radio-frequency identification (RFID), quick response (QR), etc.In this paper, an integrated and cheap solution called Mobile Emergency Pro for supporting personnel in large infrastructures as factories and hospitals for maintenance and emergency management is presented. This paper is focussed on presenting the technical aspects of the system functionally of the new version of an early solution called Mobile Emergency presented in [5] and developed for hospital emergency management. The main improvements added with respect to the former version are related to: (i) the insertion of an improved solution for indoor-outdoor navigation based on adaptive Kalman filtering, and (ii) the corresponding improvement of the mapping and point of interest (POI) modelling. The solutions proposed have been compared with the state of the art solutions based on dead reckoning (as the former Mobile Emergency tool [5]) and classical Kalman filtering.The paper is organized as follows. In Section 2, the overview of the scenarios addressed by the solutions is presented. Section 3 describes the architecture of the solutions, and details about the mobile application called Mobile Emergency Pro. The provide description of the architecture presents some details regarding the protocol for data interchange from server to the mobile applications and the facilities for collaboration among personnel. In addition, details regarding the implementation of the aspects related to the integrated indoor/outdoor navigation are also reported. Section 4 presents the state of the art and the integrated inertial indoor-outdoor navigation model and algorithms (based on adaptive Kalman filtering) on which most of the app functionalities are based. In Section 5, a comparison of the proposed solution with respect to the state of the art solution is reported together with some experimental results. Conclusions are drawn in Section 6.Mobile Emergency Pro solution aims at (i) managing communications among personnel during both maintenance and emergency management interventions, and (ii) provide support with information and navigation (to reach the area of interest or to escape from them). The application scenario is focussed on managing these problems in large infrastructures based on several buildings, with thousands of personnel and visiting people (e.g., parks, industries, and hospitals). In these large and complex scenarios, several interventions/events may occur per week, and sometimes per day. They may range from simple maintenance problems to serious fire outbursts. During emergency situations, there are many additional constraints. Connections can be discontinuous (even in the event of multiple networks and protocols: Wi-Fi, UMTS, GPRS, etc.). The infrastructures are supported by: a capillary positioning of plates, operative manuals, information on the walls to provide positions of stairs, escapes, extinguishers, phone numbers, while control cabinets are sensitive information for security reasons.The internal personnel is the most credible in informing the central station about the inception of problems. The calls are performed via voice call, SMS and/or web based tools, where images and videos depicting the event could be useful to compose the scenario of the emergency/intervention.In the context of emergency, the personnel may be involved in patient assistance. Traditional emergency guidelines and protocols do not offer support for team creation to cope with such kinds of problems. Specific additional collecting areas for each emergency/triage level have to be set up, to start treating patients in the area of disaster. These activities may be accelerated by recalling medical personnel from other areas of the hospital. Mobile device could be used to facilitate the aggregation and coordination of collaborative teams [5]. Moreover, the rescue team and personnel need to reach the emergency position and may be not fully aware about the precise location of each department, building and room where they have to come to. If the position of each person is known in real time, the central station may better coordinate the reactions to the events, the formation of teams, etc. Our aim was to create a solution including a Central Station (server) and a mobile application (called Mobile Emergency Pro application) to improve the readiness of personnel during the events, facilitate communication, assure positioning, provide information and knowledge, help teams and services in: reaching the event locations, taking decisions, and thus allowing more efficient rescue operations for the victims. The main idea is to support the emergency management with the aim of: reducing time of intervention and coordination; facilitate and improve the coordination among personnel and structures involved; facilitate the understanding and the activities of the personnel; and provide support in absence of communication support.According to the above described scenario a Central Station and the Mobile Emergency Pro mobile application have been designed and developed. As depicted inFig. 1, the main architecture of Mobile Emergency Solution is made of three main elements: the Central Station, the Mobile Emergency Pro application and the Mobile Medicine Server (http://mobmed.axmedis.org), which is a best practice network on medical procedures.The Central Station, CS, provides services for the mobile devices, collecting alarms, supporting the personnel during the emergency/maintenance, providing support for:•Receiving alarms for intervention and emergency (classification and grouping of them in aggregated events);supporting people involved in the event/emergency. They may need to (i) know the effective event/emergency status (location and area, severity, collecting areas, video and images, responsible, etc.), (ii) get the most viable and closest exit according to the context, (iii) reach a collecting area, (iv) reach a POI, (v) have support for moving a patient, and (vi) establish collaboration among personnel; andsending messages to the mobile devices in push by using the Apple Push Notification Service, APN. This activity is performed to: (i) provide them with the information about the next intervention, (ii) recall personnel, and (iii) keep informed the personnel.The Map Manager includes support for indoor map management on the CS. It provides fresh maps and related information to mobile devices via HTTP. The information associated with each map enables the integrated indoor–outdoor navigation: scale, orientation, position of the exits, position and colour of collecting areas, POI with their name, ID, type, etc. The scale and the orientation are fundamental parameters for the proper functioning of the indoor navigation system. The scale indicates the ratio between centimetres and pixels. The orientation allows to present the map in a coherent manner to the user during the navigation, keeping the device magnetic Nord and the map magnetic Nord aligned according to the device movements. Once defined the scale and the orientation, the Map Manager operator can start the mapping phase of POI, exits, collecting areas, fire extinguishers, medical kits, stairs, etc. For each of them a QR code is automatically generated and made available for the internal personnel to be placed, integrated in official plates.The Mobile Emergency Pro mobile application is available on iPhone to provide support for personnel. The main functionalities are: possibilities of communicating events (maintenance and/or emergency), monitoring events/emergency getting information from the server, collaborating with other colleagues via mobile communication, navigating in/out getting information from the Mobile Medicine Best Practice Network [3]. The hospital area is covered by mobile network with GPRS, EDGE, HDSPA, 3G, and by local WiFi networks. The Mobile Emergency Pro application has to provide support for: authenticating and communicating with the CS to get fresh information about event / emergency status, enforcing the procedures, taking the positions by exploiting mobile devices sensors and QR, managing the maps and related information points and exits, discovering other users and collaborating, accessing to mobile medicine procedures and tools, and finally for navigating from the current position to the identified target (exit, colleagues, collecting area, points of interest, POIs, and tools) by using the integrated indoor/outdoor solution. In addition, the mobile application kept stored continuously updated information regarding maps, procedures, and the log of the user actions. This information can be used to reconstruct actions whenever a legal analysis of facts is requested. In respect of privacy policies, the user is informed about these aspects when the mobile device is registered to the CS. The system configuration includes the protocol and classification according to the maintenance/emergency manual. This information is enforced into the system during the set up and configuration by using XML files.According to Fig. 1 of the general architecture, the Event Manager allows the user to: (i) formalize and send the alarms and follow the procedure manual adopted, attaching a media (typically a video or some images, collected by using the media acquisition and delivering module), (ii) receive direct calls from the CS in push (as suggestions, actions to be performed, tasks and the emergency sheet to coordinate the teams, assignments to move, to join a team, to become the responsible of a team, to move a different area and room), and (iii) monitor the status of the active events/emergencies from the CS.Fig. 2 shows the UML sequence diagram describing the methods sequence required to download the list of emergencies in progress. By creating a new NSURLConnection instance, the system makes an HTTP request to the Central Station. The system gets all the information about the emergencies in progress and codes it by using the XML format. Once downloaded the XML file, the application parses the data through the class DownloadXMLParser and saves them in the device database allowing the user to consult them also in offline mode.The emergency status is provided via an XML containing the information related to the active emergencies. The mobile application parses the information to store it into the local database and provide it to the user. In the following, an example of the XML file is reported. The example shows a list of two emergencies which are located into the hospital.<?xml version=“1.0” encoding=“UTF-8”?><emergencies><emergency><id>9</id><date>2013-10-29 23:23:45</date><type> gas leak</type><dimension>Wide</dimension><patientsNumber>none</patientsNumber><colour>Green</colour><description>30 Km distant</description><patientsState>alive</patientsState><street>VIA DI CAREGGI</street><streetNumber>1</streetNumber><building>001</building><annex>I Obstetrics </annex><floor>1</floor><department>Maternity</department><room>DEG1</room></emergency><emergency><id>1</id><date>2013-10-29 09:41:17</date><type>fire</type><dimension>contained</dimension><patientsNumber>10</patientsNumber><colour>yello</colour><description>under control, needed intervention</description><patientsState>stable</patientsState><street>VIA dei Santi Benedetti</street><streetNumber>76</streetNumber><building>001</building><annex>I General Anatomy</annex><floor>1</floor><department>Surgery</department><room>AMB1</room></emergency></emergencies>The media acquisition and delivering module is exploited by the event manager when images and/or video regarding events/emergency have to be sent to the CS to enrich the event understanding.The collaboration discovering module allows establishing direct communication with neighbourhoods׳ colleagues that are connected with the same network, to exploit the device connection to the local wireless network, and P2P solution. Thus, the operators inside a building are facilitated to communicate each other in order to cooperate and coordinate the actions. The operators may exchange messages both in broadcast or private mode. During an emergency situation, operators inside a building may need to communicate with each other in order to cooperate and coordinate the rescue actions. For this purpose, we introduced in Mobile Emergency Pro a functionality called Discovery Mode that allows to find all the operators inside the building, exploiting the device connection to the local wireless network. The Game Kit framework provides classes to create an ad-hoc wireless network among devices. Exploiting the P2P Connectivity 2 important functionalities have been designed and implemented:•Discovery: the user can discover all the other operators inside the building and know their last position reported.Instant messaging: the user can communicate with other operators connected by exchanging text messages both in broadcast or private mode.InFig. 3, the classes modelling the collaboration and discovering aspects are reported. They implement the functionalities described according to the Model View control patter of the programming model for iOS applications. Relevant classes are those related to DiscoveryView and to BroadcastChatView that are used for managing P2P discovering phases and broadcast messaging, respectively.The QR acquisition allows getting position corresponding to programmed QR codes placed in several positions in the infrastructure (door, cabinet, etc.). QR codes are very cheap and can be printed aside of each wall map and hot point at low cost. The QR codes have been coded by using 30% of redundancy, and the string is defined as: <serverURL>ID<PositionID><checkdigit>. The user can grab QR code with the camera to take the position by using the Mobile Emergency App. Once taken the QR string the device creates a connection to the CS taking information about the corresponding position, which is buffered into the mobile device to avoid information preload. If the User is registered and authenticated, the CS implicitly deduces the position/location of the person. The access to QR URL by means of the Mobile Emergency App. implies the access to additional information used by the internal navigation system: building code; department code; currently updated image URL of the map; room code; spatial coordinates of the QR position on the map; spatial coordinates of the nearest exits; spatial coordinates of the nearest collecting areas, the list of point of interests in the taken map. The Mobile Emergency App exploits the additional information together with the maps downloaded from the server to allow the users to navigate in both indoor and outdoor in and integrated manner, to reach the nearest exit, the collecting area and/or any specific position as described in the following. On the other hand, the coding of a location code in a QR as an URL allowed the Central Station server to provide different information according to different QR readers, and user agents. Thus, if the QR URL is not called by the Mobile Emergency App, a simple map with the current position, exits and collecting areas is provided. This allows any user to exploit the information associated with QR place in the hospital by any simple QR based applications, even if with limited capabilities, e.g., no navigation, no emergency status, no networking, and no communication.Once the maps are obtained or preloaded, the Map Consulting module may be used to visualize them. The user can visualize the building GPS position by consulting a geographical map and can also consult all its floor maps, passing from outdoor to indoor consultation. On each map, the user can see the position of all the POI (e.g., stairs, fire extinguishers, medical kits, tech. cabinets, and exits).In the Mobile Emergency Pro tool, the Path Manager module allows to visualize the path necessary to reach a chosen destination (exits, collecting areas, stairs, other operators) from the current position. This module is divided in two sub-modules and algorithms: the Indoor Path Manager and the Outdoor Path Manager. The indoor path manager is responsible for guiding the user within a building. It exploits the floor map with information about the user and the destination positions. In order to help user to easily reach the destinations, the indoor path manager exploits the Indoor Navigation System (seeFig. 4a) that performs reasoning about the map information/descriptor, taking into account the position and the movements of the users. It estimates the user current position by using the sensors of the mobile device to perform adjustments with respect to the position set using a QR code. This module is used, for example, to reach an emergency exit, a collecting area or another medical operator detected with the discovery mode. On the other hand, the Outdoor Path Manager (see Fig. 4b) guides the user towards a point of interest or buildings located outside a building displaying the path required to reach the destination on an outdoor iOS Map. This sub-module determines the path on the basis of the user position, obtained from the smartphone GPS sensor, and the knowledge of the POI geographical coordinates. At every movement, the system updates the user position on the map.The Reach Location module provides support to teams helping them to reach the event/emergency location, especially even when they do not know the location details and how to reach it. The adopted strategy takes into account available information about the emergency status, maps, possible paths, and takes into account indoor and outdoor paths. To this purpose, the solution is based on an algorithm that work on the internal data base of the mobile phones and when needed ask for additional information to the Central Station.As regards software model for the navigation aspects: indoor/outdoor, path manager, indoor navigation system, they have been mapped on several classes into the Mobile Emergency Pro applications. The programming paradigm of the Apple iOS constrains to map functional aspects connected to the views according to the model-view-control pattern. To this end, inFig. 5, the subset of classes connected to the navigation aspect of the applications are depicted. Among them, class IndoorMapView is the class that manages the indoor navigation activating the Kalman filtering (and former algorithms). Other interesting classes are: MapViewCollecting that allow to load maps and show positions in browsing modality, MyOutdoorPosition that permits to exploit the outdoor navigators connected with the operating system application and to collected the GPS coordinates, ReachMergencyView that enforce the algorithm for the strategies to reach the buildings, etc. These classes are also connected to the QR code acquisition when needed. More details about the algorithms for navigation are reported in the following section.On the main purpose of Mobile Emergency Pro is to provide support to (i) teams to get details about reaching the event location, (ii) involved personnel in getting the closest and updated exit, and (iii) registered users in reaching POI. In order to support the users reaching the target locations, an integrated indoor/outdoor navigation system support is needed. To this end, the teams/users to be moved can be located indoor/outdoor and may receive info to reach a different location in the minimum time. In the case of large infrastructures (industries, parks, hospitals) dedicated solutions are needed to provide updated and integrated indoor/outdoor information with all the POI, exits, cabinets, collecting areas, positions of colleagues, etc. For these reasons, the integrated indoor/outdoor navigation system has been designed to work with the CS.In the literature, many indoor navigation systems have been proposed [8,9]. In [10], a method of personal positioning for a wearable Augmented Reality System based on dead reckoning has been proposed. In that system, the user is equipped with a communication device endowed of built-in sensors, a wearable camera, and an inertial head tracker and display. Other solutions adopted triangulation of Wi-Fi hotspots or other source of signals (or laser light). In [11], a pedestrian location system has been proposed by combining a foot-mounted inertial unit and Wi-Fi, thus achieving a location accuracy of 0.73m in the 95% of cases. Alternative solutions have proposed the combination of inertial solutions based on accelerometers and RFID tags [12]. Most of these solutions are not viable in large and complex infrastructures since they may require to: (i) distribute specific devices in the area to mark the zone; or (ii) navigate by carrying on and using specific expensive devices; or (iii) combine both cases. In large public infrastructures, the solution has to be light and cheap enough to be placed in the hands of all personnel, which should carry them every day. In [13], a simple prototype for indoor navigation based on QR codes indicating direction for impaired has been presented. QR code can be grabbed by a mobile phone camera, and the information is provided via Wi-Fi. A very primitive navigation system has been also provided, allowing to record the person׳s ID, time stamping the visited position, elapsed time after leaving the last position and expected arrival time to the next position, in order to activate the support team or family members in case of anomalies. In [14], an infrastructure-less solution for navigation in extreme environment (indoor and climbing) has been proposed. This solution has been based on an electronic compass, and for the indoor navigation case “You-Are-Here” (YAH-map) maps have been adopted to take the initial references. The successive positions are estimated by assuming a stable and regular walk step for the human. A low-cost indoor navigation system running on off-the shelf camera phones is presented in [14]. In this case, the proposed system uses smartphone cameras to determine user location by detecting fiduciary markers, called SignPost, which provide location information. The scanning of SignPosts has to be performed by the person with the phone camera (for example 37 markers in an area of 100×200m2). The required infrastructure is limited to paper markers (square markers or frame markers) and static digital maps. Moreover, the movements from one SignPost to the next is not supported, they are just markers to be discovered. In [16], a solution for indoor pedestrian navigation based on QR and accelerometers, compass, camera and Internet connectivity of modern smartphones has been proposed. The user gets the initial position and map information from a QR code on a YAH-map. The system deduces the initial position of the user and his orientation on the basis of the distance and the angle from the scanned 2D datamatrix. Then, the system estimates the movement by calculating the number of user׳s steps from the starting point using the accelerometers and the direction using the compass, and accumulating large errors due to the assumption about the regular step length, in order of 4% after 40 steps.The integration of indoor/outdoor with high precision is a complex problem to be solved [7]. A detector of in/out passages can exploit almost all accessible sensors of the mobile device, among them: GPS accuracy, presence of WiFi, cell connection power, magnetic field, etc. When the navigation system starts as a first step, it has to understand if the device is indoor or outdoor.In Mobile Emergency Pro solution, the user may set the target point to be reached: (i) by receiving a push message from the CS for an intervention, and (ii) searching and browsing for the exits, collecting areas, position of colleague, POI. The identified target position can be near of far from the current position; it can be in another building, or at a different floor. Thus the navigation system decomposes the problem in segments of indoor and/or outdoor navigation subtasks taking into account the position of the best doors to enter/exit in/out of the buildings, and thus changing the navigation modality.When the mobile is outdoor, the outdoor path manager exploits and displays the required path to reach the target point, e.g., reaching a building at precise accessible door. In this case, the navigation system is provided by the iOS map and navigation support is activated with the right parameters on the basis of the closest path to enter in the building from the right door. In the case of ground floor, the passing from outdoor to indoor or viceversa has to lead at the activation of the indoor/outdoor according to the knowledge of the GPS position of the building entrance, which are coded and associated with the map information, as stored into the Mobile Emergency database.In Mobile Emergency Pro, the in/out detector takes a decision on the basis of the: GPS accuracy, previous position (if any), and in the case of uncertainty ask to the user to get the point acquiring a QR code. Once the position is identified, the corresponding map is shown to the user (taking from the cache or downloaded) and the user may navigate in the context. The distance between the last GPS position (that should be just out of the door) and the QR coded position should be coherent. In any case, the QR coded position is taken as a reference, but a confirmation may be requested to the user in some cases. If the building is correct, and floor has to be changed the system provides direction to the closest stairs showing them on the map. Once reached the correct floor, the navigator displays a map showing the current position of the user and the location of the target position. In both cases, the indoor path manager helps the user to easily get closer and reach the destination.Within indoor environments, the system cannot obtain updated GPS information with the needed accuracy. Therefore, the proposed solution computes the current position by taking into account of: (i) the information acquired from the last taken QR information (the map and the position of the map with respect to the coordinates, position of the QR in the map, building, floor, etc.), and (ii) the movements considering the device sensors such as gyroscopes, magnetic compass and accelerometers as an inertial navigation system.In [3], the current position was calculated in relation to the last position (i.e., QR) by using an improved dead reckoning algorithm with respect to that proposed by [10]. The idea was to exploit the signals extracted from the smartphone sensors to construct a pedometer: a tool for measuring/counting the steps performed by a human, and associating them to the corresponding direction. Among the signals that can be used to analyse the walking, those coming from the accelerometer are the most relevant.The Mobile Emergency Pro has been developed on iOS platform. The available sensors on iPhone allow estimating the acceleration, the magnetometer and the gyroscope. All these sensors take the measures along three axes, and thus once the measure is performed, it is possible to perform the inverse of the rotation to get a measure independent on the device orientation. On the other hand, the measures obtained are affected by relevant errors. To make the usage of these data possible, a strong reduction of the noise is needed, and thus the Kalman filtering has been adopted [17]. The Kalman filter uses state space models which relate inputs, outputs and state variables by first order differential equations. A Kalman filter performs the prediction of statex∈ℝn, given the observation (measure)z∈ℝm. Both the state and the observation are modelled as follows:xk=Axk−1+Buk−1+wk−1zk=Hxk+vkwherewkandvkmodel the noise of process and that of measure, they are assumed to be independent, white and normal probability distribution of noise:p(wk)~N(0,Qk),p(vk)~N(0,Rk),whereRkandQkare the covariance matrices. Low covariance ofQkandRkwill give rise to high trust, with growing covariances the uncertainty in the equations will also grow. The extreme caseQk→0 would imply complete trust in the previous statexk−1while the caseQk→∞ implies no trust at all. The variableukis an optional m dimensioned control input and is related toxkby the n×m matrix B. The filter process alternates between these two steps: predict the future state at the time update and adjust the predicted state in the measurement update.Predict:–state estimate:x^k|k−1=Ax^k−1|k−1estimate covariance:Pk|k−1=APk−1|k−1AT+QkUpdate (a posteriori):gain:Kk=Pk|k−1HT(HPk|k−1HT+Rk)−1state:x^k|k=x^k|k−1+Kk(zk−Hx^k|k−1)covariance:Pk|k=(I−KkH)Pk|k−1The a-posteriori estimation of the covariance is a measure of the accuracy about state estimation.Typically, Kalman filter addresses linear systems. In this case, there are parts of the model which introduce non-linear features: the time between the steps is not constant, the trigonometric functions sine and cosine used to compute the position. The solution was to use an extended Kalman filter which uses a linearized non-linear model. The linearization approach has led us to make some small changes into the above presented equations.In practice, two Kalman filters have been applied for the accelerations along the x and y axes. The state vector is represented by position, velocity and acceleration assuming that in each time interval (between two measures) the motion is uniformly accelerated. Thus the acceleration between two consecutive instant is constant. Thus the state transition matrix A holds (whereΔTis the time interval):A=(0ΔT12ΔT201ΔT001)Qis a 3×3 diagonal matrix with constant values, R is a float, and the measurement modelH=(0,0,1). R has been measured by keeping the mobile in the same position for a while and taking the average of the covariance noise along x and y. The obtained value: R=0.00064. Q cannot be directly estimated and thus after a number of trials a value ofQ0=15was set as a compromise.The results obtained with the described implementation of Kalman filter were not satisfactory due to the high level of noise on the measures. As will be shown in the next section, the experimental results obtained by using dead reckoning and the above described simple and direct implementation of Kalman Filter where quite similar, especially in the cases in which several changes of directions have to be followed.For the above reasons, in order to improve the solution an extended adaptive Kalman Filter has been adopted to cope with non-linearity [18]. Thus, in the second solution proposed, matrix Q is adaptively estimated by using Q at the previous time instant and a corrective scale factor (estimated on the basis of the ratio from the innovation covariance and the predicted value). The process was initiated by starting from the value empirically estimated,Q0. In some cases, the adaptively estimated value of Q may become zero, and thus, in order to avoid singularity in the global estimation, when this happen, Q is reset toQ0. That is the value that we early estimated. This approach improved the quality of the path estimation and following as described in the next section of validation.The assumption performed about the uniformly accelerated motion is not always true. That is due to the fact that the acceleration between two consecutive instant is not constant as happen when the device is not moving. In these cases:v=vo+at, therefore, in the presence of relevant noise on measures, the velocity is neither zero nor constant and thus v tends to increase even when a is zero or noisy around zero. This problems has been avoided constraining the velocity to zero if the estimated velocity is lower than 0.76. This decreases the chance to see the continuous moving cursors when the user stopped.

@&#CONCLUSIONS@&#
