@&#MAIN-TITLE@&#
An interoperable cloud-based scientific GATEWAY for NDVI time series analysis

@&#HIGHLIGHTS@&#
A scientific gateway for computing the NDVI time series data based on a distributed workflow using the WPS standard.An optimal NDVI times series geoprocessing services based on cloud infrastructures.Experimental results in the study area that include some part of the territory of Armenia.

@&#KEYPHRASES@&#
NDVI,Cloud,Geoprocessing,PyWPS,GRASS GIS,

@&#ABSTRACT@&#
Processing of high-resolution time series satellite images typically requires a large amount of computational resources and time. We introduce here a scientific gateway for computing the Normalized Difference Vegetation Index (NDVI) time series data. Based on a distributed workflow using the Web Processing Service (WPS) standard, the gateway aims to be completely interoperable with other standardized tools. The availability of this gateway may help researchers to acquire knowledge of land cover changes more efficiently over very large spatial and temporal extents, which is especially important in the context of Armenia for which timely decision-making is needed.

@&#INTRODUCTION@&#
As a developing country, Armenia needs the processing and analysis of satellite images to observe and predict various environmental changes (such as land cover changes) and to provide a solution to these problems. Armenian scientists need to rely on satellite imagery to acquire knowledge that supplement a network of very limited in-situ sensors and field stations [1]. For example several mines are currently exploited in the mountainous areas of Armenia and there is a need to detect and predict changes in ecosystem in these regions. Although field data is collected in this region, the small spatial and temporal scales of the data make it difficult to detect such changes.However, continuous observations of the land surface with coarse spatial resolution satellite sensors may solve the problem by providing input to a variety of ecosystem models and environmental applications in Armenia [2]. Many analyses and interpretations of vegetation change at global and regional scale have been based on time series of the Normalized Difference Vegetation Index (NDVI) [3]. Computing NDVI requires a simple combination of two satellite bands, and the result allows the assessing of the density of live green vegetation. For example, NDVI has been widely used to understand desertification in arid and semiarid regions.NDVI time series analysis typically needs high performance computing resources, especially when a large number of high-resolution images need to be processed. The aim of the article is to introduce a cloud-based scientific gateway for NDVI time series analyses using Web Processing Service (WPS) interface [4] specification to ensure interoperability with other gateways. The proposed scientific gateway is crucial today to provide a clear and simple yet very powerful and effective way to solve computationally intensive spatial problems in processing high-resolution satellite images.Providing such services will help decision makers and researchers to perform the calculation of NDVI for satellite images and will speed up its processing if a high-resolution image is used or if time series analyses of images need to be treated at once. The service is important to compare the output of the NDVI time series analyses with the available spatial and temporal environmental field data sets too. Moreover, the Spatial Data Infrastructure (SDI) of Armenia [5], holding currently several field data sets, will be enabled to interoperate with the NDVI gateway through standardized web services.The NDVI is a numerical indicator that uses the visible and near-infrared bands of the electromagnetic spectrum acquired through remote sensing measurements, and that assesses whether the target being observed contains live green vegetation or not. NDVI is often used in studies on vegetation (e.g. for crop yields estimation pasture performance, and range-land carrying capacities) as ground parameters such as the percent of ground cover, photosynthetic activity of the plant, surface water, leaf area index and the amount of biomass that can be directly related to NDVI. The NDVI algorithm subtracts the red reflectance values from the near-infrared and divides it by the sum of the near-infrared (NIR) and red (RED) bands:(1)NDVI=NIR−REDNIR+RED.This formulation allows one to cope with the fact that two identical patches of vegetation could have different values if one were, for example, in bright sunshine, and the other one under a cloudy sky. Theoretically, NDVI values are represented as a ratio ranging in value from −1 to 1, but in practice extreme negative values represent water, values around zero represent bare soil and values over 6 represent dense green vegetation.Analyses of time series of satellite images are important to detect various changes of status for land surface [6]. However, because of different vegetation properties, detecting changes in NDVI signals in a time series can have multiple explanations. Thanks to the availability of series of global NDVI analyses spanning a time period of three decades we can quantify ecosystem changes resulting from ecosystem dynamics and from varying climate conditions. Different ecosystem changes can be analyzed from NDVI time series, such as annual mean or peak NDVI that provides an integrated view on photosynthetic activity [7], the seasonal NDVI amplitude, which is related to the composition of evergreen and deciduous vegetation [8], or the length of the NDVI growing season, which can be related to phenological changes [9]. Several scientific communities use NDVI time series analyses to tackle societal challenges, for example:• To detect climate change effects on forest ecosystems in Southwestern Romania using Landsat TM NDVI data using the ESIP satellite image processing platform [10].• To analyze the dynamics of semi-natural vegetation observed before and after fire occurrence in Southern Italy using NDVI from Terra MODIS data [11].• To analyze the seasonal and interannual analysis of wetlands in South America using NOAA-AVHRR NDVI time series in order to assess the functioning of a wetland macrosystem for the Paran River Delta [12].• To analyze land cover change and NDVI trends in the Northern Eurasian grain belt [13].Infrastructure as a service (IaaS) cloud systems provide access to remote computing infrastructures including physical, more often virtual machines, and other resources, such as a virtual-machine disk image library, raw (block) and file-based storage, firewalls, load balancers, IP addresses, virtual local area networks, and software bundles [14]. Hypervisors [15] play an important role in the virtualization of hardware by supporting to run multiple operating systems concurrently using one physical server and the ability to scale services up and down according to user's varying requirements.Cloud management platforms may manage the resources provided by IaaS cloud. Recently, there has been an increasing number of open-source solutions to build private, public and hybrid clouds, such as OpenNebula [16], Eucalyptus [17], and OpenStack [18].OpenNebula is an open-source project developing an industry standard solution for building and managing virtualized enterprise data centers and enterprise private IaaS clouds. In our gateway, the complex calculations of NDVI time series analysis are performed via virtualized data centers (VDC), which are being managed by the OpenNebula cloud management system of the federated Black Sea cloud infrastructure (BSEC Cloud) [19]. The system images pool of the cloud infrastructure contains a preinstalled and preconfigured image of Ubuntu Server 12.04. The image already contains WPS based Python Web Processing Service (PyWPS) [20], Geographic Resources Analysis Support System (GRASS) GIS [21,22], Apache, R [23] statistical analysis, shell scripts and all necessary packages to perform the calculation of NDVI time series analysis.The WPS is an Open Geospatial Consortium (OGC) standard that defines how to implement geographic calculations or models (i.e. “processes”) as a web service. WPS defines a standardized interface that facilitates the publishing of geospatial processes, and the discovery of and binding to those processes by clients. It enables interoperability between heterogeneous resources (e.g., data, processing). The WPS offers a simple web-based method of finding, accessing, and using any algorithm, calculation or model that operates on spatially referenced data. Publishing WPS means making it available as machine-readable binding information, as well as human-readable metadata that allows the discovery and use of the WPS. This standard is used to handle the request/response part between the users and the back-end server.PyWPS follows the WPS standard and defines how a client can request the execution of a process, and how the output from the process is handled. Moreover, PyWPS runs the GRASS environment to make it possible for a shell script to execute GRASS geoprocessing modules. The R package is an open source data analysis and statistical programming environment. R offers an alternative to GIS software for geoprocessing and analyzing of satellite images. The interpreted nature of R scripts makes it possible to easily implement and modify analysis algorithms by using available graphical and statistical tools. Our time series analysis has been developed using the R backend.Users can request the desired amount of resources to perform their calculation on the virtualized environment over the resources of BSEC Cloud. A virtual machine with requested specifications is then deployed to run the instance of the geo-computational image described above, and the account of the user on the web portal of the scientific gateway is bound to that virtual machine. This machine is activated as soon as the user submits a calculation from the portal. It performs all calculations, provides users with links to check and download results, and if no other request is sent after some time the machine is suspended to free the resources. Finally, when the user account is deleted the virtual machine associated with that account is also deleted.The main features of this approach are:•Computational resources can be increased or decreased to suit user's needs without reinstalling and reconfiguring all required software packages.Multiple users can work with the same web application but the computational parts are isolated from each other.The gateway is packaged as a web portal using the Joomla open source Content Management System, with users accessing the front end and computational services provided through the back end.In the front end, the user may choose an appropriate scene from the available local data repository by indicating the season and the required time period (see Fig. 1).If the animation option has been selected by the user, it will produce an animated view of the NDVI results over a selected time period.The back end consists of service trader, geoprocessing, analyzer and visualization modules (see Fig. 2).The service trader module receives the requested information from the website, selects an appropriate data set from the data repository and calls the geoprocessing module. Currently, two time series datasets (totaling 39 scenes) of red and near InfraRed (NIR) images bands received from 7 satellites are available in the data repository, which cover almost all the territory of Armenia. Landsat 7 collects data in accordance with the World Wide Reference System 2, which has cataloged the world's land mass into 57,784 scenes, each 183km wide by 170km long. The Enhanced Thematic Mapper Plus sensor produces approximately 3.8gigabits of data for each scene. The gateway is expected to hold additional time series of satellite images received from local and regional authorities and stakeholders, such as from the Armenian State Hydrometeorological and Monitoring Service.In order to obtain good results with no data gap in the output (in case of any existing gap in the satellite images), a preprocessing (see Fig. 3) is implemented based on ENVI image analysis software [24]. The following two methods can be used:• A single file gapfill using a triangulation method, which is simple and faster.• A two files gapfill which requires a Scan Line Corrector (SLC) — an image to use for filling the SLC-off image. For the two file options, a global or local statistic is used to perform the histogram matching between the files. Performing a local histogram matching takes significantly longer to process but the matching between the datasets is better.The geoprocessing module receives the output from the service trader module based on GRASS and PyWPS. PyWPS is used as a tool to provide a bridge between GRASS and the web server. The GRASS latest stable release provides more than 400 modules for data management and analysis. The GRASS r.mapcalc [25] module makes it possible to perform various arithmetic operations on raster map layers. New raster map layers can be created which are arithmetic expressions involving existing raster map layers, integer or floating-point constants, and functions. The red and NIR (Near Infra-Red) band images are used for the calculation of NDVI via r.mapcalc. The multiprocessor virtual servers (up to 48 cores) available in the BSEC cloud infrastructure are used for parallelization and can theoretically accelerate the processing up to 48 times. The performance is significantly affected by the task distribution method using the available cores by applying parallel techniques in a task domain to gain efficiency. We implemented task distribution to calculate NDVI in parallel on each core simultaneously.To perform the time series analysis, the R package ndvits (NDVI time series extraction and analysis) is used [26]. For a given area of interest, this package extracts automatically NDVI time series from different optical satellite instruments (e.g., AVHRR, Spot Vegetation) and provides tools to display and analyze the time series. Various functions are available to study landscapes and more especially to detect changes in land use and land cover. Phenological metrics can be computed for every season, as well as for vegetation anomaly maps.In this regard, the STLperArea (Seasonal Decomposition per Area) function of ndvits has been implemented [27]. This function decomposes a time series into seasonal, trend and irregular components using a seasonal component of the mean annual NDVI values for each date. The output of STLperArea is the time series computed mean/max of the time series grouped by area and with/without Savitzky–Golay filter, which essentially performs a local polynomial regression (of degree k) on a series of values (of at least k+1 points which are treated as being equally spaced in the series) to determine the smoothed value for each point. The main advantage of this approach is that it tends to preserve features of the distribution such as relative maxima, minima and width, which are usually ‘flattened’ by other adjacent averaging techniques. It is one of the most widely used filters for NDVI data.The r.out.mpeg module of GRASS is a tool for combining a series of GRASS raster maps into a single MPEG-1 (Motion Pictures Expert Group) format file. It is being used in our gateway to export time series raster maps (in this case NDVI maps) as an mpeg animation directly from the GRASS environment.The WPS standard is used to carry out the user request from the portal. The input parameters are sent by the WPS to the server and depending on these parameters the required data sets are fetched from the local repository and the calculation is started. When the execution is completed the output parameters are handled by the WPS to send the results back to the user. In addition to receiving the WPS results, the user also gets in the portal the full URL of the WPS process. This is useful for performing the same process again from any web browser directly, but also for quickly changing the URL-encoded WPS parameters through manual editing.The study area includes some part of the territory of Armenia that occupies the central part of the Small Caucasus (latitude 380 51′ to 410 18′ North, longitude 430 29′ to 460 37′ East). A corresponding Landsat scene with 7′141 rows and 8′081 columns, totaling 57′706′421 cells has been selected. The scene covers about 60% of the territory of Armenia and includes such environmentally sensitive regions as Yerevan, Ararat, Vayots Dzor, Kotayk and Geghakunik, which includes Lake Sevan (the unique large water body of Armenia).From the front end of the gateway, users can choose from several data sets and from the following parameters:•Season: e.g. summer.Time period: 2009–2013.Request animation: yes (optional).E-mail: for notification.After the submission process, the appropriate PyWPS module is being initialized, which starts the GRASS environment and begins the execution of the back end script (service trader) after receiving all parameters from the web front end. In the first stage the service trader module selects an appropriate data set from the data repository for the indicated scene and begins to import the images into GRASS temporary location using the r.in.gdal module [28]. In our case 39 Landsat images are available in the repository.In the second step, the red and NIR band images are used for the calculation of NDVI using r.mapcalc module of GRASS (see Fig. 4).The NDVI calculation time per each Landsat image takes about one minute (without taking into account the time spent on input and output). So in case of sequential running the approximate total calculation time is about 39min. Thus the speedup of the parallel execution of the NDVI could be up to 39 (i.e., the number of images).In the next step the calculated NDVI images are being exported as GeoTIFF files for future processing by the analyzer module. If the user requested animation, the r.out.mpeg module renders the animation.The analyzer module based on the R package performs the time series analysis using the STLperArea library of ndvits package. The STLperArea makes a summer period seasonal decomposition of time series for the period 2009–2013 (see Fig. 5).After successful finishing of the process, the user is notified by e-mail and may download the results. Because the full process is available as a WPS users can do exactly the same operations as on the web interface but from any GIS client (e.g., QGIS [29]) supporting WPS specifications. The results include both the output of seasonal decomposition and the animation file created by the r.out.mpeg module of GRASS GIS.

@&#CONCLUSIONS@&#
We developed a standardized portal that provides an optimal NDVI time series geoprocessing services based on cloud infrastructures by hiding difficulties of dealing with geoprocessing processes and by avoiding the time needed for searching, collecting, and uploading input data sets. The gateway can quicken the comparison of the results of the NDVI time series simulations with available field data on vegetation cover. Moreover, being fully implemented using the WPS standard, our NDVI service can easily be integrated into other external workflows.The ultimate goal of our approach is to enable users to calculate NDVI time series analyses for almost all regions of Armenia by collecting all available data sets from external and local data repositories covering all regions and cities of Armenia. We also intend to make available additional workflows based on other useful Vegetation Indexes. Our portal may therefore play an important role for Armenian stakeholders and researchers to observe and monitor the changes of urban areas, which is essential for sound and informed landuse planning.Users can access the NDVI time series analysis portal with any web browser at: http://arpegeo.sci.am/gisservices/.