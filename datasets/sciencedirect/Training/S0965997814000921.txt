@&#MAIN-TITLE@&#
Topology synthesis of Multi-Input–Multi-Output compliant mechanisms

@&#HIGHLIGHTS@&#
A generalized formulation to design Multi-Input–Multi-Output compliant mechanisms.The formulation covers the simplified cases of multiple inputs or multiple outputs.The SERA method employed considers two material models: ‘real’ and ‘virtual’.Separate criteria to add and remove material allows to achieve the optimum topology.Numerous examples prove the validity of the proposed formulation.

@&#KEYPHRASES@&#
Topology optimization,Compliant mechanisms,Multiple inputs,Multiple outputs,SERA method,Output displacement,

@&#ABSTRACT@&#
A generalized formulation to design Multi-Input–Multi-Output (MIMO) compliant mechanisms is presented in this work. This formulation also covers the simplified cases of the design of Multi-Input and Multi-Output compliant mechanisms, more commonly used in the literature. A Sequential Element Rejection and Admission (SERA) method is used to obtain the optimum design that converts one or more input works into one or more output displacements in predefined directions. The SERA procedure allows material to flow between two different material models: ‘real’ and ‘virtual’. The method works with two separate criteria for the rejection and admission of elements to efficiently achieve the optimum design. Examples of Multi-Input, Multi-Output and MIMO compliant mechanisms are presented to demonstrate the validity of the proposed procedure to design complex complaint mechanisms.

@&#INTRODUCTION@&#
A compliant mechanism can be defined as a monolithic structure that relies on its own elastic deformation to achieve force and motion transmission [1]. The most promising application area of these mechanisms is the design of microelectromechanical systems (MEMS). These submillimeter mechanical systems coupled with electronic circuits are manufactured using etching techniques and surface micromachining processes from the semiconductor industry [2]. The use of hinges, bearings and assembly processes are prohibitive due to their small size, and must be built and designed as compliant mechanisms etched out of a single piece of material.The simplest design of a compliant mechanism is a Single-Input–Single-Output (SISO) device, where an input force is supposed to produce an output displacement elsewhere in the design domain. Originally accomplished by trial and error methods, the research community quickly took an interest in the systematic design of SISO compliant mechanisms by means of topology optimization techniques [3–5]. The main advantage of these optimization techniques was that the optimum designs were automatically suggested for prescribed design domains, boundary conditions and functional specifications. There was no need to pre-determine the number of links or the location of the flexural joints in the device [6].The optimization methods used to design SISO compliant mechanisms are diverse: the Homogenization method [3,7], the SIMP method [5], the Genetic Algorithms [8], the Level Set methods [9] and, more recently, the SERA method [10].However, the design of more practical actuators requires the consideration of Multi-Input–Multi-Output (MIMO) compliant mechanisms. These devises are widely used in the fields of micro-manipulation and micro-positioning and consider multiple loading (Multi-Input) and/or multiple displacement (Multi-Output) conditions. In this case, a robust optimization method with a suitable problem formulation is necessary to obtain an optimized mechanism which can fulfil the design requirements of strength and flexibility to withstand the applied loads and produce the specific displacements.Larsen et al. [11] were the first researchers to design compliant mechanisms with multiple output requirements with a formulation that minimized the error in obtaining prescribed values of the geometrical and mechanical advantages. Topologically complex mechanisms were designed with the use of the SIMP method. This formulation, however, failed to provide the flexibility required for the kinematic function and the rigidity required simultaneously, since the output constraint had to be specified beforehand.Frecker et al. [12] proposed a different procedure to design mechanisms with multiple output requirements starting from an initial ground structure. The formulation was based on their multi-criteria optimization procedure for single output cases [4]. Two different combinations of the Mutual Potential Energy (MPE) and the Strain Energy (SE) [13] were studied as objective functions so that the two objectives of maximizing the MPE and minimizing the SE were simultaneously accomplished: (1) a weighted linear combination of MPE and SE, and (2) the ratio between them. The extension to mechanisms with multiple output ports used a combined virtual load or a weighted sum of objectives of the multi-criteria formulations to achieve the optimum.After these first approaches, other researchers worked on the design of compliant mechanisms with multiple conditions or constraints. Sigmund [14,15] performed topological synthesis of multiphysic actuators with output constraints together with the SIMP method. Saxena [16] performed topology optimization of compliant mechanisms with multiple output ports. The optimization method used was the Genetic Algorithms and the initial domain a fully connected ground structure. Jouve and Mechkour [17] presented an example of a Multi-Input compliant mechanism obtained with an extension of their Level Set formulation. Liu and Korvink [18] proposed the Artificial Reaction Force (ARF) method as an alternative to implement compliant mechanism design with equality output displacement constraints. More recently, Zhan and Zhang [19] presented preliminary results on MIMO compliant mechanisms using a ground structure approach and the Method of Moving Asymptotes (MMA).The aim of this paper is to present a generalized formulation for the design of MIMO compliant mechanisms. This work is based upon Alonso Gordoa et al. [20] where the Sequential Element Rejection and Additional (SERA) method was extended to multiple loading conditions in structural optimization problems. The current paper uses the same procedure of the SERA method as basis and develops a general formulation for compliant mechanisms design with multiple input and/or output ports. The formulation is an extension from the one used with SISO compliant mechanisms [10]. In addition, an internal loop is defined in this new algorithm to cover the cases of multiple conditions in the input and output ports. Different examples are presented in this paper to demonstrate the validity of the proposed formulation to design MIMO compliant mechanisms by means of a SERA method.A MIMO compliant mechanism is required to meet the flexibility and stiffness requirements in order to withstand the applied loads and produce the predefined displacement transmission. Fig. 1shows such a MIMO compliant mechanism domain Ω. It is subjected to n forces and m output displacements. For the ith applied force Fin,iat the ith input port Pin,i, the output displacement at the jth output port Pout,jis Δi,j.Simplified cases of this generalized definition are: (a) Multi-Input compliant mechanisms with a single output displacement to be produced (m=1), and (b) Multi-Output compliant mechanisms with a single input port where an input load is applied (n=1).The goal of topology optimization for MIMO compliant mechanisms is to obtain the optimum design that converts one or more input works produced by force vectors into one or more output displacements in predefined directions. The mathematical formulation (1) is expressed as the maximization of the summation of the Mutual Potential Energy (MPE) due to each ith input load producing an jth output displacement.The MPE was defined by Shield and Prager [13] as the deformation at a prescribed output port in a specified direction. It was defined for single load conditions and implies that the maximization of the MPE is equivalent to the maximization of the output displacement. Generally, the MPE is not a convex function. Solution existence and uniqueness has not been proven mathematically for this formulation. Although it cannot be guaranteed in all cases, experience with the algorithm has demonstrated that the same overall topology can be obtained regardless of the starting point [10,23].The objective function for a single input load was generalized for multiple conditions as the maximization of a weighted average of the MPE of each case. This approach has already been used with methods such as SIMP [6] or the Level Set [25] methods for other types of multiple criteria problems. The weighting factors ωi,jrelate the i-Input, j-Output cases and their summation is defined to be the unit.The multi-criteria objective function is subjected to a constraint in the target volume fraction V*=[0,1]. This constraint is generally used in structural optimization algorithms in order to define the fraction of design domain that the optimum design aims to have. The relative volume of the FE is factored in this constraint so that a mesh with different element sizes can be considered (1).The design variable of the optimization process is the density of every element e in the mesh ρe. The design variables are discrete ρe={ρmin, 1} where the material is either present if the eth element density is equal to ρe=1 or not present if it equal to the minimum value ρe=ρmin=10−4≈0.(1)max∑i=1n∑j=1mωi,j·MPEi,jsubjected to∑e=1Nρe·VeVTot⩽V*,ρe={ρmin,1},e=1,…,N∑i=1n∑j=1mωi,j=1where ρeis the density of the eth finite element, N is the number of finite elements, Veis the volume of the eth element, VTot is the total volume for the domain and ρmin is the minimum density considered, a typical value of which is 10−4.To obtain the MPEi,j(3) that refers to the ith input load applied to produce the jth output case, two load cases need to be calculated: (1) The Input Force Case, where the input force Fin,iis applied at the input port Pin,i, named with the subscript 1,i in (3), (4) and Fig. 2a; and (2) the Pseudo-Force Case, where a unit force is applied at the output port Pout,jin the direction of the desired displacement, named with the subscript 2,j in (3), (5) and Fig. 2b. The system works under the assumption of small displacements and thus a linear analysis is performed.(2)MPEi,j=U2,jT·K·U1,i(3)K·U1,i=F1,i(4)K·U2,j=F2,jwhereKis the global stiffness matrix of the structure;F1,iis the nodal force vector of the ith input case which contains the input force Fin,i;F2,jis the nodal force vector of the j case which contains the unit output force at the output port Pout,j; andU1,i,U2,jare the displacement fields due to each of the above mentioned case.The spring model of Fig. 1 is used in this work to define the stiffness of the mechanism. The artificial input springs kin,itogether with an input force Fin,isimulates the input work of the actuator at each input port Pin,i. The resistance to the output displacement of the work piece is modelled with springs of stiffness kout,jat each output por Pout,j.A sensitivity analysis is carried out as part of the optimization process to provide information on how sensitive the objective function is to small changes in the design variables.The derivative of the objective function with respect to the element density is given in (5).(5)αe=∂∂ρe∑i=1n∑j=1mωi,j·MPEi,j=∑i=1n∑j=1mωi,j·∂∂ρe(U2,jT·K·U1,i)=∑i=1n∑j=1mωi,j·∂U2,jT∂ρe·K·U1,i+U2,jT·∂K∂ρe·U1,i+U2,jT·K·∂U1,i∂ρeConsidering the symmetry of the stiffness matrix and differentiating the two equilibrium Eqs. (4) and (5)with respect to the density, the derivative of the MPE is derived. As each density variable corresponds to a unique mesh element, only the displacements and stiffness of that element needs to be considered in the calculation. The sensitivity number for an element e, αecan be calculated using (6).(6)αe=∑i=1n∑j=1mωi,j·-Ue1,iT·∂Ke∂ρe·Ue2,jwhereUe1,iTis the displacement vector of element e due to load case 1;Ue2,jis the displacement vector of element e due to load case 2; and∂Ke∂ρeis the derivative of the elemental stiffness matrix with respect to the density.The derivative of the stiffness matrix with respect to the density can only be approximated to the variation of the elemental stiffness (7). This is because the design variables are discrete (density can only be zero or the unit) and as a consequence, the elemental stiffness can only be the value of a ‘real’ materialKeor a negligible value equivalent to zero.(7)∂Ke∂ρe≈ΔKeWhen the approximation to the variation of the elemental stiffness in (7) is incorporated to the expression of the elemental sensitivity number (6), a formulation for the elemental sensitivity number is obtained. This sensitivity number in each element (8) determines which elements are removed or added so that the objective function is maximized. It is a combination of the sensitivity values obtained for each i-Input, j-Output case.(8)αe=∑i=1n∑j=1mωi,j·(-Ue1,iT·ΔKe·Ue2,j)whereUe1,iis the displacement vector of element e due to the applied load F1,i;Ue2,jis the displacement vector of element e due to the output load vector F2,j; and ΔKeis the variation of the elemental stiffness matrix.The sensitivity number for the eth finite element αe(9) is a function of the variation between two iterations in the stiffness matrix of that element ΔKe(10).(9)ΔKe=Ke(k)-Ke(k-1)whereKe(k) is the stiffness matrix in the kth iteration for the eth finite element; andKe(k−1) is the stiffness matrix in the (k−1)th iteration for the same finite element.If an element is added,Ke(k)=KeandKe(k-1)≈0, so the variation of the elemental stiffness matrix isΔKe=Ke. But if an element is removed,Ke(k)≈0andKe(k-1)=Ke, andΔKe=-Ke. The elemental sensitivity number for the ‘real’ and ‘virtual’ material is given by (10) and (11), respectively.(10)αeR=∑i=1n∑j=1mωi,j·(Ue1,iT·ΔKe·Ue2,j)(11)αeV=-∑i=1n∑j=1mωi,j·(Ue1,iT·ΔKe·Ue2,j)The mesh independent filter is based on the one by Sigmund and Petersson [24] and modifies the sensitivity number of each element based on a weighted average of the element sensitivities (12) in a fixed neighbourhood defined by a minimum radius rmin(13).(12)αe′=∑p=1Qρp·γp·αp∑p=1Qγp(13)γp=rmin-dist(e,p),{p∈Q/dist(e,p)⩽rmin},e=1,…,Qwhereαe′is the eth element filtered sensitivity number. Q is the number of elements which are inside of the filter radius. ρpand γpare the density and weighing factor of element p. γpdecreases linearly the further element p is away from element e and for all elements outside the filter radius its value is equal to zero. αpis the pth element sensitivity value. rmin is the filter radius specified by the user. dist(e,p) is the distance between the centers of elements e and p.The SERA method is bi-directional in nature and considers two separate material models: (1) ‘Real’ material and (2) a ‘Virtual’ material with negligible stiffness [21,22]. Two separate criteria for the rejection and admission of elements allows material to be introduced and removed from the design domain by changing its status from ‘virtual’ to ‘real’ and vice versa (Fig. 3). The final topology is made of all the ‘real’ material present in the design domain at the end of the optimization.The SERA method was applied to the design of SISO complaint mechanisms [10] and the procedure defined for SISO mechanisms serves as the basis to define the process to design MIMO compliant mechanisms in this work.The twelve steps that drive the SERA method for MIMO compliant mechanisms are given below, and can be seen in the flow chart of Fig. 4.1.Define the design problem. The maximum design domain must be defined and meshed with finite elements. All boundary constraints, the n input cases and the m output cases, weighting factors ωi,jand the target volume fraction V∗must be specified.Assign ‘real’ and ‘virtual’ material properties, Section 4.1.Calculate the variation of the volume fraction in the kth iteration which consists of the volume fraction to be added ΔVAdd(k) and removed ΔVRemove(k) [10].Carry out the Finite Element Analysis (FEA) loop, Section 4.2.Calculate the elemental sensitivity numbers αe(8).Apply the mesh independent filtering to the sensitivity numbers, Section 3.2.Separate the sensitivity numbers into ‘real’ and ‘virtual’ materials, αRand αV.Define the threshold values for ‘real’ and ‘virtual’ material, αRth and αVth. The threshold values αRth and αVth are the sensitivity values that remove or add the amount of volume ΔVRemove(k) and ΔVAdd(k) defined for each iteration (Fig. 5).Remove and add elements. As the objective is to maximize the objective function, the elements with the higher values of sensitivity number are the ones to be added and removed (Fig. 5).Calculate the volume of the ‘real’ material in the domain.Calculate the convergence criterion ɛk, Section 4.3.Repeat steps (3) through (11) until the target volume is reached and the optimization converges. The final topology is represented by the ‘real’ material in the design domain.The SERA method can start with a domain which consisting of:(1)A full design domain where all of the elements consist of ‘real’ material; orA void design domain where all of the elements are ‘virtual’ material or;Any combination of ‘real’ and ‘virtual’.The starting configuration is the designers’ choice. In all cases, the material present in the domain is assigned ‘real’ material properties and material not present in the domain is assigned ‘virtual’ material properties. The SERA method is a heuristic method for topology optimization. Experience with the method demonstrates however that the method converges toward the same overall optimum topology regardless of the initial design domain [10].The flow chart of the FEA loop is shown in Fig. 6and describes how, for each i-Input, j-Output case, two FEA are carried out to produce the displacement vectorsU1,iandU2,j. The elemental and global stiffness matrixes,KeandK, are also calculated as part of the FEA.The convergence criterion is defined in this work as the change in the objective function in the last 10 iterations (14), which is considered an adequate number of iterations for the convergence study. It implies that the process will have a minimum of 10 iterations as the convergence criterion is not applied until the iteration number has reached 10.(14)εk=∑k-9k-5∑i=1n∑j=1mωi,j·MPEi,j-∑k-4k∑i=1n∑j=1mωi,j·MPEi,j∑k-4k∑i=1n∑j=1mωi,j·MPEi,jwhen ɛkis the convergence criterion, with typical values ranging between 0.001 and 0.01.Several examples of MIMO compliant mechanisms are presented in this section to demonstrate the proposed method: (1) A Multi-Input compliant mechanism, (2) A Multi-Output compliant mechanism, and (3) A MIMO compliant mechanism. The weighing factor for each i-Input, j-Output case is ωi,k=1/(nm) in all examples. That is, all input–output cases are equally weighted.The material properties used are the same in all examples. The Young’s modulus is E=1 and the Poisson’s ratio is ν=0.3. The density of the virtual material is ρmin=10−4, which is equivalent to 0.01% of the stiffness of a real material. A full initial design domain is used in all cases. That is, the initial density of all elements is set to the unit.The validity of the resulting topologies can be compared to the optimum topologies obtained for SISO mechanisms with methods such as SIMP [6], Level Set [17] or SERA [10].The design domains for two crunching mechanisms are shown in Fig. 7. In both cases, the design domain is a square of size 200×200mm subdivided using 2×2mm square four node finite elements. Different input loads are applied in the top and bottom edges of the design domain and an output displacement (m=1) is to be produced in the center of the left-hand edge of the domain. Two different Multi-Input crunching mechanisms are considered: (a) two loads (n=2) are applied (Fig. 7a) with a stiffness ratio of kin,1=8·kin,2, and b) three loads (n=3) are applied (Fig. 7b) with a stiffness ratio of kin,1=4kin,2=4kin,3. In all cases, an input load of Fin,i=1N is applied at each input port. The target volume fraction V* is defined to be 0.4 in both cases and the filter radius used is rmin=6mm.With the use of these examples, optimal topologies are presented for different combinations of input stiffness in order to show the robustness of the method in producing optimal topologies regardless of the parameters defined. Results are shown in Figs. 8 and 9and the output displacements presented in Tables 1 and 2. For reference, the number of iterations needed to achieve the optimum was 42 iterations for the example in Fig. 8a and 56 iterations for the case in Fig. 9a.As it can be observed, material is efficiently distributed in each case in order to transmit the movement from the two or three input ports into a displacement at the single output port. It can be observed how the resulting topologies are different depending on the input conditions as well as the displacements obtained at the output port.The design domain for a Multi-Output compliant mechanism is shown in Fig. 10. It is a square of size 200×200mm subdivided using 2×2mm square four node finite elements. An input load (n=1) is applied in the center of the left-hand side of the design domain to produce three output displacements (m=3) in the right-hand side of the design domain.Two different situations are considered at the input port: (a) kout,1=kout,2=kout,3=0.1, (b) kout,1=0.07, kout,2=kout,3=0.08. In all cases, the input load of Fin,1=1N, the target volume fraction V* is defined to be 0.4 and the filter radius used is rmin=4mm. Results for the two situations considered are presented in Fig. 11and the output displacements obtained for each case are given in Table 3.The design domain for a MIMO compliant mechanism is shown in Fig. 12. It is a square of size 200×200mm subdivided using 2×2mm square four node finite elements. Two input loads (n=2) are applied and two output displacements (m=2) are defined to be produced. This mechanism is a combination of two SISO compliant mechanisms: (1) A crunching mechanism, named with the subscript 1 in Fig. 12; and (2) an inverter mechanism, with the subscript 2 in Fig. 12. As Pout,1=Pin,2, the consequence is that kout,1=kin,2.An input load of Fin,i=1N is applied in each case, the stiffness requirements are defined as kin,1=0.4 and kout,1=kout,2=kin,2=0.1, the target volume fraction V* is defined to be 0.4 and the filter radius used is rmin=6mm. The optimum topology is presented in Fig. 13and the parameters and output displacements are given in Table 4.

@&#CONCLUSIONS@&#
A generalized formulation to design Multi-Input–Multi-Output compliant mechanisms is presented in this paper. This formulation meets the flexibility and stiffness requirements necessary to design compliant mechanisms that satisfy the kinematic requirements and, at the same time, withstand the applied loads in complex compliant mechanisms. Although it has not yet been analyzed mathematically, the weighted summation of single cases as the objective function of multi criteria optimization problems used in this work has also been successfully employed with a wide variety of objective functions (such as the compliance or the output displacement) and different optimization methods (such as SIMP or Level Set methods).The Sequential Element Rejection and Admission method used in this work to achieve the optimum design has demonstrated to be a robust and versatile technique to be applied to the design of compliant mechanisms with under multiple input and output conditions. The main difference of this discrete method with respect to other bi-directional methods which add and remove elements from the design domain is that ‘real’ and ‘virtual’ materials are treated separately so that the addition and removal of elements have separate criteria. The examples presented showed the versatility and robustness of the method to achieve an optimal topology of complex compliant mechanisms with multiple input and output ports.