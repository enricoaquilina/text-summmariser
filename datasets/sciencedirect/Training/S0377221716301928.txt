@&#MAIN-TITLE@&#
Strategic behavior in an observable fluid queue with an alternating service process

@&#HIGHLIGHTS@&#
Equilibrium customer strategies for the joining/balking dilemma in a fluid queue are determined.The effect of the information level on the equilibrium behavior of the customers is investigated.The discrepancy between the equilibrium and social optimal strategies is quantified via the Price of Anarchy measure.

@&#KEYPHRASES@&#
Queueing,Fluid flow models,Strategic customers,Balking,Equilibrium strategies,

@&#ABSTRACT@&#
We consider a fluid queue with two modes of service, that represents a production facility, where the processing of the customers (units) is typically carried out at a much faster time-scale than the machine-related processes. We examine the strategic behavior of the customers, regarding the joining/balking dilemma, under two levels of information upon arrival. Specifically, just after arriving and before making the decision, a customer observes the level of the fluid, but may or may not get informed about the state of the server (fast/slow). Assuming that the customers evaluate their utilities based on a natural reward/cost structure, which incorporates their desire for processing and their unwillingness to wait, we derive symmetric equilibrium strategy profiles. Moreover, we illustrate various effects of the information level on the strategic behavior of the customers. The corresponding social optimization problem is also studied and the inefficiency of the equilibrium strategies is quantified via the Price of Anarchy (PoA) measure.

@&#INTRODUCTION@&#
In several queueing systems, e.g. production lines, the customer-related processes (arrivals and services) typically evolve at a much faster time-scale than the machine-related processes (vacations, inspection times, repairs etc.). Thus, such systems are conveniently represented using fluid queues (fluid flow models). A fluid queue is an input-output system, where the customers are modeled as a continuous fluid that enters and leaves a storage space, called the buffer, according to rates that depend on some underlying stochastic process that is related to the state of the machine (on, off, under repair or preventive maintenance etc.). Fluid queues have been used quite extensively as an approximation of the standard queues with discrete units in applications such as in high-speed data networks, automated manufacturing systems, traffic/transportation networks etc. Indeed, the common characteristic of these application areas is that the customers-units are processed very fast in comparison with changes in the server(s) status.There is an extensive literature devoted to the study of fluid flow models. Several early computational approaches and results can be found in the seminal papers of Kosten (1974a, 1974b) and Kosten and Vrieze (1975). Anick, Mitra, and Sondhi (1982) introduced a benchmark model, that is now widely known as the AMS model. This is a fluid queue that represents a single buffer which receives data from several independent sources, each of which switches between on and off states according to a continuous-time Markov chain. For a smooth introduction in the area and a literature review of the classical references see Kulkarni (1997), Schwartz (1996) or Gautam (2012).The fluid queues are in some sense semi-deterministic counterparts of vacation queueing models and queueing models in random environment. Indeed, the on-off alterations of the independent sources that occur in fluid models can be seen as vacations/failures of the server, the gate-keeper or the administrator of the system. The performance evaluation of vacation queueing systems has been studied extensively (for a thorough summary see the monographs of Takagi, 1991 and Tian & Zhang, 2006).Recently there is an emerging tendency to consider queueing systems from a strategic or economic viewpoint. It is assumed that there exists a reward-cost structure for the customers of a given system, incorporating their desire for service as well as their dislike for waiting. The customers are allowed to make decisions as to whether to join or balk, buy priority or not etc. This situation can be viewed as a game among the customers. The basic problem is to find equilibrium and socially optimal strategies. These ideas go back at least to the pioneering works of Naor (1969) and Edelson and Hildebrand (1975) who studied equilibrium and socially optimal strategies for whether to join or balk in an M/M/1 queue with a simple linear reward-cost structure. Naor (1969) studied the case where each customer observes the queue length before his decision, while Edelson and Hildebrand (1975) considered the unobservable case. During the last decade, the number of results in this area has grown significantly. The monographs of Hassin and Haviv (2003), Stidham (2009) and Hassin (2016) summarize the main techniques and results in this area of queueing.The strategic customer behavior in vacation queueing systems is a quite recent endeavor. Burnetas and Economou (2007) studied the M/M/1 model with setup times under a strategic perspective. Subsequently, Economou and Kanta (2008) and Jagannathan, Menache, Modiano, and Zussman (2011) studied the strategic joining/balking behavior in the observable and unobservable models of the M/M/1 queue with an unreliable server. More recently, Guo and Hassin (2011; 2012) studied the strategic behavior of customers in an M/M/1 vacation queue with an N-policy. The study of the strategic customer behavior in vacation queues has been also extended in models with additional characteristics such as closedown times, general service or vacation times etc., see e.g. Sun, Guo, and Tian (2010), Economou, Gómez-Corral, and Kanta (2011), Li and Han (2011), Do, Tran, Nguyen, Hong, and Lee (2012), Liu, Ma, and Li (2012), Zhang, Wang, and Liu (2013) and Yang, Wang, and Zhang (2014).Although fluid queues treat situations similar to vacation queues in a semi-deterministic framework, the literature up to now has been devoted mainly on performance evaluation issues and control problems under a central planner (see e.g. Rajagopal, Kulkarni, and Stidham, 1995 for the optimal flow control problem). There are also a number of studies with strategic considerations and fluid models that concern completely different situations from vacation queues, see e.g. Maglaras (2006), Jain, Juneja, and Shimkin (2011), Juneja and Shimkin (2013) and Haviv (2013). The objective of the present paper is to extend the studies of strategic customer behavior regarding the joining/balking dilemma in the area of fluid queues. As a first step, it seems plausible to focus our study on the simplest possible fluid queue with the First-Come-First-Served (FCFS) discipline, where the system alternates between exponentially distributed fast and slow service periods.Our interest of the game-theoretic analysis of this fluid queue lies in the computation of the possible equilibrium patterns that result from the decentralized control that induce the customers. By ‘decentralized control’ we mean hereafter the customer’s (or fluid’s) point of view which is assumed to be selfish in the sense that customers make their decisions without minding about the externalities that they may impose on the rest of the society. When we refer to the society’s or system administrator’s point of view, we will use the term ‘centralized control’. More formally, in the case of decentralized control, we are interested in computing the equilibrium strategy profiles, i.e., sets of customer strategies such that no customer has a unilateral incentive to deviate from them. Of fundamental interest is also the notion of the externalities that quantifies the influence of a customer’s decision on the welfare.From the viewpoint of a social planner, the interest lies in the computation of optimal strategies that maximize the expected total benefit for the whole society per time unit. Note, however, that the equilibrium strategies are socially suboptimal in most cases. Then, the comparison of equilibrium and socially optimal strategies and the application of mechanisms that incite customers to adopt a socially optimal behavior are particularly important.The main contributions of our study can be summarized as follows:•We determine equilibrium customer strategies under two informational cases. In particular, we study the existence, the uniqueness and the structure of the equilibrium strategies in each informational case.We compute the expected social benefit per time unit under a given strategy and we consider the related optimization problems. We then compare the expected social benefits per time unit under various combinations regarding the nature of the customers (informed/partially informed and selfish/altruistic, i.e., non-cooperative/cooperative).We consider various numerical experiments and we discuss the influence of the parameters and the level of information on the strategic behavior of the customers.The main findings of our study, taking into account the theoretical results and the numerical experiments, reveal a number of qualitative properties regarding the behavior of the model. In particular we notice the following facts:1.In the fully observable (fo) case, where the customers observe both the fluid level and the mode of service (fast-1 or slow-0), there exists a practically unique equilibrium strategy (there may be more, but only one is subgame perfect equilibrium). The strategy is characterized by two thresholds, one for each server mode. More concretely, it specifies to enter if the fluid level is at most xe(i), when the service mode is i. This strategy is a dominant strategy, in the sense that it is a best response against any other strategy. The thresholds xe(0) and xe(1) do not depend on the arrival rate. This is a consequence of the FCFS discipline.In the almost observable (ao) case, where the customers observe only the fluid level upon arrival, there exists a practically unique equilibrium threshold strategy xethat prescribes to enter if the fluid level is at most xe. The threshold xedoes not depend on the exact value of the arrival rate, but only on its relative order with the service rates (smaller than the slow service rate, between the two service rates or greater that the fast service rate).The optimal expected social benefit per time unit is the same for the fo and ao cases, for every specific set of parameters of the model. Thus, if the customers are altruistic/cooperative, providing them with information about the service mode neither benefits nor harms social welfare.The equilibrium expected social benefit per time unit differs between the fo and the ao case, only when the arrival rate exceeds the fast service rate. In this case, there is a critical value λ* such that the equilibrium social welfare is greater in the fo case for arrival rates smaller than λ*, while it is greater in the ao case for arrival rates greater than λ*. Therefore, when the customers are selfish, it would be better for the administrator to reveal the mode of service for lower arrival rates and conceal it for greater arrival rates.For large arrival rates, the ordering of the equilibrium thresholds is xe(0) < xe< xe(1), while for intermediate arrival rates we havexe(0)=xe<xe(1). For low arrival rates, all customers see the system continuously empty upon arrival so they prefer to join.The Price of Anarchy (PoA), that is defined as the fraction of the optimal social welfare over the equilibrium social welfare is an increasing function of the arrival rate for both the fo and ao informational cases. The PoA function in the fo case has a finite limit as the arrival rate tends to infinity. In the ao case, the PoA stabilizes at a certain value, when the arrival rate exceeds the fast service rate. As the arrival rate tends to infinity, the limiting value of the PoA is significantly higher for the fo case than for the ao case. In other words, central coordination becomes more important for large arrival rates, when the information about the service mode is provided to the customers.The rest of the paper is organized as follows. In Section 2 we describe the dynamics of the model, the reward-cost structure and the decision framework. In Section 3 we consider the fo case and determine the equilibrium and socially optimal strategies. Subsequently, in Section 4, we consider the ao case. Finally, Section 5 contains the results of several numerical experiments and a general conclusive discussion about the relative importance of the factors that influence the strategic behavior of the customers.We consider a fluid queue that represents a production facility, that alternates between fast and slow periods, which are independent and exponentially distributed with rates q1 and q0 respectively. The state of the machine is recorded by the 2-state continuous time Markov chain {Z(t)}, where the states 1 and 0 correspond respectively to the fast and slow modes. The input rate of the fluid that represents the arrivals of new customers is λ. The output rate is μ1, when the machine is in the fast service state, and μ0 otherwise. We assume that 0 < μ0 < μ1. The caseμ0=0is qualitatively similar, but it is omitted from this presentation, as the various formulas do change and they should be evaluated by taking appropriate limits (see e.g. (3.1)). The waiting (buffer) capacity of the facility is infinite. The dynamics of the process {X(t)} that records the level of the fluid is given by(2.1)dX(t)dt={λ−μiifX(t)>0andZ(t)=i,(λ−μi)+ifX(t)=0andZ(t)=i,where(x)+=max(x,0). It is easy to see that the bivariate process {(X(t), Z(t)} is Markovian. In what follows, we will use the notational conventioni′=1−i,i=0,1. Thus, if i refers to the current state of the machine, i′ is the opposite state.The customers are strategic and decide whether to join or balk upon arrival with the objective of maximizing their expected utility. Every customer receives a reward of R units for completing service. On the other hand, he accumulates waiting cost at rate C per time unit in the system. The decisions of the customers are assumed irrevocable. In particular no retrials of balking customers nor reneging of entering customers are allowed. Since all customers are indistinguishable and each one tries to maximize his own benefit by taking into account that the other customers do the same, we can consider this situation as a symmetric game among them. We are interested in the computation of the symmetric equilibrium strategies for this game. These strategies are best responses against themselves, so no customer has an incentive to deviate from such a strategy unilaterally.The strategic behavior of the customers is influenced by the level of information that they receive upon arrival, before making their decisions. We will consider the following two cases:•The fully observable (fo) case: Customers observe (X(t), Z(t)).The almost observable (ao) case: Customers observe only X(t).There are other two interesting informational cases:•The almost unobservable (au) case: Customers observe only Z(t).The fully unobservable case (fu) case: Customers observe neither X(t) nor Z(t).The latter two cases are studied in a related paper (see Economou and Manou, 2016).Suppose that a customer arrives at the production facility and observes the state (x, i). Then, to assess its expected utility if he joins, he needs to compute his conditional expected sojourn time in the system, Si(x). Note that this conditional expected sojourn time does not depend on the strategies of the other customers, given (x, i). Indeed, future customers do not influence Si(x) because of the FCFS discipline and past customers do not influence it either, since reneging is not allowed. We can easily obtain closed formulas for Si(x). Indeed, we have the following Lemma 3.1.Lemma 3.1The conditional expected sojourn time of a customer in the system, given that the state of the server is i and the fluid level in front of him is x is given by the formula(3.1)Si(x)=q0+q1q0μ1+q1μ0x+qiμi′(μi′−μi)(q0μ1+q1μ0)2×(1−e−(q0μ0+q1μ1)x),x≥0,i=0,1.To compute Si(x), we condition on the length Tiof the remaining sojourn time of the machine at state i, which is exponentially distributed with rate qi, because of the memoryless property of the exponential distribution. Then, we obtain(3.2)Si(x)=xμie−qixμi+∫0xμi(t+Si′(x−μit))qie−qitdt.Changing the variable of the integration tou=x−μitand using integration by parts yieldsSi(x)=1qi−1qie−qiμix+qiμie−qiμix∫0xSi′(u)eqiμiudu.Multiplying byμieqiμixand differentiating with respect to x, we obtain the linear system of ODEsdSi(x)dx=−qiμiSi(x)+qiμiSi′(x)+1μi,i=0,1,with initial conditionsSi(0)=0,i=0,1. Using the standard theory for first-order linear systems of ODEs with constant coefficients (see e.g. Braun, 1983, Chapter 3), we obtain the unique solution stated in (3.1).□We can now derive the customer equilibrium strategies in the fo case. We have the following Theorem 3.1.Theorem 3.1In the fo case, the equilibrium strategies are specified by two thresholds, that is they prescribe ‘While arriving at time t, observe (X(t), Z(t)), join if X(t) < xe(Z(t)) and balk if X(t) > xe(Z(t))’. The thresholds xe(i),i=0,1are given as the unique roots of the equations(3.3)q0+q1q0μ1+q1μ0x+qiμi′(μi′−μi)(q0μ1+q1μ0)2×(1−e−(q0μ0+q1μ1)x)=RC,i=0,1,with respect to x.The expected utility of a customer that observes upon arrival the system at state(X(t),Z(t))=(x,i)and decides to join isU(fo)(x,i)=R−CSi(x). Note that this expected utility does not depend on the strategies followed by the other customers. The customer prefers strictly to join ifU(fo)(x,i)>0,prefers strictly to balk ifU(fo)(x,i)<0and he is indifferent between joining and balking ifU(fo)(x,i)=0. These conditions are equivalent respectively toSi(x)<RC,Si(x)>RCandSi(x)=RC. Differentiation of (3.1)yields(3.4)dSi(x)dx=q0+q1q0μ1+q1μ0+qiμi′(μi′−μi)(q0μ1+q1μ0)2×(q0μ0+q1μ1)e−(q0μ0+q1μ1)x,x≥0,i=0,1,(3.5)d2Si(x)dx2=−qiμi′(μi′−μi)(q0μ1+q1μ0)2(q0μ0+q1μ1)2e−(q0μ0+q1μ1)x,x≥0,i=0,1.ThereforedS0(x)dx>0,d2S1(x)dx2>0anddS1(0)dx=1μ1>0and we conclude that Si(x) is strictly increasing in [0, ∞) with image the interval [0, ∞). This shows that there exists a unique root xe(i) ofSi(x)=RCwith respect to x which is exactly Eq. (3.3). Then, a customer that finds the system at state (x, i) prefers to join for x < xe(i). He is indifferent between joining and balking ifx=xe(i). Finally, he prefers to balk for x > xe(i).□We can see that xe(0) < xe(1), that is a customer finding the system at the fast service state affords higher fluid levels in front of him under the equilibrium strategy than a customer that finds the system at the slow service state. This is intuitively clear and can be formally shown since S1(x) < S0(x), x > 0. IndeedS1(x)−S0(x)=μ0−μ1q0μ1+q1μ0(1−e−(q0μ0+q1μ1)x),x≥0.A subtle point is that an equilibrium strategy should specify necessarily joining or balking, according to whether X(t) < xe(Z(t)) or not, only for states (X(t), Z(t)) that are reachable with positive probability, given the initial state. Indeed, an equilibrium strategy can prescribe anything in states that are not reachable. For example, suppose that the system is initially empty and consider a strategy that prescribes joining, whenever (Z(t)=0and X(t) ≤ xe(0)) or (Z(t)=1and X(t) ≠ xe(1)). This is an equilibrium strategy, because what it does for states(X(t),Z(t))=(x,1)with x > xe(1) does not matter, since such states are never observed. However, we can use the notion of subgame perfect equilibrium strategy to refine the equilibrium strategies and to eliminate such ‘pathological’ cases (that occur also in the standard analysis of the M/M/1 queue – see e.g. Hassin and Haviv, 2003, Remark 2.2 in p.24, or Hassin and Haviv, 2002). Then, the subgame perfect equilibrium strategies prescribe joining when X(t) < xe(Z(t)), balking when X(t) > xe(Z(t)) and whatever forX(t)=xe(Z(t)).Moreover, we note that in a game-theoretical terminology, the equilibrium strategies in the fo case are dominant strategies. Indeed, such a strategy is a best response of a tagged customer against any strategy of the other customers. Thus, we have a very strong equilibrium concept in the fo case. This does not happen in the other informational case as we will see in the following section.We now move to the computation of the expected social benefit function per time unit, when the customers follow a threshold strategy. In the statement of Theorem 3.1, we have not explicitly stated what the customers do when they observe (X(t), Z(t)) withX(t)=xe(Z(t)). Clearly, an equilibrium strategy can prescribe anything at such a state. However, for the computation of the expected social benefit per time unit under a threshold strategy with threshold-vector (x*(0), x*(1)), it is necessary to take into account the fraction of entering customers, when the fluid level x*(i) is reached and the environment is in state i,i=0,1. Therefore, for a certain threshold strategy, we note that when the threshold has been reached, a fractionmin(1,μiλ)of the arriving customers do enter. This is the fraction of entering customers, so that the fluid level does not exceed the threshold. In other words, once the threshold has been reached, this fraction stabilizes the fluid level till the next change of the environmental state. Now, we compute the steady-state distribution of the fluid level, when the customers follow such a strategy, that is we compute the functions Fi(x) with(3.6)Fi(x)=Pr[X(t)≤x,Z(t)=i],x≥0,i=0,1,where t is an arbitrary time point, assuming that the process {(X(t), Z(t))} has achieved stationarity. This is done in Lemma 3.2. To facilitate the reader to follow the proof, we provide some graphs that show the typical sample paths of X(t) under a strategy specified by two thresholds x*(0) and x*(1). These are given in Figs. 1 and 2.Lemma 3.2Suppose that the customers follow a strategy specified by two thresholds x*(0) and x*(1), such that x*(0) ≤ x*(1). Then, we have the following cases.Case I.λ > μ1.The fluid level oscillates in [x*(0), x*(1)]. In particular(3.7)F0(x)={0ifx<x*(0)q1q0+q1·−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x−x*(0)]}−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]}ifx*(0)≤x≤x*(1)q1q0+q1ifx≥x*(1)and(3.8)F1(x)={0ifx≤x*(0)q0q0+q1·−q1μ0(1−exp{−(q1λ−μ1−q0μ0)[x−x*(0)]})−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]}ifx*(0)≤x<x*(1)q0q0+q1ifx≥x*(1).In other words, the distribution F0(x) is mixed with a point mass p0(x*(0)) at x*(0) given by(3.9)p0(x*(0))=q1q0+q1·−q1μ0+q0(λ−μ1)−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]}and probability density f0(x) in (x*(0), x*(1)) given by(3.10)f0(x)=q1q0+q1·q0(λ−μ1)(q0μ0−q1λ−μ1)exp{−(q1λ−μ1−q0μ0)[x−x*(0)]}−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]},x*(0)<x<x*(1),while F1(x) is mixed with a point mass p1(x*(1)) at x*(1) given by(3.11)p1(x*(1))=q0q0+q1·[q0(λ−μ1)−q1μ0]exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]}−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]}and probability density f1(x) in (x*(0), x*(1)) given by(3.12)f1(x)=q0q0+q1·q1μ0(q0μ0−q1λ−μ1)exp{−(q1λ−μ1−q0μ0)[x−x*(0)]}−q1μ0+q0(λ−μ1)exp{−(q1λ−μ1−q0μ0)[x*(1)−x*(0)]},x*(0)<x<x*(1).λ=μ1.The fluid level stabilizes at x*(0).μ0 < λ < μ1.The fluid level oscillates in [0, x*(0)]. In particular(3.13)F0(x)={0ifx≤0q1q0+q1·q0(λ−μ1)(1−exp{−(q1λ−μ1+q0λ−μ0)x})q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}if0≤x<x*(0)q1q0+q1ifx≥x*(0)and(3.14)F1(x)={0ifx<0q0q0+q1·q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x}q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}if0≤x≤x*(0)q0q0+q1ifx≥x*(0).In other words, both F0(x) and F1(x) are mixed. The distribution F0(x) has a point mass p0(x*(0)) at x*(0) given by(3.15)p0(x*(0))=q1q0+q1·[q1(λ−μ0)+q0(λ−μ1)]exp{−(q1λ−μ1+q0λ−μ0)x*(0)}q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}and probability density f0(x) in (0, x*(0) given by(3.16)f0(x)=q1q0+q1·q0(λ−μ1)(q1λ−μ1+q0λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x}q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)},0<x<x*(0).Regarding F1(x), we can easily see that it has a point mass p1(0) at 0 given by(3.17)p1(0)=q0q0+q1·q0(λ−μ1)+q1(λ−μ0)q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}and probability density f1(x) in (0, x*(0)) given by(3.18)f1(x)=q0q0+q1·q1(λ−μ0)(−q1λ−μ1−q0λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x}q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)},0<x<x*(0).λ ≤ μ0.The fluid level stabilizes at 0.First, note that in all cases, the fluid level enters in levels smaller than or equal to x*(1), because of the threshold strategy and the fact that x*(0) ≤ x*(1).Cases II and IV are immediate. Indeed, for case II, if the fluid starts from a level below x*(0), then during sojourn times in the fast mode it stays at the same level (sinceλ−μ1=0), while during sojourn times in the slow mode it grows linearly at rateλ−μ0,until it reaches the level x*(0). Thereafter, it stays at this level. If it starts from a level above x*(0), a similar situation occurs and the fluid reaches again eventually x*(0). Case IV is also clear, as there is a non-positive drift under the slow mode and a strictly negative drift under the fast mode, so the fluid level decreases (with some possible constant intervals) till it reaches zero.For cases I and III, let us consider a fluid queue that alternates between two environmental states−and+,with exponential sojourn times with ratesq−andq+respectively, where the fluid drift isη−<0for the environmental state−andη+>0for the environmental state+. If the fluid is constrained to oscillate in [0, T] (i.e., the fluid rates become zero when the fluid hits the boundary states 0 and T) andF−(x)(respectivelyF+(x)) denotes the limiting probability that the fluid level is smaller than or equal to x and the environment is at state−(respectively+), then we have thatF−(x)andF+(x)are differentiable in (0, T) and satisfy the linear system of ODEs(3.19)η−dF−(x)dx=−q−F−(x)+q+F+(x),(3.20)η+dF+(x)dx=q−F−(x)−q+F+(x),with boundary conditions(3.21)F−(T)=q+q−+q+,F+(0)=0(see e.g. Kulkarni, 1997). Using the standard theory for first-order linear systems of ODEs with constant coefficients and computing the constants by the boundary conditions (see e.g. Braun, 1983, Chapter 3), we have that this system has a unique solution which is given by the relations(3.22)F−(x)={0ifx<0q+q−+q+·q+η−+q−η+exp{−(q−η−+q+η+)x}q+η−+q−η+exp{−(q−η−+q+η+)T}if0≤x≤Tq+q−+q+ifx≥Tand(3.23)F+(x)={0ifx≤0q−q−+q+·q+η−(1−exp{−(q−η−+q+η+)x})q+η−+q−η+exp{−(q−η−+q+η+)T}if0≤x<Tq−q−+q+ifx≥T.For case I, a moment of reflection shows that the fluid oscillates in [x*(0), x*(1)] with negative drift−μ0when the machine is in the slow mode and positive driftλ−μ1when the machine is in the fast mode. We can then use the formulas (3.22) and (3.23), substitutingx−x*(0)for x and settingq−=q0,q+=q1,η−=−μ0andη+=λ−μ1. This yields (3.7) and (3.8).Similarly, in case III, the fluid is easily seen to oscillate in [0, x*(0)] and we use formulas (3.22) and (3.23) withq−=q1,q+=q0,η−=λ−μ1andη+=λ−μ0to obtain (3.13) and (3.14).□We are now ready to compute the function of the expected social benefit per time unit,B(fo)(x*(0),x*(1)),when the customers follow a threshold strategy with thresholds x*(0) and x*(1). We have Theorem 3.2.Theorem 3.2Suppose that the customers follow a strategy specified by two thresholds x*(0) and x*(1), such that x*(0) ≤ x*(1). Then, we have the following cases.Case I.λ > μ1.The expected social benefit per time unit is given by(3.24)B(fo)(x*(0),x*(1))=(q1q0+q1μ0+q0q0+q1μ1)×R−CE[X],where(3.25)E[X]=x*(0)p0(x*(0))+∫x*(0)x*(1)x(f0(x)+f1(x))dx+x*(1)p1(x*(1))with p0(x*(0)), f0(x), p1(x*(1)) and f1(x) given by(3.9)–(3.12).λ=μ1.The expected social benefit per time unit is given by(3.26)B(fo)(x*(0),x*(1))=λ(q1q0+q1·μ0λ+q0q0+q1)×R−Cx*(0).μ0 < λ < μ1.The expected social benefit per time unit is given by(3.27)B(fo)(x*(0),x*(1))=λ(∫0x*(0)f0(x)dx+p0(x*(0))μ0λ+q0q0+q1)×R−CE[X],where(3.28)E[X]=x*(0)p0(x*(0))+∫0x*(0)x(f0(x)+f1(x))dxwith p0(x*(0)), f0(x) and f1(x) given by(3.15),(3.16)and(3.18), respectively.λ ≤ μ0.The expected social benefit per time unit is given by(3.29)B(fo)(x*(0),x*(1))=λR.In all cases, the expected social benefit per time unit is given as(3.30)B(fo)(x*(0),x*(1))=λeffR−CE[X],where λeffis the effective fluid arrival rate, which counts the arrivals of customers that do enter in the system and E[X] is the expected stationary fluid level. In case I, the fluid fluctuates in [x*(0), x*(1)]. Moreover, the fluid once at level x*(0) during an environmental sojourn time at the slow mode, it stays there till the next environmental change. Therefore, a fractionμ0λof the customers that find the system at the slow mode and the fluid at level x*(0) do enter in the system, in order to ensure that the net fluid change rate is 0. On the other hand, customers that find the system at the slow mode but the fluid level strictly above x*(0) do not enter. Similarly, all customers that find the system at the fast mode and the fluid level strictly below x*(1) do enter, whereas only a fractionμ1λof the customers that find the system at the fast mode and the fluid at level x*(1) enter in the system. Thus, the effective arrival rate in case I is(3.31)λeff=λ(p0(x*(0))μ0λ+∫x*(0)x*(1)f1(x)dx+p1(x*(1))μ1λ).The expected stationary fluid level E[X] is computed by (3.25), as the distribution of the fluid level has point masses p0(x*(0)) and p1(x*(1)) at x*(0) and x*(1), given by (3.9) and (3.11), and probability density functionf0(x)+f1(x)with f0(x) and f1(x) given by (3.10) and (3.12). Substitution of (3.31) and (3.25) in (3.30) yields after some straightforward algebra (3.24). Another, more intuitive, way to justify (3.24) is to observe that in case I the server is continuously busy, so the effective arrival rate is equal to the mean service rate, which isq1q0+q1μ0+q0q0+q1μ1.In case II, the fluid level stabilizes at x*(0) soE[X]=x*(0)and all customers see upon arrival this state. Therefore, all customers that find the machine at the fast mode enter, while only a fractionμ0λof those that find the machine at the slow mode do enter. Hence the effective arrival rate is now(3.32)λeff=λ(q1q0+q1·μ0λ+q0q0+q1)and we obtain readily (3.26).Case III is proved similarly to case I, so we omit the details. Finally, in case IV, all customers enter and are served immediately without delay. Henceλeff=λandE[X]=0, so we obtain (3.29).□The formulas for the expected social benefit per time unit in Theorem 3.2 can be further reduced in more explicit expressions, as the relevant integrals are computable in closed form (indeed, a moment of reflection shows that only exponential functions are involved). Nevertheless, the formulas are too complicate and there is no need to be reported. Due to this complexity, the socially optimal strategies cannot be computed in closed form in all cases. More concretely, in cases I, II and IV, it is easy to determine the socially optimal strategies. However, in case III, an explicit solution is not possible, so we have performed several numerical experiments and we present the main results.In cases I and II, the effective arrival rate is independent of the strategy (x*(0), x*(1)) and equals the mean service rateμ¯=q1q0+q1μ0+q0q0+q1μ1,i.e.,(3.33)λeff=μ¯.Indeed, in these two cases, we have that λ ≥ max (μ0, μ1) and consequently the server uses his maximum service capacity at both environmental states. So, a strategy is socially optimal, if it minimizes the expected fluid level. Thus, in case I, the unique socially optimal strategy is the threshold strategy with threshold-vector (0, 0), whereas, in case II, every threshold strategy with threshold-vector (0, x), x ≥ 0, is socially optimal.In case IV, the arrival rate λ is so small that the buffer remains empty under any strategy. Therefore, the strategy is not relevant for the fluid level. So, the socially optimal behavior is always to join as a joining customer receives the reward from service and has no waiting cost.In case III, the expected social benefit per time unit under a threshold strategy (x*(0), x*(1)), with x*(0) ≤ x*(1), depends only on the threshold x*(0). So, we can writeB(fo)(x*(0))instead ofB(fo)(x*(0),x*(1))for this case. As the threshold x*(0) increases, we have a socially favorable effect, the increase of the effective arrival rate, and a socially unfavorable one, the increase of the expected fluid level. The effective arrival rate is given as(3.34)λeff=λ(∫0x*(0)f0(x)dx+p0(x*(0))μ0λ+q0q0+q1)=q0(λ−μ1)+q1(λ−μ0)(q1μ0q0+q1+q0μ1q0+q1)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}which can be seen to be an increasing and concave function in x*(0). Moreover,(3.35)limx*(0)→∞λeff=λ.The expected fluid level can be computed by evaluating the integrals in (3.28). After some straightforward algebraic manipulations, it yields(3.36)E[X]=q1(q0+q1)(λ−μ0)x*(0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}(q0+q1)[q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}]+q0q1(μ1−μ0)[exp{−(q1λ−μ1+q0λ−μ0)x*(0)}−1](q0+q1)(q1λ−μ1+q0λ−μ0)[q0(λ−μ1)+q1(λ−μ0)exp{−(q1λ−μ1+q0λ−μ0)x*(0)}].The expected fluid is also an increasing function in x*(0) but the limit as x*(0) → ∞ depends on the relative order of the arrival rate λ and the mean service rateμ¯when all customers join. In particular, taking x*(0) → ∞ yields(3.37)limx*(0)→∞E[X]={q1(μ1−μ0)(λ−μ0)(q0+q1)[q1(μ0−λ)+q0(μ1−λ)]ifq1q0+q1μ0+q0q0+q1μ1>λ,∞ifq1q0+q1μ0+q0q0+q1μ1≤λ.Indeed, if the mean service rateμ¯exceeds the arrival rate λ, we see that the mean driftλ−μ¯of the fluid process is negative and therefore the expected fluid level should tend to a finite number, as x*(0) → ∞. On the other hand, if the mean service rate is smaller than or equal to the arrival rate λ, the fluid increases beyond any finite number in the long run. From the above discussion, we realize that the behavior of the functionB(fo)(x*(0))as x*(0) increases depends on the trade-off between the increase of the effective arrival rate and the increase of the expected fluid level.In Figs. 3–5, we present the three typical cases for the behavior of the expected social benefit functionB(fo)(x*(0))with respect to x*(0). We have considered a basic scenario with ratesq0=2,q1=1,μ0=1,μ1=5,R=10andC=1. The arrival rate λ varies and takes the values 2, 3.4 and 4 for Figs. 3–5, respectively.In Fig. 3, the arrival rate is small enough so that the mean drift is negative. The expected social benefit is an increasing function of the threshold x*(0) and tends to 19.7333 (taking into account (3.35) and (3.37)). The socially optimal strategy in this case corresponds tox*(0)=∞,i.e., it is the ‘always join’ strategy. This case (increasing expected social benefit) occurs generally when the arrival rate λ is low, close to the slow service rate μ0. Then, as x*(0) increases, the positive effect on the effective arrival rate dominates the negative effect on the expected fluid level.In Fig. 4, the arrival rate is a bit larger, but still the mean drift is negative. In this case the expected social benefit is a unimodal function of the threshold x*(0) that stabilizes as x*(0) → ∞. In particular, we see that the expected social benefit is increasing in x*(0), for x*(0) ∈ [0, 4.8], and decreasing in x*(0), for x*(0) ∈ [4.8, ∞). As x*(0) → ∞, we have thatB(fo)(x*(0))→30. So, every threshold strategy with threshold-vector (x*(0), x*(1)), wherex*(0)=4.8and x*(1) ≥ x*(0) is socially optimal. In general, this is the typical case (unimodal expected social benefit with finite limit) for intermediate values of λ, i.e., when the drift is negative, but λ is not very close to μ0.Finally, in Fig. 5, the arrival rate is higher and the mean drift becomes positive so that the expected fluid level tends to infinity as x*(0) tends to infinity. The expected social benefit is increasing in x*(0), for x*(0) ∈ [0, 2.4], and decreasing in x*(0), for x*(0) ≥ 2.4. So, every threshold strategy with threshold-vector (x*(0), x*(1)), wherex*(0)=2.4and x*(1) ≥ x*(0) is socially optimal. This typical case (unimodal expected social benefit with infinite limit) occurs when the arrival rate is so large that the drift is non-negative.In this section, we identify the equilibrium customer strategies regarding the joining/balking dilemma, when the customers observe only the level of the fluid before making their decisions. We limit ourselves to the class of threshold strategies, where customers decide to join if they find the fluid at levels below some threshold x*, while they decide to balk if the fluid level exceeds x*. As in the fo case (see the relevant discussion just before Lemma 3.2), we need to specify the fraction of entering customers when the fluid level reaches the threshold x*. Again, when the threshold has been reached, then the maximum fraction of customers is entered so that the fluid level does not exceed the threshold. To assess the best response of a tagged customer, given that the others follow a given threshold strategy with threshold x*, we need to compute the steady-state distribution of the fluid level, that is the distribution functions Fi(x) defined in (3.6). This can be done using Lemma 3.2 forx*(0)=x*(1)=x*. Then, we can obtain the conditional expected sojourn time of a customer in the system, given that the fluid level he finds upon arrival is x and the others follow a threshold strategy x*. This is done in Lemma 4.1.Lemma 4.1Let S(ao)(x; x*) denote the conditional expected sojourn time of a customer in the system, given that the fluid level is x and the other customers follow a threshold strategy x*.Case I.λ ≥ μ1.(4.1)S(ao)(x*;x*)=q0+q1q0μ1+q1μ0x*+q0q1(μ1−μ0)2(q0+q1)(q0μ1+q1μ0)2(1−e−(q0μ0+q1μ1)x*).μ0 < λ < μ1.(4.2)S(ao)(x;x*)={0x=0q0+q1q0μ1+q1μ0x−q1μ0(λ−μ0)+q0μ1(λ−μ1)(q0μ1+q1μ0)2(1−e−(q0μ0+q1μ1)x)0<x<x*q0+q1q0μ1+q1μ0x*−q0μ1(μ0−μ1)(q0μ1+q1μ0)2(1−e−(q0μ0+q1μ1)x*)x=x*.λ ≤ μ0.(4.3)S(ao)(0;x*)=0.By conditioning on the (unobservable) state of the machine at the arrival time of a tagged customer, we have that(4.4)S(ao)(x;x*)=πZ|X(0|x;x*)S0(x)+πZ|X(1|x;x*)S1(x),x≥0,where πZ|X(i|x; x*) is the probability that the tagged customer finds the machine at mode i, given that he observes fluid level x and the other customers follow the threshold strategy x*.In case I (which corresponds to cases I and II of Lemma 3.2), the fluid level stabilizes at x*. Therefore, all customers observe this level upon arrival, so the observation is uninformative. So, in case I, we haveπZ|X(0|x;x*)=q1q0+q1andπZ|X(1|x;x*)=q0q0+q1. Using (4.4) and (3.1) we obtain easily (4.1).In case II (which corresponds to case III of Lemma 3.2), the fluid level oscillates in [0, x*]. For x* > 0, recall that the distributions F0(x) and F1(x) are given by (3.13) and (3.14), withx*(0)=x*. Since F1(x) has a point mass at 0, while F0(x) has not, we conclude thatπZ|X(0|0;x*)=0. Similarly, since F0(x) has a point mass at x*, while F1(x) has not, we conclude thatπZ|X(0|x*;x*)=1. Finally, for x ∈ (0, x*), we have thatπZ|X(0|x;x*)=f0(x)f0(x)+f1(x),with f0(x) and f1(x) given by (3.16) and (3.18) respectively, withx*(0)=x*. This yields, after a few simplifications,πZ|X(0|x;x*)=μ1−λμ1−μ0,0 < x < x*. Thus, in a nutshell,(4.5)πZ|X(0|x;x*)={0x=0μ1−λμ1−μ00<x<x*1x=x*,πZ|X(1|x;x*)={1x=0λ−μ0μ1−μ00<x<x*0x=x*.Using (4.5), (4.4) and (3.1), we obtain easily (4.2), whenever x* > 0. Forx*=0,all customers observe fluid level equal to 0 upon arrival, soS(ao)(0;x*)=0and we can see that (4.2) remains valid. The same argument yields also (4.3), in case III.□We can now identify all equilibrium threshold strategies in the ao case. We have Theorem 4.1.Theorem 4.1In the ao case, we have the following cases for the existence of equilibrium threshold strategies that prescribe ‘While arriving at time t, observe X(t), join if X(t) < xe and balk if X(t) > xe’.Case I.λ ≥ μ1.There exists a unique equilibrium threshold strategy with threshold xe which is the unique root of the equation(4.6)q0+q1q0μ1+q1μ0x+q0q1(μ1−μ0)2(q0+q1)(q0μ1+q1μ0)2×(1−e−(q0μ0+q1μ1)x)=RCwith respect to x.μ0 < λ < μ1.There exists a unique equilibrium threshold strategy with thresholdxe′which is the unique root of the equation(4.7)q0+q1q0μ1+q1μ0x+q0μ1(μ1−μ0)(q0μ1+q1μ0)2×(1−e−(q0μ0+q1μ1)x)=RCwith respect to x.λ ≤ μ0.All threshold strategies are equilibrium strategies.Suppose that the customers follow a threshold strategy x*. The expected utility of a tagged customer that observes upon arrival the fluid at levelX(t)=xand decides to join isU(ao)(x;x*)=R−CS(ao)(x;x*).In case I, because the fluid level stabilizes at x*, the tagged customer will see necessarily this level and so his conditional expected sojourn time in the system is given by (4.1). The threshold strategy x* is a best response against itself, whenU(ao)(x*;x*)=0. Therefore, x* is a root of (4.6). Note that the left side of (4.6) is monotone in x, since it is equal toq1q0+q1S0(x)+q0q0+q1S1(x)and both S0(x) and S1(x) are monotone, as we have established in the proof of Theorem 3.1. Therefore, (4.6) has a unique root that gives the unique equilibrium threshold strategy in this case.In case II, a threshold strategy x* is a best response against itself, if and only ifU(ao)(x;x*)≥0,for 0 ≤ x < x*, andU(ao)(x*;x*)=0. These conditions are seen to be equivalent to(4.8)q0+q1q0μ1+q1μ0x−q1μ0(λ−μ0)+q0μ1(λ−μ1)(q0μ1+q1μ0)2×(1−e−(q0μ0+q1μ1)x)≤RC,0≤x<x*(4.9)q0+q1q0μ1+q1μ0x*−q0μ1(μ0−μ1)(q0μ1+q1μ0)2(1−e−(q0μ0+q1μ1)x*)=RC.Due to the monotonicity of the left side of (4.8) with respect to x (which is equal toμ1−λμ1−μ0S0(x)+λ−μ0μ1−μ0S1(x)) and the fact that the left side of (4.9) (which is equal to S0(x*)) exceeds the left side of (4.8) forx=x*,we can easily conclude that the relations are valid if and only if x* is the unique solutionxe′of Eq. (4.7).In case III, any threshold strategy is a best response against itself. Indeed, whatever threshold the other customers may follow, a tagged customer may use the same threshold, since he always observes the fluid at state 0 and he is willing to enter sinceU(ao)(0;x*)=R−CS(ao)(0;x*)=R>0.□It is interesting to notice that the equilibrium threshold does not depend on the exact value of the arrival rate λ (since the corresponding equations do not involve λ), but only on its relative order with respect to the service rates μ0 and μ1. We can now compute the function of the expected social benefit per time unit,B(ao)(x*),when the customers follow a threshold strategy x*, using Theorem 3.2 and settingB(ao)(x*)=B(fo)(x*,x*). We have Theorem 4.2.Theorem 4.2In the ao case, suppose that the customers follow a threshold strategy x*. Then, we have the following cases.Case I.λ ≥ μ1.The expected social benefit per time unit is given by(4.10)B(ao)(x*)=(q1q0+q1μ0+q0q0+q1μ1)R−Cx*.μ0 < λ < μ1.The expected social benefit per time unit is given by(4.11)B(ao)(x*)=λ(∫0x*f0(x)dx+p0(x*)μ0λ+q0q0+q1)×R−CE[X],where(4.12)E[X]=x*p0(x*)+∫0x*x(f0(x)+f1(x))dxwith p0(x*), f0(x) and f1(x) given by(3.15),(3.16)and(3.18), respectively.λ ≤ μ0.The expected social benefit per time unit is given by(4.13)B(ao)(x*)=λR.A moment of reflection shows that, in case I, the unique socially optimal strategy is the threshold strategy 0. In case II, a threshold strategy x* is socially optimal in the ao case if and only if the threshold strategies(x*,x*′),withx*′≥x*,are socially optimal in the fo case. Finally, in case III, any threshold strategy x* is socially optimal as the buffer is always empty. Thus, in all cases, we have thatmax(x*(0),x*(1))B(fo)(x*(0),x*(1))=maxx*B(ao)(x*),i.e., the optimal expected social benefit in the fo case coincides with the optimal expected social benefit in the ao case.In this paper we studied the fo and the ao cases of the fluid queue with alternating service process. We aimed at determining the equilibrium and the socially optimal strategies within appropriate sets of strategies for each level of information. We have the following results in the three cases regarding the relative order of the arrival rate λ with respect to the service rates μ0 and μ1.Case I:λ ≥ μ1.In this case that corresponds to case I and II – fo and case I – ao, we proved that the unique equilibrium threshold strategy, in the fo case, is the (xe(0), xe(1)) strategy, where xe(i) is the unique root of Eq. (3.3),i=0,1. In the ao case, the unique equilibrium threshold strategy is the xestrategy, where xeis the unique root of Eq. (4.6). We have that xe(0) < xe< xe(1).The socially optimal strategy, in the fo case, is the threshold strategy (0, 0) and, in the ao case, is the threshold strategy 0. Moreover, the effective arrival rate under any threshold strategy is equal to the mean service rate, as the server is never idle. Thus, the effective arrival rate under any threshold strategy in the fo and ao cases equalsq1q0+q1μ0+q0q0+q1μ1. So, the fraction of customers that join under the equilibrium strategies is equal to the fraction of customers that join under the socially optimal strategies. Nevertheless, under equilibrium strategies the customers keep the fluid at high levels, whereas, under socially optimal strategies the buffer is always empty. This happens because, in the decentralized version, the arriving customers ignore the waiting cost they impose to future customers by joining and tend to join even if the fluid is at high levels. On the other hand, in the centralized version, the central planner takes into account these negative externalities and keeps the fluid level at 0.μ0 < λ < μ1.In this case that corresponds to case III – fo and case II – ao, formulas (3.13) and (3.14) show that under any threshold strategy (x*(0), x*(1)), with x*(1) ≥ x*(0), the fluid oscillates in [0, x*(0)] and the steady-state distribution of the fluid level is the same as under the threshold strategy (x*(0), x*(0)) and the threshold strategy x*(0).In the fo case, the unique subgame perfect equilibrium is the threshold strategy (xe(0), xe(1)), where xe(i) is the unique root of Eq. (3.3),i=0,1. However, any threshold strategy (xe(0), x), with x ≥ xe(0), is equilibrium as the customers will never find the fluid level strictly above xe(0). In the ao case, the unique equilibrium threshold strategy is thexe′strategy, wherexe′is the unique root of Eq. (4.7). So,xe′=xe(0). Thus, the equilibrium strategyxe′in the ao case yields the equilibrium strategies(xe′,x)for everyx≥xe′in the fo case and the expected social benefit under the equilibrium strategies in both cases is the same. So,B(fo)(xe′,x)=B(ao)(xe′),forx≥xe′. Thus, in the decentralized version of the model, given that the fluid level is known, the customers do not benefit nor lose by knowing also the state of the server.The situation is similar in the centralized version, where, if the threshold strategy x* is socially optimal in the ao case, any threshold strategy (x*, x), with x ≥ x*, is socially optimal in the fo case and the expected social benefit under these socially optimal strategies is the same.λ ≤ μ0.In this case that corresponds to case IV - fo and case III - ao, the fluid level stabilizes at 0. Thus, any threshold strategy is equilibrium and socially optimal strategy in the fo case. Also, any threshold strategy is equilibrium and socially optimal strategy in the ao case. The expected social benefit under all these strategies is λR. So, as in the previous case, given that the fluid level is known, the knowledge of the state of the server does not change the benefit in the decentralized and the centralized versions.We would also like to compare the effect of information on the expected social benefit when the customers decide selfishly and when they make their decisions so that they maximize the expected social benefit. From the above, it is obvious that the optimal expected social benefits in the fo and ao cases do coincide. So, if the customers are altruistic/cooperative and want to maximize the expected social benefit, they are indifferent between the two levels of information. Also, the expected social benefit under any equilibrium threshold strategy in the fo case is equal to the expected social benefit under any equilibrium threshold strategy in the ao case except for the case where λ ≥ μ1. In Fig. 6, we present the expected social benefit in equilibrium in the fo case,B(fo)(xe(0),xe(1)),and the expected social benefit in equilibrium in the ao case,B(ao)(xe),in an example withq0=3,q1=2,μ0=2,μ1=5,R=5,C=1and λ ∈ [5, 10]. We observe thatB(ao)(xe)is a constant function of λ. This is clear because of (4.10) and the fact that xedoes not depend on λ (see relevant comment just after the proof of Theorem 4.1). On the other hand,B(fo)(xe(0),xe(1))is a decreasing function of λ, so there exists a critical value λ*, which is equal to 6.8 in the present example, such thatB(fo)(xe(0),xe(1))≥B(ao)(xe),for λ ≤ λ*, whileB(fo)(xe(0),xe(1))≤B(ao)(xe),for λ ≥ λ*. Thus, it is better to reveal the service mode to selfish customers for values of λ ∈ (μ1, λ*), while it is better to conceal it for λ ∈ (λ*, ∞).Finally, we study the Price of Anarchy (PoA). In the current context, for the fo case, the PoA is defined as the ratio of the optimal expected social benefit per time unit over the corresponding equilibrium expected social benefit per time unit, i.e.,PoA(fo)=B(fo)(xsoc(0),xsoc(1))B(fo)(xe(0),xe(1)),where xe(i) and xsoc(i) denote the equilibrium and socially optimal thresholds respectively. Similarly, in the ao case, we definePoA(ao)=B(ao)(xsoc)B(ao)(xe),where xeand xsocdenote the equilibrium and socially optimal thresholds, respectively.In the fo case, when the arrival rate is small (up to a bit higher than μ0), the PoA is equal to 1, as the optimal expected social benefit is equal to the equilibrium expected social benefit. As the arrival rate increases, the PoA increases and as λ tends to infinity, the limit of the PoA is(5.1)limλ→∞PoA(fo)=R(q1q0+q1μ0+q0q0+q1μ1)R(q1q0+q1μ0+q0q0+q1μ1)−C[(q0+q1)q0xe(1)−q1μ0]exp{q0μ0(xe(1)−xe(0))}+q1μ0(q0+q1)q0exp{q0μ0(xe(1)−xe(0))},where xe(i) is the unique root of Eq. (3.3),i=0,1. So, the PoA in the fo case is bounded. In Fig. 7, we consider the PoA with respect to λ in an example withq0=1,q1=3,μ0=2,μ1=4,R=5andC=1. In this example, we have thatlimλ→∞PoA(fo)=393.0964.In the ao case, the PoA is equal to 1, for small arrival rates, and, when the arrival rate is greater than μ1, the PoA becomes constant. We have that(5.2)limλ→∞PoA(ao)=R(q1q0+q1μ0+q0q0+q1μ1)R(q1q0+q1μ0+q0q0+q1μ1)−Cxe,where xeis the unique root of Eq. (4.6). In Fig. 8, we have the PoA with respect to λ in an example withq0=1,q1=3,μ0=2,μ1=4,R=5andC=1.As a conclusion, the graphs of the PoA as a function of the arrival rate λ coincide for the two informational cases, for values of λ smaller than the fast service rate μ1. Both graphs start from the value 1 and keep this value till a bit higher than the low service rate (which isμ0=2in the considered scenario). Then, they continue almost linearly till the high service rate (which isμ1=4in the considered scenario). But after this point, in the fo case the PoA increases in a continuous way and approaches its limit given by (5.1), while in the ao case, it has a discontinuity at μ1 and becomes constant after that point, assuming the value given by (5.2). The limiting value of the PoA for the fo case exceeds considerably the corresponding value for the ao case. Therefore, we conclude that for low arrival rates the socially optimal and the equilibrium thresholds do coincide, while this is not the case for higher arrival rates.We close our discussion by refering to two directions that may lead to interesting generalizations of the results. Both of them were suggested by an anonymous referee. The first idea is to generalize the analysis in the case of more complex but yet natural utility functions for the customers. In the present paper, the utility function of the customers has the formU(x,i)=R−CSi(x)=R−CE(x,i)[S],where S denotes a sojourn time of a customer in the system and the subscript (x, i) refers to the state seen upon arrival. An interesting option would be to consider a utility function that involves the variance, i.e.,U(x,i)=R−C(E(x,i)[S]+αVar(x,i)[S]). With such a utility function, a customer may be tempted to balk, if there is a lot of variability in the sojourn time. However, the computations become much more involved. For example, we have thatVar(x,i)[S]=E(x,i)[S2]−(E(x,i)[S])2and to compute E(x, i)[S2], we can condition similarly to (3.2) and we will have thatE(x,i)[S2]=(xμi)2e−qixμi+∫0xμi(t2+2tE(x−μit,i′)[S]+E(x−μit,i′)[S2])qie−qitdt.These equations can be solved similarly with the methodology of Lemma 3.1. However, the corresponding formulas are too involved and do not allow to continue analytically. Considering an exponential utility function of the formU(x,i)=R−CE(x,i)[eαS](as it is common in finance/insurance models) leads also to computationally intractable expressions. Yet, a numerical investigation of the present model with such utility functions seems interesting from an economic viewpoint.Another interesting direction of generalizing the model is to consider the case where the machine mode process {Z(t)} has more than two states. The generalization is not easy since the sample paths of the fluid level assume very different forms because of the various machine modes and the associated thresholds. Finally, it would be interesting to study a diffusion counterpart of the process {X(t)}, i.e., a Brownian motion with drift, also modulated by a machine mode process {Z(t)}. This could have an influence in computing the corresponding expected social benefit in both the fo and ao cases and their numerical optimization.

@&#CONCLUSIONS@&#
