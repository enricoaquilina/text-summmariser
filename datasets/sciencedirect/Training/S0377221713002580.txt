@&#MAIN-TITLE@&#
Strategic joining in M/M/1 retrial queues

@&#HIGHLIGHTS@&#
Study the equilibrium strategic behavior and social optimization in the M/M/1 retrial queues.Two different levels of information provided to arriving customers have been investigated extensively.Nash equilibrium and the equilibrium social benefit for all customers are derived.The effect of the information levels is illustrated by extensive numerical examples.It provides insight into the optimal design and control of the retrial queueing systems.

@&#KEYPHRASES@&#
Queueing,M/M/1 queue,Balking,Equilibrium strategies,Threshold strategies,Retrials,

@&#ABSTRACT@&#
The equilibrium and socially optimal balking strategies are investigated for unobservable and observable single-server classical retrial queues. There is no waiting space in front of the server. If an arriving customer finds the server idle, he occupies the server immediately and leaves the system after service. Otherwise, if the server is found busy, the customer decides whether or not to enter a retrial pool with infinite capacity and becomes a repeated customer, based on observation of the system and the reward–cost structure imposed on the system. Accordingly, two cases with respect to different levels of information are studied and the corresponding Nash equilibrium and social optimization balking strategies for all customers are derived. Finally, we compare the equilibrium and optimal behavior regarding these two information levels through numerical examples.

@&#INTRODUCTION@&#
Queueing systems in which arriving customers who find the server occupied may retry for service after a period of time are called retrial queues or queues with repeated orders. The retrial queueing system has been studied extensively due to its wide application. Apart from theoretical interests, it has been successfully applied to telephone switching systems, telecommunication networks and computer networks. The literature on retrial queueing systems is already very extensive, see Artalejo (1995), Artalejo and Gómez-Corral (1997, 1998), and Falin (2008). Interested readers are referred to Falin and Templeton (1997) and Artalejo and Gómez-Corral (2008) for extensive surveys on retrial queues.During the last decades, considerable attentions have been devoted to the study of observable queueing systems which are concerned with customers’ decentralized behavior and socially optimal strategies. Some reward–cost structures are imposed on the system to reflect the customers’ desires for service and their unwillingness to wait. Customers are allowed to make decisions about their actions in the system. They want to maximize their benefits against the other customers who have the same objective, therefore the situation can be studied as a game among the customers. Such an economic analysis of queueing systems was pioneered by Naor (1969) with a single-server system with an observable queue, i.e., an arriving customer observes the number of customers and then makes his decision whether to join or balk. Edelson and Hildebrand (1975) considered the same queueing system with the assumptions that the customers make their decisions without being informed about the state of the system. Until now, there is a growing number of papers that deal with the economic analysis of the balking behavior of customers in variants of the M/M/1 queue, see Boudali and Economou (2012, 2007), Economou and Kanta (2008a,b), Economou and Manou (2012), Guo and Hassin (2011, 2012), Wang and Zhang (2011), among others. The monographs of Hassin and Haviv (2003) and Stidham (2009) summarized the main approaches and results from an economic viewpoint.The majority of articles studied the economic analysis of the FCFS queues, in which a new customer is placed at the end of the queue, and therefore imposes no negative externalities on customers already in the system. However, when the service discipline in an observable queue is not FCFS, the decision of whether or not to join depends not only on the state of the queue but also on the strategy adopted by future arrivals. Hassin and Haviv (1997) dealt with the economic analysis of a queueing model with priorities in which two priority levels can be purchased and they obtained all of the Nash equilibrium strategies (pure or mixed) of the threshold type. Altman and Shimkin (1998) considered a system of observable egalitarian processor sharing (EPS) where customers decide whether to join the queue after observing the number of customers already there. They showed how to compute the unique (pure or mixed) Nash equilibrium point. Other related studies on the strategic behavior of customers in non-FCFS queueing systems include Adiri and Yechiali (1974), Tilt and Balachandran (1979), Hassin (1985), and Hassin and Haviv (2002).In the retrial queueing system, every customer in the retrial pool repeats his demand until he receives his requested service. Therefore, the service discipline is not FCFS. The customers in the retrial pool are affected by the strategies adopted by future customers. There are some papers in the literature considered the strategic behavior of customers in queueing systems with retrials. But balking is forbidden. Kulkarni (1983a,b) investigated a sing-server queueing system with two types of customers conducting retrials in which noncooperative and cooperative strategies were studied. Elcan (1994) derived socially optimal and equilibrium retrial rates for the case of single-server Markovian retrial queue with the classical retrial policy. Later, Hassin and Haviv (1996) extended the analysis in the case of general service times. Recently, Zhang et al. (2012) studied a single-server retrial queue with two types of customers in which the server is subject to vacations along with breakdowns and repairs. They discussed and compared the optimal and equilibrium retrial rates regarding the situations in which the customers are cooperative or noncooperative, respectively.However, there are almost no articles dealing with equilibrium and socially optimal strategies in the retrial queue in which balking is allowed to the arriving customers. We aware of one exception. Economou and Kanta (2011) studied the retrial systems with the constant retrial policy and dealt with the equilibrium customer strategies and the social and profit maximization problems. But in their model, the customers in the retrial pool are served with FCFS discipline and the retrial rate is a constant.In this paper, we first study customer equilibrium and socially optimal balking behavior in a classical retrial queue, where a customer arriving when the server accessible for him is busy leaves the service area but after some time repeats his demand. The paper assumes an exogenous retrial rate and the only decision is whether or not to join. Two cases will be distinguished with respect to the levels of information available to customers upon their arrivals, just before their decisions are made. Namely, (1) Unobservable case: Customers are informed only about the state of the server. (2) Observable case: Customers are informed the state of the server as well as the queue length in the retrial pool. We will give an extensive study of the corresponding Nash equilibrium and the socially optimal strategies for all customers in both cases. Finally, the effects of the main parameters on the equilibrium and optimal behavior of the customers, and the comparisons between the equilibrium and optimal strategies will be illustrated through numerical comparisons.An example in practice of our model may be illustrated by the rational abandonment and decision making of customers in the call centers. In such service systems, modern call-center software system can provide a customer more or less information about the system upon arrival. A coming customer call will be served immediately if a server is available. If all servers are found busy, the customer will be put on hold, and may be asked to wait until a server becomes available. In some scenarios, the call center may choose to announce an expected waiting time to the customer at this point, while in some other situations the call center may provide no information. Customers have to make their decisions based on the possible information and estimate the economics of the decisions, taking the benefits associated with service completion and direct payments along with indirect costs associated with delays and retrials into account. To explore such information and its interpretation by customers, it is important to understand the impacts on system performance of different levels of information. For more details on the modeling and analysis of call centers with retrials and anticipated delays, we refer the reader to Aguir et al. (2004) and Whitt (1999), and references therein.This paper is organized as follows. In the next section, we describe the dynamics of the model and the reward–cost structure. In Section 3, we determine Nash equilibrium and social maximizing strategies for joining the retrial pool in the unobservable case. In Section 4, we treat the corresponding observable case. In Section 5, some numerical examples are given. Finally, Section 6 provides the conclusions.We consider a single server retrial queueing system in which primary customers arrive according to a Poisson process with rate λ. We assume that there is no waiting space, and if an arriving customer finds the server free, he immediately occupies the server and leaves the system after service completion. Otherwise, if the server is found busy, the customer goes into a retrial pool with infinite capacity and becomes a repeated customer. Each repeated customer repeats his demand after an exponential amount of time with rate θ, independently of other customers, until he receives his requested service, after which, he leaves and has no further effects on the system. The service times, for both primary and repeated customers, are exponentially distributed with parameter μ. We assume that the inter-arrival times of primary customers, intervals between repetitions and service times are mutually independent.Denote by I(t) the state of the server at time t. The events I(t)=0 or 1 correspond to, respectively, the states that the server is idle or busy. Let N(t) be the number of customers in the pool at time t. It is clear that the stochastic process {(I(t),N(t)), t⩾0} is a two-dimensional continuous time Markov chain with state space {0,1}×{0,1,2,…}. The non-zero transition rates are given byq(0,i)(1,i)=λ,i=0,1,2,…;q(1,i)(0,i)=μ,i=0,1,2,…;q(1,i)(1,i+1)=λ,i=0,1,2,…;q(0,i)(1,i-1)=iθ,i=1,2,3,….The corresponding transition rate diagram is shown in Fig. 1.We assume that the customers are allowed to decide whether to join or balk upon their arrival based on the information they have. After service, every customer receives a reward of R units. This may reflect his satisfaction or the added value of being served. Moreover, each customer incurs a waiting cost C units per time unit when he remains in the system (this cost is accumulated both in the retrial pool and in the service area). We observe that the expected waiting cost incurred in the service area isCμ, independently of customers’ strategy, and one can subtract it from R. Therefore, without loss of generality, we assume that waiting costs are incurred only for the time in the retrial pool. Customers are risk neutral and wish to maximize their expected benefit. At their arrival instants, they have to assess their expected waiting costs against their reward associated with receiving service, given the information regarding the system, and decide accordingly whether to join or not. Specifically, the customers strictly prefer to enter if the reward for service exceeds the expected cost for waiting, and are indifferent between entering and balking if the reward is equal to the cost. Moreover, customers’ decisions are irrevocable, meaning that neither reneging of entering customers nor retrials of balking customers are allowed.In the next sections we investigate customer individual optimal and socially optimal strategies for joining/balking. We distinguish two cases with respect to the levels of information available to customers at their arrival instants, before their decisions are made:(1)Unobservable case: Customers are informed about only the state of the server I(t).Observable case: Customers are informed about the state of the server as well as the number of customers in the pool (I(t),N(t)).In both information cases, if an arriving customer finds the server idle, he will certainly enter to receive service because there is no waiting costs on him. The customers that find the server busy have to decide whether to enter the retrial pool or balk.We begin with the unobservable case in which the customers are informed about the state of the server but not the number of customers in the pool. Since all customers are assumed indistinguishable, we can consider the situation as a symmetric game among them. As we have already noted, a customer that finds an idle server upon arrival prefers to enter, because he has a positive expected net benefit R. Thus, entering is a dominant strategy of the customer which need not take into account the strategies of any other customers. We next concentrate our study on the behavior of customers that find the server busy upon arrival. In the present model, there are two pure strategies, to join or to balk. And a mixed strategy is specified by the joining probability of an arriving customer that finds the server busy. Our goal is to identify the Nash equilibrium mixed balking strategy.Suppose that all customers follow a mixed strategy ‘enter with probability q while observing a busy server’. Then, the system behaves as the original, but with arrival rate λq for states where the server is busy instead of λ. Its transition diagram is seen in Fig. 2.The system is stable if λ<μ. Letting pun(i,j) be the steady-state probability of state (i,j) and defining the corresponding partial generating functions asp0(z)=∑j=0∞zjpun(0,j)andp1(z)=∑j=0∞zjpun(1,j), we have the following.Lemma 1The partial generating functions p0(z) and p1(z), which are with respect to the number of customers in the retrial pool, are given by(3.1)p0(z)=μ-λqμ+λ(1-q)1-λqμ1-λqμzλθ,(3.2)p1(z)=λμ+λ(1-q)1-λqμ1-λqμzλθ+1.The balance equations for the stationary distribution are given as follows:(3.3)(λ+jθ)p(0,j)=μp(1,j),j=0,1,2,…,(3.4)(λq+μ)p(1,j)=λp(0,j)+(j+1)θp(0,j+1)+λqp(1,j-1),j=0,1,2,…,where p(1,−1)=0.Multiplying both sides of (3.3) and (3.4) by zjand summing over all j, respectively, we obtain the following equations:(3.5)λp0(z)+θzddzp0(z)=μp1(z),(3.6)(λq(1-z)+μ)p1(z)=λp0(z)+θddzp0(z).Eliminating p1(z) we get the following differential equation for p0(z):ddzp0(z)=λ2qθ(μ-λqz)p0(z),with solution(3.7)p0(z)=Const1-λqμzλθ.Substituting (3.7) into (3.5) we have(3.8)p1(z)=λμConst1-λqμzλθ+1.The constant can be found with the help of the normalizing condition∑j=0∞(p(0,j)+p(1,j))=p0(1)+p1(1)=1,which implies that(3.9)Const=1-λqμλθ+11+λμ(1-q).From 3.7, 3.8, 3.9 we immediately obtain (3.1) and (3.2).□For the unobservable M/M/1 retrial queue in the steady state, in which all customers enter with probability q when they arrive finding the server busy, the steady-state probabilities are given by(3.10)pun(0,j)=(λq)jj!μjθj∏i=0j-1(λ+iθ)·μ1-λqμλθ+1μ+λ(1-q),j=0,1,2,…,(3.11)pun(1,j)=(λq)jj!μjθj∏i=1j(λ+iθ)·λ1-λqμλθ+1μ+λ(1-q),j=0,1,2,…,where we define∏i=kjf(i)=1for j<k.To get formulas (3.10) and (3.11), it is sufficient to expand functions1-λqμz-λθand1-λqμz-λθ-1given in (3.1) and (3.2) in power series with the help of the classical binomial formula:(1+x)m=∑n=0∞xnn!∏i=0n-1(m-i).□We now tag a customer in the pool. Define T(1,k) as the expected time until service begins for the tagged customer, given that k other customers are in the retrial pool and the server is busy. We have the following lemma.Lemma 2For k⩾0, the expected waiting time T(1,k) for a tagged customer in the retrial pool is given by(3.12)T(1,k)=mk+b,where(3.13)m=12μ-λq,and(3.14)b=2(λ+θ+μ)-λqθ(2μ-λq).The proof is similar to that of Lemma 6.1 in Hassin and Haviv (2003). Compare the tagged customer when he is with k or k+1 other customers in the pool. As is argued in Hassin and Haviv (2003), the expected added waiting time in the pool on the tagged customer inflicted by the extra customer in the latter case is independent of k. Therefore, T(1,k) is linear in k, in which m is the expected added delay of the tagged customer due to the extra customer.The extra customer enters first, and hence increases the delay of the tagged customer, with probabilityθθ+θ. This expected added delay equals the expected service time of the extra customer,1μ, plus the expected number of customers that arrive during this service timeλqμ, multiplied by the expected delay each of them adds to the tagged customer, which is again m, i.e.,m=θθ+θ1μ+λqμm,which is solved uniquely by the value for m stated in (3.13)Note that b is the expected waiting time for the tagged customer who is alone in the pool given that the server is busy. Also, we define W as the expected waiting time for the tagged customer who is alone in the pool given that the server is idle. We have the system(3.15)b=1λq+μ+λqλq+μ(m+b)+μλq+μW,(3.16)W=1λ+θ+λλ+θb.By solving (3.15) and (3.16), we derive the value for b as stated in (3.14).□We now consider a customer that arrives to find the server busy. Due to PASTA property, the probability that the customer observes j other customers in the pool is the stationary probability that the server is busy and j customers are in the pool pun(1,j), which is given by (3.11). If this customer decides to enter, his expected waiting time in the pool (from arrival to starting receiving service) is equal to T(1,j). Then, we have the following result.Theorem 2The expected time that an arriving customer waits until his service begins if he decides to enter given that the server is busy, is given by(3.17)T(q)=1θ+λ+θθ(μ-λq).When the system is in steady state, the expected waiting time for an arriving customer given that he finds the server busy and he decides to enter is(3.18)T(q)=∑j=0∞pun(1,j)T(1,j)∑j=0∞pun(1,j)=∑j=0∞jpun(1,j)∑j=0∞pun(1,j)m+b=ddzp1(z)z=1p1(1)m+b,where m, b and p1(z) are given by 3.13, 3.14 and 3.2. By differentiating (3.2) and evaluating it at the point z=1, and putting z=1 in (3.2), we obtainddzp1(z)z=1and p1(1). Substituting both of them and m, b into (3.18), after some algebra, yields (3.17).□Based on the reward–cost structure we have mentioned before, the expected net benefit of an arriving customer if he finds the server busy and decides to enter is(3.19)S(q)=R-C1θ+λ+θθ(μ-λq).The equilibrium behavior of the customers can be described in the following.Theorem 3In the unobservable retrial queue with λ<μ, a unique Nash equilibrium mixed strategy ‘enter with probability qewhile observing a busy server’ exists, where qeis given by(3.20)qe=0,if0<RC⩽λ+θ+μθμ;μ-(λ+θ)CRθ-Cλ,ifλ+θ+μθμ<RC<θ+μθ(μ-λ);1,ifRC⩾θ+μθ(μ-λ).We observe that S(q) is strictly decreasing for q∈[0,1] and has a unique maximumS(0)=R-C·λ+θ+μθμ,and a unique minimumS(1)=R-C·θ+μθ(μ-λ).Therefore, whenRC∈0,λ+θ+μθμ, S(q) is non-positive for every q, the best response is balking and the unique equilibrium point is qe=0, which gives the first branch of (3.20).WhenRC∈λ+θ+μθμ,θ+μθ(μ-λ), there exists a unique solution of the equation S(q)=0 which lies in the interval (0,1) and gives the second branch of (3.20).WhenRC∈θ+μθ(μ-λ),∞, S(q) is non-negative for every q. In other words, the best response is 1 in this case. Thus, entering is the unique Nash equilibrium strategy and we obtain the third branch of (3.20).□Because S(q) is a decreasing function, whenever the joining probability q is smaller than qe, the expected net benefit of an arriving customer if he enters is positive, thus the unique best response is 1. For the similar reason, the unique best response is 0 if q>qe. Moreover, any strategy is a best response if q=qe. This shows that an individual’s best response is a decreasing function of the strategy selected by the other customers, that is, the higher the joining probability selected by the others, the lower is one’s best response. Therefore, we have an “avoid the crowd” (ATC) situation.We now proceed to the problem of social optimization that maximizes the overall welfare of the customers per time unit. Related results are summarized in the following theorem.Theorem 4In the unobservable retrial queue with λ<μ, a unique mixed strategy ‘enter with probability q∗while observing a busy server’ that maximizes the social net benefit per time unit exists and is given by(3.21)q∗=0,if0<RC⩽(λ+μ)(λ+θ+μ)θμ2;μ-x2λ,if(λ+μ)(λ+θ+μ)θμ2<RC<μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2;1,ifRC⩾μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2;wherex2=μC(λ+θ)+(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)(C(θ-μ)+μθR).The social benefit per time unit when all customers follow a mixed policy “enter with probability q while observing a busy server” is(3.22)Ssocun(q)=λ∗(q)R-CE[N(q)],where λ∗(q) is the mean arrival rate for the customers that decide to enter the system and E[N(q)] is the mean number of customers in the retrial pool. Using (3.1) and (3.2) and PASTA property, we have(3.23)λ∗(q)=λp0(1)+λqp1(1)=λμμ+λ(1-q),and(3.24)E[N(q)]=ddzp0(z)z=1+ddzp1(z)z=1=λ2q(θ+μ+λ(1-q))θ(μ-λq)(μ+λ(1-q)).Substituting (3.23) and (3.24) into (3.22), we obtain(3.25)Ssocun(q)=λμμ+λ(1-q)R-λ2q(θ+μ+λ(1-q))θ(μ-λq)(μ+λ(1-q))C.We let x=μ−λq, then (3.25) can be rewritten as a function of x(3.26)Ssoc(x)=λθC+((θ-μ)C+μθR)x-μC(λ+θ)x2+λx.So, the problem of maximizingSsocun(q)for q∈[0,1] is equivalent to the problem of maximizing Ssoc(x) for x∈[μ−λ,μ]. Differentiating Ssoc(x) we have that(3.27)ddxSsoc(x)=λθ-((θ-μ)C+μθR)x2+2μC(λ+θ)x+λμC(λ+θ)(x2+λx)2.We consider two cases.Case 1:RC⩽μ-θθμ⇔(θ-μ)C+μθR⩽0. In this case, we observeddxSsoc(x)>0for any x∈[μ−λ,μ], which implies that Ssoc(x) is strictly increasing in x and the unique maximum is attained at x=μ. Thus, the best response is q∗=0.Case 2:RC>μ-θθμ⇔(θ-μ)C+μθR>0. In this case, Ssoc(x) may not be monotone in x always in [μ−λ,μ]. SolvingddxSsoc(x)=0, we obtain two roots(3.28)x1=μC(λ+θ)-(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)(C(θ-μ)+μθR)<0,(3.29)x2=μC(λ+θ)+(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)(C(θ-μ)+μθR)>0.Therefore, Ssoc(x) is decreasing in (−∞,x1) and (x2,+∞) respectively, and increasing in [x1,x2].Case 2a:μ<x2⇔RC<(λ+μ)(λ+μ+θ)θμ2. In this case, Ssoc(x) is increasing for x∈[μ−λ,μ], the unique maximum is attained at x=μ, i.e., q∗=0.Case 2b:μ-λ⩽x2⩽μ⇔(λ+μ)(λ+μ+θ)θμ2⩽RC⩽μ2(θ+μ)+λθ(μ-λ)(μ-λ)2θμ. In this case, Ssoc(x) is increasing for x∈[μ−λ,x2] and decreasing for x∈[x2,+∞]. So the optimal solution is x=x2, i.e.,q∗=μ-x2λ.Case 2c:μ-λ>x2⇔RC>μ2(θ+μ)+λθ(μ-λ)(μ-λ)2θμ. In this case, Ssoc(x) is decreasing for x∈[μ−λ,μ], so it takes its maximum at x=μ−λ, i.e., the best response is q∗=1. From the above results, we obtain the social optimization probability q∗ in the theorem statement.□To conclude, we compare the equilibrium solution qewith the socially optimal solution q∗ which maximizes social net benefit per time unit.Theorem 5For our model,(3.30)q∗⩽qe.According to (3.20) and (3.21), we consider two cases:(i) μ2<λ(λ+θ+μ). In this case,(λ+μ)(λ+θ+μ)θμ2<θ+μθ(μ-λ). We discuss the following five subcases.Case 1a: If0<RC⩽λ+θ+μθμ, then q∗=qe=0.Case 1b: Ifλ+θ+μθμ<RC⩽(λ+μ)(λ+θ+μ)θμ2, then q∗=0 andqe=μ-(λ+θ)CRθ-Cλ∈(0,1). So the inequality q∗<qeholds.Case 1c: If(λ+μ)(λ+θ+μ)θμ2<RC⩽θ+μθ(μ-λ), thenq∗=μ-x2λandqe=μ-(λ+θ)CRθ-Cλ. After some algebra, we obtainx2>(λ+θ)CRθ-C. So the inequality q∗<qeholds.Case 1d: Ifθ+μθ(μ-λ)<RC⩽μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2, thenq∗=μ-x2λ∈(0,1]and qe=1, and obviously q∗⩽qe.Case 1e: IfRC>μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2, then q∗=qe=1.(ii) μ2⩾λ(λ+θ+μ). In this case,(λ+μ)(λ+θ+μ)θμ2⩾θ+μθ(μ-λ). We also discuss five subcases.Case 2a: If0<RC⩽λ+θ+μθμ, then q∗=qe=0.Case 2b: Ifλ+θ+μθμ<RC⩽θ+μθ(μ-λ), then q∗=0 andqe=μ-(λ+θ)CRθ-Cλ∈(0,1]. So the inequality q∗<qeholds.Case 2c: Ifθ+μθ(μ-λ)<RC⩽(λ+μ)(λ+θ+μ)θμ2, then q∗=0 and qe=1.Case 2d: If(λ+μ)(λ+θ+μ)θμ2<RC⩽μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2, thenq∗=μ-x2λ∈(0,1]and qe=1, and obviously q∗⩽qe.Case 2e: IfRC>μ2(θ+μ)+λθ(μ-λ)θμ(μ-λ)2, then q∗=qe=1.We give a detailed explanation of how to derive the resultx2>(λ+θ)CRθ-Cin Case 1c. First, under the condition, we haveRC>(λ+μ)(λ+θ+μ)θμ2>θ+μθμ, which leads to(3.31)2μ(Rθ-C)>C(θ-μ)+μθR.On the other hand,(3.32)x2>(λ+θ)CRθ-C⇔λμC(λ+θ)(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)-μC(λ+θ)>(λ+θ)CRθ-C⇔(μC(λ+θ)+λμ(Rθ-C))2>(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)⇔(λμ(Rθ-C))2+2λμ2C(λ+θ)(Rθ-C)>λμC(λ+θ)(C(θ-μ)+μθR).With the help of (3.31), the inequality of (3.32) holds, which givesx2>(λ+θ)CRθ-C.The result stated in Theorem 5 may be interpreted as follows. When a customer enters the pool, he increases the delay for other customers. Such an effect is called negative externality. Customers who independently maximize their own welfare ignore those negative externalities that they impose on other customers in the pool and later arrivals, and they tend to overuse the system. It is clear that these externalities should be taken into account when we aim to maximize the overall welfare. As a result, in the latter case, less customers should join the system, which leads to less congested systems. The resulting equilibrium arrival rate is therefore larger than the socially optimal one.All of the results derived above in this section is under the condition λ<μ. For the opposite case λ⩾μ, the equilibrium joining probability and the socially optimal joining probability can be obtained by following a similar analysis(3.33)qe=0,if0<RC⩽λ+θ+μθμ;μ-(λ+θ)CRθ-Cλ,ifRC>λ+θ+μθμ;(3.34)q∗=0,if0<RC⩽(λ+μ)(λ+θ+μ)θμ2;μ-x2λ,ifRC>(λ+μ)(λ+θ+μ)θμ2;wherex2=μC(λ+θ)+(μC(λ+θ))2+λμC(λ+θ)(C(θ-μ)+μθR)(C(θ-μ)+μθR),and these two probabilities are also ordered as q∗⩽qe.We now turn our interest to the observable case where the arriving customers observe not only the state of the server but also the number of customers already waiting in the pool. Similar to the unobservable case, this information is useful only for the customers who find the server busy at their arrival instants since if the server is found idle, the customers receive service immediately. For those who arrive finding a busy server, this additional information may help them assess their expected net benefit more accurately.In contrast to the FCFS queueing systems in which the customers are not affected by the decisions of further customers, however, in the retrial queue the customers’ mean waiting time in the pool is influenced by the behavior of the other customers that find the server busy.We shall find that there exists an equilibrium strategy of threshold type [n,p] in the observable queue, where n is an integer and 0⩽p⩽1. More concretely, there always exists an equilibrium, in which all customers follow a threshold strategy [n,p] which prescribes that when they find the server busy upon arrival, they always enter if the queue length in the pool is at most n−1, always balk if the queue length is at least n+1, and enter with probability p when the queue length is n. A threshold policy [n,p] can be denoted by [x] where x=n+p. If x is an integer (p=0 or p=1), the strategy is pure. Otherwise, it is mixed. Note that the threshold strategy [n,1] and [n+1,0] are identical. Fig. 3illustrates the dynamics of the retrial queueing system in the observable case for the [n,p] threshold strategy.Define ϕ[n,p](i,k) as the expected (residual) time until service begins for the tagged customer in the pool, given that there are i (i=0,1) customers receiving service and k other customers waiting in the pool, and all other customers follow [n,p] threshold balking strategy. It is clear that if the tagged customer finds the server idle upon arrival, he occupies the server immediately. Otherwise, if he finds the system at state (1,k) and decides to enter, his expected waiting time until service begins is ϕ[n,p](1,k). In the following theorem we calculate the expected waiting time ϕ[n,p](1,k) of the tagged customer.Theorem 6In the observable retrial queue, if all other customers follow [n,p] threshold strategy when they find the server busy at their arrival instants, the expected waiting time of the tagged customer on condition that he finds the system at state (1,k) and decides to enter is given as follows1.For n⩾1,(4.35)ϕ[n,p](1,k)=a(k)ϕ[n,p](1,0)+b(k),0⩽k⩽n-1,(4.36)ϕ[n,p](1,n)=λ+μ+(n+1)θ(n+1)θμ+nn+1(a(n-1)ϕ[n,p](1,0)+b(n-1)),where(4.37)ϕ[n,p](1,0)=λp(λ+nθ)n+1+nθμa(n-1)-(n-1)θμa(n-2)-1×λ+μ+nθ+λp(λ+nθ)(λ+μ+(n+1)θ)(n+1)θμ-λp(λ+nθ)n+1+nθμb(n-1)+(n-1)θμb(n-2),and a(k) and b(k) are recursively computed by(4.38)a(0)=1,a(1)=1+μθλ(λ+θ),(4.39)a(k+1)=f1(k)a(k)+f2(k)a(k-1),1⩽k⩽n-2,(4.40)b(0)=0,b(1)=-λ+θ+μλ(λ+θ),(4.41)b(k+1)=f1(k)b(k)+f2(k)b(k-1)+g(k),1⩽k⩽n-2,with(4.42)f1(k)=1+(k+1)μθλ(λ+(k+1)θ),k⩾1,(4.43)f2(k)=-kμθλ(λ+(k+1)θ),k⩾1,(4.44)g(k)=-λ+(k+1)θ+μλ(λ+(k+1)θ),k⩾1.For n=0,(4.45)ϕ[0,p](1,0)=λ+μ+θθμ.For the case n⩾1, by a first step argument, we have the following system of linear equations(4.46)ϕ[n,p](0,0)=1λ+θ+λλ+θϕ[n,p](1,0),(4.47)ϕ[n,p](0,k)=1λ+(k+1)θ+λλ+(k+1)θϕ[n,p](1,k)+kθλ+(k+1)θϕ[n,p](1,k-1),k=1,2,…,n,(4.48)ϕ[n,p](1,k)=1λ+μ+λλ+μϕ[n,p](1,k+1)+μλ+μϕ[n,p](0,k),k=0,1,…,n-2,(4.49)ϕ[n,p](1,n-1)=1λp+μ+λpλp+μϕ[n,p](1,n)+μλp+μϕ[n,p](0,n-1),(4.50)ϕ[n,p](1,n)=1μ+ϕ[n,p](0,n).Substituting (4.47) into (4.48), we obtain(4.51)ϕ[n,p](1,k+1)=f1(k)ϕ[n,p](1,k)+f2(k)ϕ[n,p](1,k-1)+g(k),1⩽k⩽n-2,where f1(k), f2(k) and g(k) are given by 4.42, 4.43, 4.44.By (4.51), ϕ[n,p](1,k) can be represented by(4.52)ϕ[n,p](1,k)=a(k)ϕ[n,p](1,0)+b(k),0⩽k⩽n-1.where the coefficients a(k) and b(k) are obtained recursively by substituting (4.52) into (4.51) which yields (4.39) and (4.41). By substituting (4.46) into (4.48) for k=0 and then substituting ϕ[n,p](1,1) from (4.52), we obtain (4.38) and (4.40). Substituting ϕ[n,p](0,n) from (4.47) into (4.50) and then substituting ϕ[n,p](1,n−1) from (4.52) yields ϕ[n,p](1,n) given by (4.36). Finally, substituting ϕ[n,p](0,n−1) from (4.47) into (4.49) we obtain after some algebraic manipulation ϕ[n,p](1,0) given by (4.37).For n=0, we can easily get ϕ[0,p](1,0) that is given by (4.45).□To find the equilibrium threshold strategy of the customers in the observable case, we first introduce some lemmas.Lemma 3For every threshold policy [n,p] and 0⩽k⩽n,ϕ[n,p](1,k) is strictly increasing in k.We tag a customer in the pool and consider two cases under the condition that the server is busy, the first when he is with k customers in the pool, and the second when he is with k+1 other customers. The extra customer in the second case receives service prior to the tagged customer with probability12and hence increases the delay of the tagged one. Therefore, the expected waiting time in the second case ϕ[n,p](1,k+1) is greater than that in the first case ϕ[n,p](1,k), which completes the proof.□For every n⩾0 and 0⩽k⩽n, ϕ[n,p](1,k) is strictly increasing and continuous in p∈[0,1].Tag a customer in the pool with k customers when the server is busy. Consider two cases, the first is that all other customers follow [n,p1] strategy and the second is with [n,p2] strategy with 0⩽p1<p2⩽1. When the queue lengths reach n simultaneously before the tagged customer receives service, a new primary customer that arrives and finds a busy server will enter with higher probability in the second case and hence increases more delay of the tagged customer. Therefore, ϕ[n,p](1,k) is strictly increasing in p∈[0,1].It follows from 4.39, 4.42 and 4.43 thata(k+1)=a(k)+μθλ(λ+(k+1)θ)a(k)+kμθλ(λ+(k+1)θ)(a(k)-a(k-1)),1⩽k⩽n-2.Together with the fact a(1)>a(0)>0, we get that a(k) is strictly increasing in k for 0⩽k⩽n−1. By this result, the denominator of ϕ[n,p](1,0) given by (4.37) is positive for any p∈[0,1]. It is clear that ϕ[n,p](1,0) is continuous in p∈[0,1]. Thus, from (4.35) and (4.36), we obtain that ϕ[n,p](1,k) for 0⩽k⩽n is continuous in p∈[0,1].□Due to the fact that ϕ[n,1](1,k)=ϕ[n+1,0](1,k), Lemma 4 tells us that ϕ[x](1,k) is strictly increasing and continuous in x. Define(4.53)S[n,p](k)=R-Cϕ[n,p](1,k),n⩾0,0⩽k⩽n,as the expected net benefit for a customer who observes a busy server and k customers in the pool upon arrival and decides to enter, given that all other customers follow [n,p] threshold strategy. We determine the unique equilibrium threshold [ne,pe] in the following theorem.The equilibrium threshold [ne,pe] exists and is unique, which may be determined by the following procedure. Let ne≜max{n⩾0:S[n,0](n)>0}.Case 1: IfS[ne,1](ne)⩾0, then the equilibrium threshold is [ne,1].Case 2: IfS[ne,1](ne)<0, then the equilibrium threshold is [ne,pe], where pe(0<pe<1) is the unique solution ofS[ne,p](ne)=0,and is given by(4.54)pe=θμ((ne-1)b(ne-2)-neb(ne-1)-(nea(ne-1)-(ne-1)a(ne-2))ψ)λ(λ+neθ)ne+1a(ne-1)ψ+b(ne-1)-λ+μ+(ne+1)θθμ+λ+μ+neθλ(λ+neθ)ne+1a(ne-1)ψ+b(ne-1)-λ+μ+(ne+1)θθμ,From Lemmas 3 and 4 and (4.53), we obtain that S[n,p](k) is strictly decreasing in k and p respectively, and is continuous in p∈[0,1]. It follows that S[n,0](n)>S[n,1](n)>S[n,1](n+1)=S[n+1,0](n+1) for any n. By definition, we haveS[ne,0](ne)>0andS[ne+1,0](ne+1)⩽0. It should be noted that the strategy [ne,pe] is an equilibrium strategy is equivalent to that the threshold strategy [ne,pe] is optimal against itself. We tag a customer when he arrives finding the server busy and consider the following two cases.Case 1:S[ne,1](ne)⩾0.Case 2:S[ne,1](ne)<0.It remains to prove the uniqueness of the equilibrium threshold.Denote S[x](k)=S[n,p](k), where x=n+p. From Lemmas 3 and 4 and the fact S[n,1](k)=S[n+1,0](k), we have that S[x](k) is strictly decreasing in x and k, respectively. Define L(x) as the set of “optimal thresholds” against the threshold strategy [x], namely,L(x)={x′:[x′]isoptimalagainst[x]}.Let l(x) denote the maximal integer k⩾0 for which S[x](k)⩾0. L(x) can be expressed as follows:L(x)={l(x)+p:0⩽p⩽1},ifS[x](l(x))=0;{l(x)+1},ifS[x](l(x))>0;Tag a customer and consider two cases when other customers follow the strategy [x1] and [x2] (x1<x2). We first determine the order of l(x1) and l(x2). If l(x1)<l(x2), we have thatS[x1](l(x2))>S[x2](l(x2))⩾0because of the monotonicity property of S[x](k), which implies that l(x1) is not the maximal integer for whichS[x1](k)⩾0and is contrary to the definition of l(x1). Hence, l(x1)⩾l(x2).If l(x1)>l(x2), for any 0⩽p1, p2⩽1, we get l(x1)+1⩾l(x1)+p1⩾l(x2)+1⩾l(x2)+p2. Thus, The optimal threshold selected by the tagged customer when other customers follow [x2] threshold strategy is not smaller than that when [x1] is adopted by other customers.If l(x1)=l(x2),S[x1](l(x1))>0. Otherwise, ifS[x1](l(x1))=0, thenS[x2](l(x2))<S[x1](l(x2))=S[x1](l(x1))=0, which is contrary to the definition of l(x2). In this case, the optimal threshold against [x1] is l(x1)+1. SinceS[x2](l(x2))⩾0, the optimal threshold selected by the tagged customer when all others use [x2] as their threshold strategy is l(x2)+1 or l(x2)+p2 for any 0⩽p2⩽1. We observe that l(x1)+1=l(x2)+1⩾l(x2)+p2.Therefore, for any case and x1<x2, the optimal threshold of the tagged customer against [x1] is not smaller than that against [x2]. That is, one’ optimal response to a threshold x adopted by all other customers is decreasing in x. This shows that we have an ATC situation. As is argued in Hassin and Haviv (2003) that in the ATC case at most one equilibrium exists, [ne,pe] is the unique symmetric equilibrium threshold strategy.□We next proceed to the problem of social optimization. A customer does not seek to maximize his own expected net benefit, but rather takes into account the effect of his action on all other customers. Let n∗ be the value of the threshold that maximizes the social net benefit per time unit. When the customers arrive finding a busy server, they are admitted to enter if and only if there are less than n∗ customers in the pool. To find the socially optimal threshold n∗, we first need to determine the stationary behavior of the system.Suppose that the threshold [n,0] is used by all customers when they observe a busy server upon arrival. That is, they join the system as long as the number of customers in the pool is less than n and balk otherwise. It is clear that the stochastic process {(I(t),N(t)), t⩾0} is a two-dimensional continuous time Markov chain with state space {0,1}×{0,1,2,…,n}. The stationary distribution of the system is given in the following theorem.Theorem 8For the observable retrial queue in the steady state, in which all customers follow [n,0] threshold strategy when they find the server busy upon arrival, the state probabilities p(i,j), where (i,j)∈{0,1}×{0,1,2,…,n}, are given by(4.55)p[n,0]obs(1,0)=∑j=1nλθμj1+μλ+jθ∏i=1j(λ+iθ)j!+λ+μλ-1,(4.56)p[n,0]obs(0,0)=μλp(1,0),(4.57)p[n,0]obs(1,j)=λθμj∏i=1j(λ+iθ)j!p(1,0),j=1,2,…,n,(4.58)p[n,0]obs(0,j)=λθμjμ∏i=1j-1(λ+iθ)j!p(1,0),j=1,2,…,n.The balance equations for the stationary distribution are given as follows:(4.59)(λ+jθ)p(0,j)=μp(1,j),j=0,1,…,n(4.60)(λ+μ)p(1,j)=λp(0,j)+(j+1)θp(0,j+1)+λp(1,j-1),j=0,1,…,n-1,(4.61)μp(1,n)=λp(0,n)+λp(1,n-1),where p(1,−1)=0.Substituting p(0,n) from (4.59) into (4.61) yields(4.62)p(1,n)=λ(λ+nθ)nθμp(1,n-1).With the help of (4.59) eliminate p(0,j) from (4.60), and rewrite the resulting equation as(4.63)(j+1)θμλ+(j+1)θp(1,j+1)-λp(1,j)=jθμλ+jθp(1,j)-λp(1,j-1),j=1,2,…,n-1,which implies by taking into account (4.62) that(4.64)jθμλ+jθp(1,j)-λp(1,j-1)=0,j=1,2,…,n,i.e,(4.65)p(1,j)=λ(λ+jθ)jθμp(1,j-1),=λθμj∏i=1j(λ+iθ)j!p(1,0),j=1,2,…,n.From (4.59) we have(4.66)p(0,0)=μλp(1,0),(4.67)p(0,j)=λθμjμ∏i=1j-1(λ+iθ)j!p(1,0),j=1,2,…,n.The remaining probability p(1,0) can be found with the help of the normalization condition∑j=0n(p(0,j)+p(1,j))=1and is given by (4.55).□Because the probability of balking isp[n,0]obs(1,n), the social benefit per time unit when all customers follow the threshold policy [n,0] is(4.68)Ssocobs(n)=λR1-p[n,0]obs(1,n)-C∑j=1njp[n,0]obs(0,j)+p[n,0]obs(1,j),n⩾0.n∗ is obtained as the integer that maximizesSsocobs(n).An analytic characterization of the optimal solution based on (4.68) is not tractable because of the complexity of the expression ofSsocobs(n). We thus resort to numerical analysis in order to explore the behavior of the socially optimal threshold n∗ and its relationship to the equilibrium threshold xe=ne+pe.In this section we will investigate the effects of the parameters on the behavior of customers under different assumptions of unobservable and observable cases. More specifically, we examine how the equilibrium and socially optimal entrance probabilities for the unobservable model as well as the equilibrium and socially optimal thresholds for the observable case are affected by changing the values of parameters λ, μ, θ and R. Furthermore, we compare the relations among the social benefits when customers follow the corresponding individual optimal and socially optimal strategies in two cases with respect to different levels of information.Figs. 4–7describe the influence of the parameters on the equilibrium and optimal entrance probabilities. Clearly, q∗ is smaller than qeas demonstrated in Theorem 5. Besides, both q∗ and qeare continuously monotone decreasing in λ. This is because when λ increases, arriving customers who find the server busy expect that the system is more loaded. As a consequence, they are less inclined to enter the retrial pool and then retry for their requested service. Furthermore, the entrance probabilities are increasing with respect to μ since an increasing service rate can benefit the customers in the retrial pool by reducing their expected waiting time no matter whether their goal is individual or social maximization. Similarly, the entrance probabilities increase as θ increases since the customers who retry more frequently have more chances to be successful in their attempts during the same period of time. Finally, it is intuitive that the entrance probabilities are increasing in R. Therefore, if customers can receive higher values of the reward upon service completion, they tend to enter the pool when finding the server busy upon arrival.Figs. 8–11depict the equilibrium and socially optimal thresholds with respect to λ, μ, θ and R. In these figures, a real number of the form xe=17.25 means ne=17 and pe=0.25. Besides, n∗ are step functions since the optimal thresholds can only take integer values. For the similar reason to Figs. 4–7 of the unobservable case, both xeand n∗ are monotone decreasing in λ and increasing in μ, θ and R, respectively. In contrast to the observable case in the FCFS queues where the equilibrium threshold is not affected by the arrival rate, in our model, the equilibrium threshold is indeed influenced by the behavior of later arriving customers. Furthermore, we observe that the socially optimal threshold is lower than the Nash equilibrium threshold, which agrees with our intuition. This is due to that if the customers are noncooperative, they may join the system even if the retrial pool is congested, without considering other customers’ welfare. Otherwise, if they are cooperative, they make decisions to maximize their overall welfare by taking into account the negative externalities imposed on each other.Figs. 12–15illustrate the social net benefit per time unit, when customers follow the corresponding equilibrium and socially optimal strategies in the observable case and the unobservable case with respect to the parameters of the system, λ, μ, θ and R, respectively. It is expected thatSsocun(qe)⩽Ssocun(q∗)andSsocobs(xe)⩽Ssocobs(n∗)since the customers overuse the system by ignoring the negative externalities that they impose on each other. Moreover, all these figures show the relationSsocun(qe)⩽Ssocobs(xe)⩽Ssocun(q∗)⩽Ssocobs(n∗). In this sense, it is better for the society that the customers are informed more information no matter whether they follow their individual optimal or socially optimal strategy. In other words, more information provided to arriving customers benefits the society regardless of whether the customers are selfish or altruistic. Note also that all curves ofSsocun(q∗)andSsocobs(n∗)are increasing with respect to λ, μ, θ and R, which implies that the social benefit per time unit gets higher as the value of arrival rate, service rate, retrial rate or reward for service increases when the customers are cooperative regardless of how many information they receive upon arrival.

@&#CONCLUSIONS@&#
We analyzed the customer balking strategic behavior in a single server retrial queue where arriving customers decide whether to join the system or balk when they find the server busy. Two different cases with respect to the levels of information provided to arriving customers have been investigated extensively and the equilibrium and socially optimal strategies for each case were derived. Specifically, we derived the equilibrium and optimal entrance probabilities for arriving customers in the unobservable case and the equilibrium and optimal threshold strategies if they can observe the number of customers already in the pool, both of which are under the condition that the server is found busy upon arrival. From the viewpoint of the social planner, the social goal is to maximize the sum of benefits from service minus waiting costs. If the customers are noncooperative, their goal is to independently maximize their own welfare by ignoring the negative externalities that they impose on other customers and thus they tend to overuse the system. Therefore, as shown in the numerical experiments, the solutions of the social maximization problems are smaller than the counterparts of the individual maximization problems both in the unobservable and observable cases. Another finding in the numerical experiments is that, if the customers are informed more information at their arrival instants, the society gets more benefits regardless of whether the customers are selfish or altruistic.